<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Preview b√†i t·∫≠p</title>
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--accent1:#6a11cb;--accent2:#2575fc;--muted:#6b7280;--btn-text:#fff}
    html, body { height: 100%; margin: 0; }
    body{font-family:Inter,system-ui,Arial;background:var(--bg);color:#111}
    .wrap{
      max-width:100%;
      width:100%;
      height:100vh;
      margin:0;
      padding:18px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      gap:12px;
      background:linear-gradient(180deg,rgba(255,255,255,0.7),#fff);
    }
    h2{margin:0 0 6px 0}
    .controls{flex:0 0 auto; display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    select{padding:10px 12px;border-radius:10px;border:1px solid #e6e9ef;background:#fff;min-width:220px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;color:var(--btn-text);font-weight:700;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease}
    .btn-primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));box-shadow:0 8px 24px rgba(37,117,252,0.12)}
    .btn-ghost{background:transparent;color:var(--accent2);border:1px solid rgba(37,117,252,0.12);color:var(--accent2);border-radius:10px;padding:8px 12px}
    .btn:hover{transform:translateY(-2px)}
    /* iframe chi·∫øm ph·∫ßn c√≤n l·∫°i */
    #frame{flex:1 1 auto;width:100%;min-height:0;border-radius:10px;border:1px solid #e6eef8;background:#fff}
    .meta{color:var(--muted);font-size:13px;margin-top:6px}
    /* fullscreen styles */
    .fullscreen-frame {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 9998 !important;
      border-radius: 0 !important;
      border: none !important;
      box-shadow: none !important;
    }
    .hidden { display: none !important; }
    #closeFullscreen {
      position: fixed;
      top: 12px;
      right: 12px;
      z-index: 10000;
      padding: 10px 14px;
      border-radius: 10px;
      border: 0;
      background: rgba(255,255,255,0.95);
      color: #111;
      font-weight:700;
      box-shadow: 0 6px 18px rgba(16,24,40,0.12);
      cursor: pointer;
    }
    @media (max-width:640px){ .controls{flex-direction:column;align-items:stretch} select{width:100%} }
  </style>
</head>
<body>
  <div class="wrap">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <h2>Ch·ªçn b√†i t·∫≠p v√† b·∫•m M·ªü</h2>
      
    </div>

    <div class="controls" id="controlsBar">
      <select id="selectBai" aria-label="Ch·ªçn b√†i">
        <option value="">-- Ch·ªçn b√†i --</option>
      </select>
      <button id="openBtn" class="btn btn-primary">M·ªü b√†i</button>
      <button id="clearBtn" class="btn btn-ghost" style="color:#111;background:#fff;border:1px solid #e6e9ef">Clear</button>
    </div>

    

    <iframe id="frame" srcdoc="<p>Ch∆∞a ch·ªçn b√†i</p>"></iframe>
  </div>

  <script>
    const items = [{"name":"The history of Tea.html","filename":"The history of Tea.html","content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>IELTS Reading Practice</title>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n<style>\n  body,html{margin:0;height:100%;font-family:'Inter',sans-serif;overflow:hidden;background:#f8fafc;color:#1e293b}\n  /* Layout & Utility */\n  .top-bar { height: 60px; background: #fff; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.03); z-index: 50; }\n  .timer { font-family: monospace; font-size: 20px; font-weight: 700; color: #dc2626; background: #fef2f2; padding: 4px 12px; border-radius: 6px; border: 1px solid #fee2e2; }\n  .progress-container { display: flex; gap: 8px; overflow-x: auto; padding: 4px; max-width: 50%; align-items: center; }\n  .progress-circle { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #cbd5e1; color: #64748b; font-size: 12px; font-weight: 600; display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0; transition: all 0.2s; user-select: none; }\n  .progress-circle.prog-correct { background: #16a34a !important; border-color: #16a34a !important; color: white !important; }\n  .progress-circle.prog-wrong { background: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }\n  .progress-circle.filled { background: #3b82f6; border-color: #2563eb; color: white; }\n  .check-btn { background: #16a34a; color: white; border: none; padding: 8px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; }\n  .check-btn:hover { background: #15803d; }\n  .game-btn { background: #06b6d4; color: #042027; border: none; padding: 8px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; margin-left:10px; }\n  .game-btn:hover { background: #0891b2; color:#fff; }\n  \n  .container{display:flex;height:calc(100vh - 60px)}\n  .pane{padding:30px;overflow-y:auto; scroll-behavior: smooth;}\n  .left{width:50%;background:#fff;border-right:1px solid #e2e8f0; position:relative;}\n  .right{flex:1;background:#f8fafc}\n  .resizer{width:6px;background:#f1f5f9;cursor:col-resize;transition:0.2s}\n  \n  /* Reading Styles */\n  .para-box{margin-bottom:30px; position: relative; }\n  .para-header-row { display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 2px solid #e2e8f0; margin-bottom: 12px; padding-bottom: 8px; }\n  .para-header{font-weight:700;color:#334155;font-size:0.95em; text-transform:uppercase; letter-spacing:0.05em; background: #e2e8f0; padding: 4px 8px; border-radius: 4px; }\n  .en-text{font-size:17px;line-height:1.75;color:#334155;text-align:justify}\n  .sent { transition: background 0.2s; border-radius: 3px; padding: 0 1px; cursor: text; }\n  .sent:hover { background-color: #f1f5f9; }\n  .user-highlight { background-color: #fef08a; color: #000; box-shadow: 0 1px 2px rgba(0,0,0,0.1); cursor: pointer; border-bottom: 2px solid #facc15; }\n  .loc-highlight { background-color: #fff9c4; border-bottom: 2px solid #fbc02d; padding: 0 2px; }\n  #hl-btn { position: absolute; background: #1e293b; color: #fff; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; display: none; z-index: 100; transform: translateX(-50%); font-weight: 600; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n  #hl-btn::after { content: ''; position: absolute; top: 100%; left: 50%; border: 5px solid transparent; border-top-color: #1e293b; margin-left: -5px; }\n  .vocab{background:#e0f2fe;cursor:pointer;border-bottom:2px dotted #0284c7; padding:0 2px; color:#0c4a6e}\n  .hidden{display:none}\n  .vi-text{margin-top:15px;padding:15px;background:#f0fdf4;color:#334155;font-style:italic;font-size:15px;border-left:4px solid #22c55e; border-radius: 0 4px 4px 0;}\n  .vi-sent { transition: background 0.2s; }\n  .trans-btn{font-size:12px;background:#f1f5f9;color:#64748b;border:none;padding:6px 12px;border-radius:20px;margin-top:10px; cursor:pointer; font-weight: 600; transition:0.2s}\n  .trans-btn:hover{background:#e2e8f0; color:#0f172a}\n  \n  /* TFNG STYLES */\n.tfng-container { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }\n.tfng-label { cursor: pointer; }\n.tfng-label input { display: none; }\n.tfng-btn { \n    display: inline-block; \n    padding: 6px 12px; \n    border-radius: 20px; \n    border: 2px solid #cbd5e1; \n    color: #64748b; \n    font-size: 11px; \n    font-weight: 700; \n    transition: all 0.2s; \n    background: #fff; \n}\n.tfng-label:hover .tfng-btn { border-color: #6366f1; background: #eef2ff; color: #6366f1; }\n.tfng-label input:checked + .tfng-btn { \n    background: #3b82f6; \n    border-color: #3b82f6; \n    color: white; \n    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3); \n}\n/* Tr·∫°ng th√°i ch·∫•m ƒëi·ªÉm */\n.tfng-btn.correct-opt { background: #16a34a !important; border-color: #16a34a !important; color: white !important; }\n.tfng-btn.wrong-opt { background: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }\n\n  /* Questions */\n  .q-block{background:#fff;padding:20px;margin-bottom:16px;border-radius:12px;box-shadow:0 1px 3px rgba(0,0,0,0.05); border:1px solid #e2e8f0; position:relative; }\n  .q-num{font-weight:700;color:#2563eb;margin-right:8px; background:#eff6ff; padding:2px 6px; border-radius:4px; font-size:13px}\n  .q-num-s{font-weight:700;color:#2563eb;margin-right:4px; font-size:12px}\n  .drop-zone { display: inline-block; min-width: 80px; height: 28px; border-bottom: 2px solid #94a3b8; background: #f1f5f9; vertical-align: middle; text-align: center; color: #0f172a; font-weight: bold; cursor: pointer; border-radius: 4px 4px 0 0; }\n  .drop-zone.filled { background: #dcfce7; border-color: #16a34a; color: #15803d; }\n  .drop-zone.correct-zone { border-color: #16a34a; background: #dcfce7; color: #16a34a; }\n  .drop-zone.wrong-zone { border-color: #dc2626; background: #fee2e2; color: #dc2626; }\n  .drop-zone:empty::before { content: 'Drop here'; color: #94a3b8; font-weight: normal; font-size: 11px; }\n  .gap-input { border: none; border-bottom: 2px solid #cbd5e1; width: 120px; text-align: center; font-weight: 600; color: #1e293b; font-size: 15px; background: transparent; transition: 0.2s; padding: 0 4px; }\n  .gap-input:focus { outline: none; border-bottom-color: #3b82f6; background: #eff6ff; }\n  .input-correct { border-bottom: 2px solid #16a34a !important; background: #dcfce7; color: #16a34a; }\n  .input-wrong { border-bottom: 2px solid #dc2626 !important; background: #fee2e2; color: #dc2626; }\n  .ans-key { font-size: 11px; color: #fff; background: #dc2626; padding: 2px 6px; border-radius: 4px; margin-left: 4px; font-weight: bold; display: inline-block; vertical-align: middle; }\n  .loc-btn { font-size: 12px; cursor: pointer; background: transparent; border: none; opacity: 0.5; transition: 0.2s; margin-left: 6px; }\n  .loc-btn:hover { opacity: 1; transform: scale(1.1); }\n  \n  /* Headings */\n  .headings-panel { background: #fff; border: 1px solid #e2e8f0; padding: 16px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }\n  .headings-title { font-weight: 700; color: #4338ca; font-size: 14px; margin-bottom: 12px; text-transform: uppercase; border-bottom: 1px solid #e0e7ff; padding-bottom: 8px; }\n  .heading-item { padding: 8px 12px; background: #fff; border: 1px solid #cbd5e1; margin-bottom: 8px; border-radius: 8px; cursor: grab; font-size: 13px; display: flex; gap: 10px; transition: all 0.2s; align-items: start; }\n  .heading-item:hover { border-color: #4338ca; background: #eef2ff; transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }\n  .heading-item.dragging { opacity: 0.5; }\n  .heading-item.used { opacity: 0.5; background: #f1f5f9; text-decoration: line-through; pointer-events: none; border-style: dashed; }\n  .h-id { font-weight: 700; min-width: 25px; color: #4338ca; background: #e0e7ff; text-align: center; border-radius: 4px; padding: 0 4px; height: fit-content; }\n  .heading-drop { min-width: 150px; height: 36px; border: 2px dashed #94a3b8; background: #f8fafc; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #64748b; border-radius: 6px; margin-bottom: 0; transition: 0.2s; }\n  .heading-drop.filled { border-style: solid; background: #e0e7ff; color: #3730a3; border-color: #6366f1; font-weight: 700; font-size: 14px; }\n  .heading-fb { font-size: 13px; margin-left: 10px; white-space: nowrap; display: flex; gap: 6px; align-items: center; }\n  .heading-zone-wrapper { display: flex; align-items: center; flex-wrap: wrap; }\n  \n  /* MIF CIRCLES */\n  .mif-container { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }\n  .mif-label { cursor: pointer; }\n  .mif-label input { display: none; }\n  .mif-circle { width: 32px; height: 32px; border-radius: 50%; border: 2px solid #cbd5e1; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #64748b; transition: all 0.2s; background: #fff; font-size: 13px; }\n  .mif-label:hover .mif-circle { border-color: #6366f1; background: #eef2ff; color: #6366f1; }\n  .mif-label input:checked + .mif-circle { background: #6366f1; border-color: #6366f1; color: white; box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3); }\n  .mif-circle.correct-opt { background: #16a34a !important; border-color: #16a34a !important; color: white !important; }\n  .mif-circle.wrong-opt { background: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }\n\n  /* Feedback */\n  .correct{color:#16a34a; font-weight: 700;} \n  .wrong{color:#dc2626; font-weight: 600;}\n  .mcq-mark { font-weight: bold; margin-left: 6px; }\n  #popup{position:fixed;background:#fff;width:320px;border-radius:12px;box-shadow:0 10px 25px -5px rgba(0,0,0,0.1);display:none;z-index:999;border:1px solid #e2e8f0; overflow:hidden}\n\n  /* --- GAME CSS EMBEDDED --- */\n  #game-view {\n    display: none;\n    position: fixed;\n    top: 60px; /* Below top-bar */\n    left: 0;\n    width: 100vw;\n    height: calc(100vh - 60px);\n    overflow-y: auto;\n    background: linear-gradient(180deg,#071024 0%, #0b1220 100%);\n    color: #e6eef6;\n    z-index: 2000;\n    padding: 24px;\n    box-sizing: border-box;\n    font-family: Inter,system-ui,Arial;\n  }\n  /* Game Variables Scope */\n  #game-view {\n    --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --success:#10b981; --muted:#94a3b8;\n    --neon-primary: rgba(6,182,212,0.95); --neon-secondary: rgba(96,165,250,0.9); --neon-warm: rgba(249,115,22,0.9);\n    --input-muted-bg: rgba(255,255,255,0.02); --input-muted-border: rgba(255,255,255,0.04); --input-muted-text: rgba(230,238,246,0.85);\n  }\n  .g-container{width:100%; max-width:1200px; margin: 0 auto;}\n  .g-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px;}\n  .g-h1{font-size:20px; margin:0; color:var(--accent);}\n  .g-controls{display:flex; gap:8px; align-items:center;}\n  .g-btn{background:linear-gradient(90deg,#0ea5a4,#06b6d4); border:0; color:#042027; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600;}\n  .g-layout{display:flex; gap:18px; align-items:flex-start; overflow-x:auto; padding-bottom:6px;}\n  .g-card{flex: 0 0 48%; min-width:320px; box-sizing:border-box; max-height: calc(100vh - 180px); overflow:auto; -webkit-overflow-scrolling: touch; padding:12px; background:rgba(255,255,255,0.02); border-radius:12px; border:1px solid rgba(255,255,255,0.03);}\n  .g-list{display:flex; flex-direction:column; gap:10px;}\n  .g-eng-item, .g-vie-item{display:flex; align-items:center; gap:12px; padding:12px 14px; border-radius:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03);}\n  .g-eng-left{display:flex; align-items:center; gap:12px; flex: 0 0 220px; min-width:160px;}\n  .g-index{width:36px; height:36px; border-radius:8px; background:rgba(255,255,255,0.03); display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:700;}\n\n  /* Slot */\n  .g-slot{\n    flex:1; display:flex; align-items:center; justify-content:flex-start; gap:10px; padding:12px 16px; border-radius:12px;\n    background:rgba(255,255,255,0.01); border:2px dashed rgba(255,255,255,0.03); min-height:56px; transition:all 220ms ease; cursor:pointer;\n    position:relative; overflow:visible;\n  }\n  .g-slot .inner{position:relative; z-index:3;}\n  .g-slot.correct{padding-left:12px; font-size:15px; display:flex; align-items:center; border-style:solid; border-width:2px; background:linear-gradient(180deg, rgba(16,185,129,0.03), rgba(16,185,129,0.01));}\n  .g-slot::before{\n    content:\"\"; position:absolute; inset:-4px; border-radius:16px; z-index:1;\n    background: linear-gradient(90deg, var(--neon-primary), var(--neon-secondary), var(--neon-warm));\n    filter: blur(8px); opacity:0; transform:scale(0.98); transition:opacity 220ms ease, transform 220ms ease; pointer-events:none; mix-blend-mode:screen;\n  }\n  .g-slot::after{\n    content:\"\"; position:absolute; inset:-2px; border-radius:14px; z-index:2;\n    background: linear-gradient(90deg, var(--neon-primary), var(--neon-secondary), var(--neon-warm));\n    background-size:200% 100%; opacity:0; transform:translateZ(0); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; padding:2px; transition:opacity 220ms ease; pointer-events:none;\n  }\n  .g-slot:hover::before, .g-slot:focus::before, .g-slot.active::before, .g-slot.highlight::before{ opacity:0.55; transform:scale(1); animation: neonPulse 2.6s linear infinite; }\n  .g-slot:hover::after, .g-slot:focus::after, .g-slot.active::after, .g-slot.highlight::after{ opacity:1; animation: neonMove 2.2s linear infinite; }\n  .g-slot.correct::before{ background: linear-gradient(90deg, rgba(16,185,129,0.9), rgba(96,165,250,0.06)); opacity:0.6; filter:blur(10px); }\n  .g-slot.correct::after{ background: linear-gradient(90deg, rgba(16,185,129,0.95), rgba(6,182,212,0.06)); opacity:1; }\n\n  @keyframes neonMove{ 0%{background-position:0% 50%} 100%{background-position:200% 50%} }\n  @keyframes neonPulse{ 0%{filter:blur(6px); opacity:0.45} 50%{filter:blur(12px); opacity:0.7} 100%{filter:blur(6px); opacity:0.45} }\n\n  .g-vie-list{display:flex; flex-wrap:wrap; gap:10px; padding-top:6px;}\n  .g-vie-item{cursor:grab; user-select:none; padding:8px 12px; border-radius:10px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03);}\n  .g-vie-item.dragging{opacity:0.5; transform:scale(0.98);}\n  .g-wrong{animation:shake 300ms; border-color:rgba(239,68,68,0.6);}\n  @keyframes shake{0%{transform:translateX(0)} 25%{transform:translateX(-6px)} 50%{transform:translateX(6px)} 75%{transform:translateX(-4px)} 100%{transform:translateX(0)}}\n  \n  .g-badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.02); color:var(--muted); font-weight:600;}\n  .confetti{position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; overflow:hidden; z-index: 3000;}\n  .confetti .piece{position:absolute; width:10px; height:14px; opacity:0; transform:translateY(-20px) rotate(0deg); animation:fall 1200ms linear forwards;}\n  @keyframes fall{0%{opacity:1; transform:translateY(-10vh) rotate(0deg)} 100%{opacity:1; transform:translateY(110vh) rotate(720deg)}}\n  \n  /* Flashcard */\n  .flash-wrap{perspective:1200px; width:100%; max-width:520px;}\n  .flashcard{width:100%; height:140px; position:relative; transform-style:preserve-3d; transition:transform 600ms cubic-bezier(.2,.9,.3,1); border-radius:12px; cursor:pointer;}\n  .flashcard.flipped{transform:rotateY(180deg);}\n  .flash-face{position:absolute; inset:0; backface-visibility:hidden; border-radius:12px; display:flex; align-items:center; justify-content:center; padding:18px; font-size:18px; text-align:center; box-shadow: 0 6px 18px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);}\n  .flash-face.front{background:linear-gradient(180deg, rgba(6,182,212,0.08), rgba(96,165,250,0.03)); color:#e6f9fb;}\n  .flash-face.back{transform:rotateY(180deg); background:linear-gradient(180deg, rgba(16,185,129,0.06), rgba(96,165,250,0.02)); color:#eafff0;}\n\n  /* Fill-in */\n  .fill-list{display:flex; flex-direction:column; gap:10px;}\n  .fill-row{display:flex; gap:12px; align-items:center;}\n  .fill-row .vie{flex:0 0 48%; min-width:160px; color:var(--muted);}\n  .fill-row input{\n    flex:1; padding:10px 12px; border-radius:10px; border:1px solid var(--input-muted-border);\n    background: var(--input-muted-bg); color:var(--input-muted-text); transition:box-shadow 180ms, border-color 180ms, background-color 180ms;\n    caret-color: var(--neon-primary);\n  }\n  .fill-row input:focus{ outline:none; border-color: rgba(6,182,212,0.45); box-shadow: 0 6px 18px rgba(6,182,212,0.06); background: rgba(255,255,255,0.025); }\n  .fill-row input.correct{ border-color: rgba(16,185,129,0.7); box-shadow: 0 6px 18px rgba(16,185,129,0.04); background: rgba(16,185,129,0.02); }\n  .fill-row input.wrong{ border-color: rgba(244,63,94,0.7); box-shadow: 0 6px 18px rgba(244,63,94,0.03); background: rgba(244,63,94,0.01); }\n  .correct-answer{color: #10b981; font-size:12px; font-weight:700}\n  .wrong-answer{color: #ef4444; font-size:12px; font-weight:700}\n  \n  @media (max-width:880px){ .g-layout{grid-template-columns:1fr;} .g-slot{min-width:160px;} .g-card{flex-basis:100%;} .flash-wrap{max-width:100%} }\n  \n  .mif-inline-box { margin-top: 15px; padding: 12px; background: #eef2ff; border: 1px dashed #a5b4fc; border-radius: 8px; }\n  .mif-inline-btn { display: flex; align-items: flex-start; gap: 8px; background: #fff; border: 1px solid #cbd5e1; padding: 8px 12px; border-radius: 6px; font-size: 13px; cursor: pointer; transition: 0.2s; color: #475569; line-height: 1.4; }\n  .mif-inline-btn:hover { border-color: #6366f1; background: #fafafa; }\n  .mif-inline-btn.selected { background: #6366f1; color: #fff; border-color: #6366f1; box-shadow: 0 2px 4px rgba(99,102,241,0.3); }\n  .mif-inline-btn.selected .q-num-s { color: #fff; }\n  .mif-inline-btn.hidden-by-other { display: none !important; }\n\n</style></head>\n<body>\n<div id=\"hl-btn\" onmousedown=\"applyHighlight(event)\">Highlight</div>\n\n<div class=\"top-bar\">\n    <div style=\"display:flex;align-items:center;gap:15px;\">\n        <div class=\"timer\" id=\"timer\">--:--</div>\n        <button class=\"game-btn\" onclick=\"toggleGame()\">üéÆ Play Vocab Game</button>\n    </div>\n    <div class=\"progress-container\" id=\"progressBar\"></div>\n    <button class=\"check-btn\" onclick=\"check()\">SUBMIT</button>\n</div>\n\n<!-- READING VIEW -->\n<div id=\"reading-view\" class=\"container\">\n  <div class=\"pane left\" id=\"lp\"><h2 style=\"font-size:18px; font-weight:700; color:#334155; margin-bottom:15px\">Reading Passage</h2><div class=\"reading-content\"><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph A</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p0s0\">The story of tea begins in China. </span><span class=\"sent\" data-target=\"p0s1\">According to legend, in 2737 BC, the Chinese <span class=\"vocab\" data-vid=\"v0\">emperor</span> Shen Nung was sitting beneath a tree while his <span class=\"vocab\" data-vid=\"v3\">servant</span> boiled drinking water, when some leaves from the tree blew into the water. </span><span class=\"sent\" data-target=\"p0s2\">Shen Nung, a <span class=\"vocab\" data-vid=\"v2\">renowned</span> <span class=\"vocab\" data-vid=\"v1\">herbalist</span>, decided to try the <span class=\"vocab\" data-vid=\"v4\">infusion</span> that his <span class=\"vocab\" data-vid=\"v3\">servant</span> had accidentally created. </span><span class=\"sent\" data-target=\"p0s3\">The tree was a Camellia sinensis, and the resulting drink was what we now call tea. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t0')\">Show Translation</button><div id=\"t0\" class=\"vi-text hidden\"><span id=\"p0s0\" class=\"vi-sent\">C√¢u chuy·ªán v·ªÅ tr√† b·∫Øt ƒë·∫ßu ·ªü Trung Qu·ªëc. </span><span id=\"p0s1\" class=\"vi-sent\">Theo truy·ªÅn thuy·∫øt, v√†o nƒÉm 2737 tr∆∞·ªõc C√¥ng nguy√™n, ho√†ng ƒë·∫ø Trung Qu·ªëc Shen Nung ƒëang ng·ªìi d∆∞·ªõi g·ªëc c√¢y trong khi ng∆∞·ªùi h·∫ßu c·ªßa √¥ng ƒëun n∆∞·ªõc u·ªëng th√¨ m·ªôt s·ªë l√° c√¢y bay xu·ªëng n∆∞·ªõc. </span><span id=\"p0s2\" class=\"vi-sent\">Th·∫ßn Nung, m·ªôt nh√† th·∫£o d∆∞·ª£c n·ªïi ti·∫øng, ƒë√£ quy·∫øt ƒë·ªãnh th·ª≠ lo·∫°i thu·ªëc m√† ng∆∞·ªùi h·∫ßu c·ªßa √¥ng ƒë√£ v√¥ t√¨nh t·∫°o ra. </span><span id=\"p0s3\" class=\"vi-sent\">C√¢y ƒë√≥ l√† Camellia sinensis v√† th·ª©c u·ªëng t·∫°o ra l√† th·ª© m√† ng√†y nay ch√∫ng ta g·ªçi l√† tr√†. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph B</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p1s0\">It is impossible to know whether there is any truth in this story. </span><span class=\"sent\" data-target=\"p1s1\">But tea drinking certainly <span class=\"vocab\" data-vid=\"v5\">became established</span> in China many centuries before it had even been heard of in the West. </span><span class=\"sent\" data-target=\"p1s2\">Containers for tea have been found in tombs dating from the Han Dynasty (206 BC-220 AD) but it was under the Tang Dynasty (618-906 AD), that tea became firmly established as the national drink of China. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t1')\">Show Translation</button><div id=\"t1\" class=\"vi-text hidden\"><span id=\"p1s0\" class=\"vi-sent\">Kh√¥ng th·ªÉ bi·∫øt ƒë∆∞·ª£c li·ªáu c√≥ s·ª± th·∫≠t n√†o trong c√¢u chuy·ªán n√†y hay kh√¥ng. </span><span id=\"p1s1\" class=\"vi-sent\">Nh∆∞ng vi·ªác u·ªëng tr√† ch·∫Øc ch·∫Øn ƒë√£ ƒë∆∞·ª£c h√¨nh th√†nh ·ªü Trung Qu·ªëc t·ª´ nhi·ªÅu th·∫ø k·ª∑ tr∆∞·ªõc khi n√≥ ƒë∆∞·ª£c bi·∫øt ƒë·∫øn ·ªü ph∆∞∆°ng T√¢y. </span><span id=\"p1s2\" class=\"vi-sent\">C√°c th√πng ƒë·ª±ng tr√† ƒë√£ ƒë∆∞·ª£c t√¨m th·∫•y trong c√°c ng√¥i m·ªô c√≥ ni√™n ƒë·∫°i t·ª´ th·ªùi nh√† H√°n (206 TCN-220 SCN) nh∆∞ng ph·∫£i ƒë·∫øn th·ªùi nh√† ƒê∆∞·ªùng (618-906 SCN), tr√† m·ªõi tr·ªü th√†nh th·ª©c u·ªëng qu·ªëc gia c·ªßa Trung Qu·ªëc. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph C</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p2s0\">It became such a favourite that during the late eighth century a writer called Lu Yu wrote the first book entirely about tea, the Ch‚Äôa Ching, or Tea Classic. </span><span class=\"sent\" data-target=\"p2s1\">It was shordy after this that tea was first introduced to Japan, by Japanese Buddhist monks who had travelled to China to study. </span><span class=\"sent\" data-target=\"p2s2\">Tea received almost instant <span class=\"vocab\" data-vid=\"v6\">imperial sponsorship</span> and spread rapidly from the royal court and monasteries to the other sections of Japanese society. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t2')\">Show Translation</button><div id=\"t2\" class=\"vi-text hidden\"><span id=\"p2s0\" class=\"vi-sent\">N√≥ tr·ªü n√™n ƒë∆∞·ª£c y√™u th√≠ch ƒë·∫øn m·ª©c v√†o cu·ªëi th·∫ø k·ª∑ th·ª© 8, m·ªôt nh√† vƒÉn t√™n l√† Lu Yu ƒë√£ vi·∫øt cu·ªën s√°ch ƒë·∫ßu ti√™n ho√†n to√†n v·ªÅ tr√†, Ch‚Äôa Ching, hay Tr√† c·ªï ƒëi·ªÉn. </span><span id=\"p2s1\" class=\"vi-sent\">Sau ƒë√≥, tr√† l·∫ßn ƒë·∫ßu ti√™n ƒë∆∞·ª£c gi·ªõi thi·ªáu ƒë·∫øn Nh·∫≠t B·∫£n b·ªüi c√°c tu sƒ© Ph·∫≠t gi√°o Nh·∫≠t B·∫£n ƒë√£ ƒë·∫øn Trung Qu·ªëc ƒë·ªÉ h·ªçc t·∫≠p. </span><span id=\"p2s2\" class=\"vi-sent\">Tr√† g·∫ßn nh∆∞ nh·∫≠n ƒë∆∞·ª£c s·ª± t√†i tr·ª£ c·ªßa ho√†ng gia ngay l·∫≠p t·ª©c v√† lan truy·ªÅn nhanh ch√≥ng t·ª´ cung ƒë√¨nh v√† c√°c tu vi·ªán ƒë·∫øn c√°c t·∫ßng l·ªõp kh√°c trong x√£ h·ªôi Nh·∫≠t B·∫£n. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph D</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p3s0\">So at this stage in the history of tea, Europe was rather <span class=\"vocab\" data-vid=\"v7\">lagging behind</span>. </span><span class=\"sent\" data-target=\"p3s1\">In the latter half of the sixteenth century there are the first brief mentions of tea as a drink among Europeans. </span><span class=\"sent\" data-target=\"p3s2\">These are mosdy from Portuguese who were living in the East as traders and <span class=\"vocab\" data-vid=\"v8\">missionaries</span>. </span><span class=\"sent\" data-target=\"p3s3\">But although some of these individuals may have brought back samples of tea to their native country, it was not the Portuguese who were the first to ship back tea as a <span class=\"vocab\" data-vid=\"v9\">commercial</span> import. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t3')\">Show Translation</button><div id=\"t3\" class=\"vi-text hidden\"><span id=\"p3s0\" class=\"vi-sent\">V√¨ v·∫≠y, ·ªü giai ƒëo·∫°n n√†y trong l·ªãch s·ª≠ tr√†, Ch√¢u √Çu kh√° t·ª•t l·∫°i ph√≠a sau. </span><span id=\"p3s1\" class=\"vi-sent\">V√†o n·ª≠a sau c·ªßa th·∫ø k·ª∑ 16, ng∆∞·ªùi ch√¢u √Çu l·∫ßn ƒë·∫ßu ti√™n nh·∫Øc ƒë·∫øn tr√† nh∆∞ m·ªôt th·ª©c u·ªëng. </span><span id=\"p3s2\" class=\"vi-sent\">ƒê√¢y l√† nh·ªØng ng∆∞·ªùi B·ªì ƒê√†o Nha ƒë·∫øn t·ª´ ph∆∞∆°ng ƒê√¥ng v·ªõi t∆∞ c√°ch l√† th∆∞∆°ng nh√¢n v√† nh√† truy·ªÅn gi√°o. </span><span id=\"p3s3\" class=\"vi-sent\">Nh∆∞ng m·∫∑c d√π m·ªôt s·ªë ng∆∞·ªùi trong s·ªë n√†y c√≥ th·ªÉ ƒë√£ mang c√°c m·∫´u tr√† v·ªÅ qu√™ h∆∞∆°ng c·ªßa h·ªç, nh∆∞ng kh√¥ng ph·∫£i ng∆∞·ªùi B·ªì ƒê√†o Nha l√† nh·ªØng ng∆∞·ªùi ƒë·∫ßu ti√™n v·∫≠n chuy·ªÉn tr√† v·ªÅ n∆∞·ªõc nh∆∞ m·ªôt m·∫∑t h√†ng nh·∫≠p kh·∫©u th∆∞∆°ng m·∫°i. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph E</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p4s0\">This was done by the Dutch, who in the last years of the sixteenth century began to encroach on Portuguese trading routes in the East. </span><span class=\"sent\" data-target=\"p4s1\">By the turn of the century they had established a trading post on the island of Java, and it was via Java that in 1606 the first <span class=\"vocab\" data-vid=\"v10\">consignment</span> of tea was shipped from China to Holland. </span><span class=\"sent\" data-target=\"p4s2\">Tea soon became a fashionable drink among the Dutch, and from there spread to other countries in continental western Europe, but because of its high price it remained a drink for the wealthy. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t4')\">Show Translation</button><div id=\"t4\" class=\"vi-text hidden\"><span id=\"p4s0\" class=\"vi-sent\">ƒêi·ªÅu n√†y ƒë∆∞·ª£c th·ª±c hi·ªán b·ªüi ng∆∞·ªùi H√† Lan, nh·ªØng ng∆∞·ªùi v√†o nh·ªØng nƒÉm cu·ªëi c·ªßa th·∫ø k·ª∑ XVI ƒë√£ b·∫Øt ƒë·∫ßu x√¢m ph·∫°m c√°c tuy·∫øn ƒë∆∞·ªùng th∆∞∆°ng m·∫°i c·ªßa B·ªì ƒê√†o Nha ·ªü ph√≠a ƒê√¥ng. </span><span id=\"p4s1\" class=\"vi-sent\">V√†o ƒë·∫ßu th·∫ø k·ª∑ n√†y, h·ªç ƒë√£ thi·∫øt l·∫≠p m·ªôt tr·∫°m bu√¥n b√°n tr√™n ƒë·∫£o Java v√† ch√≠nh qua Java v√†o nƒÉm 1606, chuy·∫øn h√†ng ch√® ƒë·∫ßu ti√™n ƒë√£ ƒë∆∞·ª£c v·∫≠n chuy·ªÉn t·ª´ Trung Qu·ªëc ƒë·∫øn H√† Lan. </span><span id=\"p4s2\" class=\"vi-sent\">Tr√† nhanh ch√≥ng tr·ªü th√†nh th·ª©c u·ªëng th·ªùi th∆∞·ª£ng c·ªßa ng∆∞·ªùi H√† Lan, v√† t·ª´ ƒë√≥ lan sang c√°c n∆∞·ªõc kh√°c ·ªü l·ª•c ƒë·ªãa T√¢y √Çu, nh∆∞ng v√¨ gi√° cao n√™n n√≥ v·∫´n l√† th·ª©c u·ªëng d√†nh cho gi·ªõi gi√†u c√≥. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph F</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p5s0\">Britain, always a little suspicious of continental trends, had yet to become the nation of tea drinkers that it is today. </span><span class=\"sent\" data-target=\"p5s1\">Starting in 1600, the British East India Company had a <span class=\"vocab\" data-vid=\"v11\">monopoly</span> on importing goods from outside Europe, and it is likely that sailors on these ships brought tea home as gifts. </span><span class=\"sent\" data-target=\"p5s2\">The first coffee house had been established in London in 1652, and tea was still somewhat unfamiliar to most readers, so it is fair to assume that the drink was still something of a <span class=\"vocab\" data-vid=\"v12\">curiosity</span>. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t5')\">Show Translation</button><div id=\"t5\" class=\"vi-text hidden\"><span id=\"p5s0\" class=\"vi-sent\">N∆∞·ªõc Anh, lu√¥n c√≥ ch√∫t nghi ng·ªù v·ªÅ xu h∆∞·ªõng l·ª•c ƒë·ªãa, v·∫´n ch∆∞a tr·ªü th√†nh qu·ªëc gia u·ªëng tr√† nh∆∞ ng√†y nay. </span><span id=\"p5s1\" class=\"vi-sent\">B·∫Øt ƒë·∫ßu t·ª´ nƒÉm 1600, C√¥ng ty ƒê√¥ng ·∫§n Anh ƒë·ªôc quy·ªÅn nh·∫≠p kh·∫©u h√†ng h√≥a t·ª´ b√™n ngo√†i ch√¢u √Çu v√† r·∫•t c√≥ th·ªÉ c√°c th·ªßy th·ªß tr√™n nh·ªØng con t√†u n√†y ƒë√£ mang tr√† v·ªÅ nh√† l√†m qu√†. </span><span id=\"p5s2\" class=\"vi-sent\">Qu√°n c√† ph√™ ƒë·∫ßu ti√™n ƒë∆∞·ª£c th√†nh l·∫≠p ·ªü London v√†o nƒÉm 1652 v√† tr√† v·∫´n c√≤n xa l·∫° v·ªõi h·∫ßu h·∫øt ƒë·ªôc gi·∫£, v√¨ v·∫≠y c√¥ng b·∫±ng m√† n√≥i th√¨ lo·∫°i ƒë·ªì u·ªëng n√†y v·∫´n c√≤n l√† m·ªôt th·ª© g√¢y t√≤ m√≤. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph G</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p6s0\">Gradually, it became a popular drink in coffee houses, which were as much locations for the <span class=\"vocab\" data-vid=\"v13\">transaction</span> of business as they were for relaxation or pleasure. </span><span class=\"sent\" data-target=\"p6s1\">They were though the <span class=\"vocab\" data-vid=\"v14\">preserve</span> of middle- and upperclass men; women drank tea in their own homes, and as yet tea was still too expensive to be widespread among the working classes. </span><span class=\"sent\" data-target=\"p6s2\">In part, its high price was due to a <span class=\"vocab\" data-vid=\"v15\">punitive</span> system of taxation. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t6')\">Show Translation</button><div id=\"t6\" class=\"vi-text hidden\"><span id=\"p6s0\" class=\"vi-sent\">D·∫ßn d·∫ßn, n√≥ tr·ªü th√†nh m·ªôt th·ª©c u·ªëng ph·ªï bi·∫øn trong c√°c qu√°n c√† ph√™, n∆°i v·ª´a l√† ƒë·ªãa ƒëi·ªÉm ƒë·ªÉ giao d·ªãch kinh doanh v·ª´a l√† n∆°i ƒë·ªÉ th∆∞ gi√£n ho·∫∑c gi·∫£i tr√≠. </span><span id=\"p6s1\" class=\"vi-sent\">M·∫∑c d√π v·∫≠y, h·ªç ch·ªâ d√†nh cho nh·ªØng ng∆∞·ªùi ƒë√†n √¥ng trung l∆∞u v√† th∆∞·ª£ng l∆∞u; ph·ª• n·ªØ u·ªëng tr√† t·∫°i nh√† ri√™ng c·ªßa h·ªç, v√† tr√† v·∫´n c√≤n qu√° ƒë·∫Øt ƒë·ªÉ ƒë∆∞·ª£c ph·ªï bi·∫øn r·ªông r√£i trong t·∫ßng l·ªõp lao ƒë·ªông. </span><span id=\"p6s2\" class=\"vi-sent\">M·ªôt ph·∫ßn, gi√° cao c·ªßa n√≥ l√† do h·ªá th·ªëng thu·∫ø tr·ª´ng ph·∫°t. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph H</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p7s0\">One unforeseen consequence of the taxation of tea was the growth of methods to avoid taxation‚Äîsmuggling and <span class=\"vocab\" data-vid=\"v16\">adulteration</span>. </span><span class=\"sent\" data-target=\"p7s1\">By the eighteenth century many Britons wanted to drink tea but could not afford the high prices, and their enthusiasm for the drink was matched by the enthusiasm of criminal gangs to smuggle it in. </span><span class=\"sent\" data-target=\"p7s2\">What began as a small time illegal trade, selling a few pounds of tea to personal contacts, developed by die late eighteenth century into an <span class=\"vocab\" data-vid=\"v17\">astonishing</span> organised crime network, perhaps importing as much as 7 million lbs annually, compared to a legal import of 5 million lbs! </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t7')\">Show Translation</button><div id=\"t7\" class=\"vi-text hidden\"><span id=\"p7s0\" class=\"vi-sent\">M·ªôt h·∫≠u qu·∫£ kh√¥ng l∆∞·ªùng tr∆∞·ªõc ƒë∆∞·ª£c c·ªßa vi·ªác ƒë√°nh thu·∫ø ch√® l√† s·ª± ph√°t tri·ªÉn c·ªßa c√°c ph∆∞∆°ng ph√°p tr·ªën thu·∫ø - bu√¥n l·∫≠u v√† pha tr·ªôn. </span><span id=\"p7s1\" class=\"vi-sent\">V√†o th·∫ø k·ª∑ 18, nhi·ªÅu ng∆∞·ªùi Anh mu·ªën u·ªëng tr√† nh∆∞ng kh√¥ng ƒë·ªß kh·∫£ nƒÉng chi tr·∫£ v·ªõi gi√° cao, v√† s·ª± nhi·ªát t√¨nh c·ªßa h·ªç ƒë·ªëi v·ªõi lo·∫°i ƒë·ªì u·ªëng n√†y c≈©ng t∆∞∆°ng x·ª©ng v·ªõi s·ª± nhi·ªát t√¨nh c·ªßa c√°c bƒÉng nh√≥m t·ªôi ph·∫°m bu√¥n l·∫≠u tr√† v√†o. </span><span id=\"p7s2\" class=\"vi-sent\">B·∫Øt ƒë·∫ßu ch·ªâ l√† m·ªôt ho·∫°t ƒë·ªông bu√¥n b√°n b·∫•t h·ª£p ph√°p trong th·ªùi gian ng·∫Øn, b√°n v√†i pound tr√† cho nh·ªØng ng∆∞·ªùi li√™n h·ªá c√° nh√¢n, ƒë·∫øn cu·ªëi th·∫ø k·ª∑ 18 ƒë√£ ph√°t tri·ªÉn th√†nh m·ªôt m·∫°ng l∆∞·ªõi t·ªôi ph·∫°m c√≥ t·ªï ch·ª©c ƒë√°ng kinh ng·∫°c, c√≥ l·∫Ω nh·∫≠p kh·∫©u t·ªõi 7 tri·ªáu pound m·ªói nƒÉm, so v·ªõi m·ª©c nh·∫≠p kh·∫©u h·ª£p ph√°p l√† 5 tri·ªáu pound! </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph I</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p8s0\">Worse for die drinkers was that taxation also encouraged the <span class=\"vocab\" data-vid=\"v16\">adulteration</span> of tea, particularly of smuggled tea which was not quality controlled through customs and excise. </span><span class=\"sent\" data-target=\"p8s1\">Leaves from other plants, or leaves which had already been brewed and then dried, were added to tea leaves. </span><span class=\"sent\" data-target=\"p8s2\">By 1784, the government realised that enough was enough, and that heavy taxation was creating more problems than it was wordi. </span><span class=\"sent\" data-target=\"p8s3\">The new Prime Minister, William Pitt the Younger, slashed the tax from 119 per cent to 12.5 per cent. </span><span class=\"sent\" data-target=\"p8s4\">Suddenly legal tea was affordable, and smuggling stopped virtually overnight. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t8')\">Show Translation</button><div id=\"t8\" class=\"vi-text hidden\"><span id=\"p8s0\" class=\"vi-sent\">ƒêi·ªÅu t·ªìi t·ªá h∆°n ƒë·ªëi v·ªõi nh·ªØng ng∆∞·ªùi u·ªëng r∆∞·ª£u l√† vi·ªác ƒë√°nh thu·∫ø c≈©ng khuy·∫øn kh√≠ch vi·ªác pha tr·ªôn tr√†, ƒë·∫∑c bi·ªát l√† tr√† nh·∫≠p l·∫≠u kh√¥ng ƒë∆∞·ª£c ki·ªÉm so√°t ch·∫•t l∆∞·ª£ng th√¥ng qua h·∫£i quan v√† thu·∫ø ti√™u th·ª• ƒë·∫∑c bi·ªát. </span><span id=\"p8s1\" class=\"vi-sent\">L√° c·ªßa c√°c c√¢y kh√°c, ho·∫∑c l√° ƒë√£ ƒë∆∞·ª£c ·ªß r·ªìi s·∫•y kh√¥, ƒë∆∞·ª£c th√™m v√†o l√° tr√†. </span><span id=\"p8s2\" class=\"vi-sent\">ƒê·∫øn nƒÉm 1784, ch√≠nh ph·ªß nh·∫≠n ra r·∫±ng th·∫ø l√† ƒë·ªß v√† vi·ªác ƒë√°nh thu·∫ø n·∫∑ng n·ªÅ ƒëang t·∫°o ra nhi·ªÅu v·∫•n ƒë·ªÅ h∆°n l√† l·ªùi n√≥i. </span><span id=\"p8s3\" class=\"vi-sent\">Th·ªß t∆∞·ªõng m·ªõi, William Pitt the Younger, ƒë√£ c·∫Øt gi·∫£m thu·∫ø t·ª´ 119% xu·ªëng c√≤n 12,5%. </span><span id=\"p8s4\" class=\"vi-sent\">ƒê·ªôt nhi√™n tr√† h·ª£p ph√°p c√≥ gi√° c·∫£ ph·∫£i chƒÉng v√† vi·ªác bu√¥n l·∫≠u g·∫ßn nh∆∞ ch·∫•m d·ª©t ch·ªâ sau m·ªôt ƒë√™m. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph J</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p9s0\">Another great impetus to tea drinking resulted from the end of the East India Company‚Äôs <span class=\"vocab\" data-vid=\"v11\">monopoly</span> on trade with China, in 1834. </span><span class=\"sent\" data-target=\"p9s1\">Before that date, China was the country of origin of the vast majority of the tea imported to Britain, but the end of its <span class=\"vocab\" data-vid=\"v11\">monopoly</span> stimulated the East India Company to consider growing tea outside China. </span><span class=\"sent\" data-target=\"p9s2\">India had always been the centre of the Company‚Äôs operations, which led to the increased <span class=\"vocab\" data-vid=\"v18\">cultivation</span> of tea in India, beginning in Assam. </span><span class=\"sent\" data-target=\"p9s3\">There were a few false starts, including the <span class=\"vocab\" data-vid=\"v19\">destruction</span> by cattle of one of the earliest tea nurseries, but by 1888 British tea imports from India were for the first time greater than those from China. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t9')\">Show Translation</button><div id=\"t9\" class=\"vi-text hidden\"><span id=\"p9s0\" class=\"vi-sent\">M·ªôt ƒë·ªông l·ª±c l·ªõn kh√°c cho vi·ªác u·ªëng tr√† l√† do s·ª± ƒë·ªôc quy·ªÅn th∆∞∆°ng m·∫°i c·ªßa C√¥ng ty ƒê√¥ng ·∫§n v·ªõi Trung Qu·ªëc ch·∫•m d·ª©t v√†o nƒÉm 1834. </span><span id=\"p9s1\" class=\"vi-sent\">Tr∆∞·ªõc th·ªùi ƒëi·ªÉm ƒë√≥, Trung Qu·ªëc l√† qu·ªëc gia xu·∫•t x·ª© c·ªßa ph·∫ßn l·ªõn ch√® ƒë∆∞·ª£c nh·∫≠p kh·∫©u v√†o Anh, nh∆∞ng vi·ªác ch·∫•m d·ª©t ƒë·ªôc quy·ªÅn ƒë√£ k√≠ch th√≠ch C√¥ng ty ƒê√¥ng ·∫§n xem x√©t vi·ªác tr·ªìng ch√® b√™n ngo√†i Trung Qu·ªëc. </span><span id=\"p9s2\" class=\"vi-sent\">·∫§n ƒê·ªô lu√¥n l√† trung t√¢m ho·∫°t ƒë·ªông c·ªßa C√¥ng ty, d·∫´n ƒë·∫øn vi·ªác tr·ªìng ch√® ·ªü ·∫§n ƒê·ªô ng√†y c√†ng tƒÉng, b·∫Øt ƒë·∫ßu t·ª´ Assam. </span><span id=\"p9s3\" class=\"vi-sent\">C√≥ m·ªôt v√†i kh·ªüi ƒë·∫ßu sai l·∫ßm, bao g·ªìm c·∫£ vi·ªác gia s√∫c ph√° h·ªßy m·ªôt trong nh·ªØng v∆∞·ªùn ∆∞∆°m ch√® s·ªõm nh·∫•t, nh∆∞ng ƒë·∫øn nƒÉm 1888, l∆∞·ª£ng nh·∫≠p kh·∫©u ch√® c·ªßa Anh t·ª´ ·∫§n ƒê·ªô l·∫ßn ƒë·∫ßu ti√™n l·ªõn h∆°n nh·∫≠p kh·∫©u t·ª´ Trung Qu·ªëc. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph K</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p10s0\">The end of the East India Company‚Äôs <span class=\"vocab\" data-vid=\"v11\">monopoly</span> on trade with China also had another result, which was more dramatic though less important in the long term: it <span class=\"vocab\" data-vid=\"v20\">ushered</span> in the era of the tea clippers. </span><span class=\"sent\" data-target=\"p10s1\">While the Company had had the <span class=\"vocab\" data-vid=\"v11\">monopoly</span> on trade, there was no rush to bring the tea from China to Britain, but after 1834 the tea trade became a <span class=\"vocab\" data-vid=\"v21\">virtual</span> free for all. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t10')\">Show Translation</button><div id=\"t10\" class=\"vi-text hidden\"><span id=\"p10s0\" class=\"vi-sent\">S·ª± ch·∫•m d·ª©t t√¨nh tr·∫°ng ƒë·ªôc quy·ªÅn th∆∞∆°ng m·∫°i v·ªõi Trung Qu·ªëc c·ªßa C√¥ng ty ƒê√¥ng ·∫§n c≈©ng d·∫´n ƒë·∫øn m·ªôt k·∫øt qu·∫£ kh√°c, ·∫•n t∆∞·ª£ng h∆°n nh∆∞ng √≠t quan tr·ªçng h∆°n v·ªÅ l√¢u d√†i: n√≥ m·ªü ra k·ª∑ nguy√™n c·ªßa m√°y c·∫Øt ch√®. </span><span id=\"p10s1\" class=\"vi-sent\">M·∫∑c d√π C√¥ng ty ƒë·ªôc quy·ªÅn v·ªÅ th∆∞∆°ng m·∫°i nh∆∞ng kh√¥ng c√≥ chuy·ªán v·ªôi v√†ng ƒë∆∞a tr√† t·ª´ Trung Qu·ªëc sang Anh, nh∆∞ng sau nƒÉm 1834, vi·ªác bu√¥n b√°n tr√† h·∫ßu nh∆∞ tr·ªü n√™n mi·ªÖn ph√≠ cho t·∫•t c·∫£ m·ªçi ng∆∞·ªùi. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph L</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p11s0\">Individual merchants and sea captains with their own ships raced to bring home the tea and make the most money, using fast new clippers which had sleek lines, tall masts and huge sails. </span><span class=\"sent\" data-target=\"p11s1\">In particular there was competition between British and American merchants, leading to the famous clipper races of the 1860s. </span><span class=\"sent\" data-target=\"p11s2\">But these races soon came to an end with the opening of the Suez canal, which made the trade routes to China viable for <span class=\"vocab\" data-vid=\"v23\">steamships</span> for the first time. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t11')\">Show Translation</button><div id=\"t11\" class=\"vi-text hidden\"><span id=\"p11s0\" class=\"vi-sent\">C√°c th∆∞∆°ng gia c√° nh√¢n v√† thuy·ªÅn tr∆∞·ªüng v·ªõi nh·ªØng con t√†u ri√™ng c·ªßa h·ªç ƒëua nhau mang tr√† v·ªÅ nh√† v√† ki·∫øm ƒë∆∞·ª£c nhi·ªÅu ti·ªÅn nh·∫•t b·∫±ng c√°ch s·ª≠ d·ª•ng nh·ªØng chi·∫øc t√¥ng ƒë∆° m·ªõi nhanh c√≥ ƒë∆∞·ªùng n√©t ƒë·∫πp, c·ªôt bu·ªìm cao v√† nh·ªØng c√°nh bu·ªìm kh·ªïng l·ªì. </span><span id=\"p11s1\" class=\"vi-sent\">ƒê·∫∑c bi·ªát l√† s·ª± c·∫°nh tranh gi·ªØa c√°c th∆∞∆°ng gia Anh v√† M·ªπ, d·∫´n ƒë·∫øn c√°c cu·ªôc ƒëua xe k√©o n·ªïi ti·∫øng nh·ªØng nƒÉm 1860. </span><span id=\"p11s2\" class=\"vi-sent\">Nh∆∞ng nh·ªØng cu·ªôc ƒëua n√†y nhanh ch√≥ng k·∫øt th√∫c v·ªõi vi·ªác m·ªü k√™nh ƒë√†o Suez, khi·∫øn c√°c tuy·∫øn ƒë∆∞·ªùng th∆∞∆°ng m·∫°i ƒë·∫øn Trung Qu·ªëc l·∫ßn ƒë·∫ßu ti√™n tr·ªü n√™n kh·∫£ thi ƒë·ªëi v·ªõi t√†u h∆°i n∆∞·ªõc. </span></div></div></div></div>\n  <div class=\"resizer\" id=\"rs\"></div>\n  <div class=\"pane right\"><h2 style=\"font-size:18px; font-weight:700; color:#334155; margin-bottom:15px\">Questions</h2><div id=\"headingsArea\"></div><div id=\"qs\"></div></div>\n</div>\n\n<!-- GAME VIEW (Hidden by default) -->\n<div id=\"game-view\">\n  <div class=\"g-container\">\n    <header class=\"g-header\">\n      <h1 class=\"g-h1\">Vocabulary Matching Game</h1>\n      <div class=\"g-controls\">\n        <div class=\"g-badge\" id=\"score\">ƒê√∫ng: 0 / 0</div>\n        <button class=\"g-btn\" id=\"shuffleBtn\">Tr·ªôn</button>\n        <button class=\"g-btn\" id=\"resetBtn\">L√†m l·∫°i</button>\n        <button class=\"g-btn\" style=\"background:linear-gradient(90deg,#ef4444,#dc2626);color:#fff\" onclick=\"toggleGame()\">Close Game</button>\n      </div>\n    </header>\n\n    <section class=\"g-card\" style=\"margin-bottom:12px;\">\n      <h3 style=\"margin-top:0; color:var(--accent)\">Flashcards √în T·∫≠p</h3>\n      <div style=\"display:flex; gap:12px; align-items:center; flex-wrap:wrap;\">\n        <div class=\"flash-wrap\">\n          <div id=\"flashcard\" class=\"flashcard\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\">\n            <div class=\"flash-face front\" id=\"flashFront\">Nh·∫•n Next ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>\n            <div class=\"flash-face back\" id=\"flashBack\">Back</div>\n          </div>\n        </div>\n        <div style=\"display:flex; flex-direction:column; gap:8px;\">\n          <div style=\"display:flex; gap:8px;\">\n            <button class=\"g-btn\" id=\"prevCard\">Prev</button>\n            <button class=\"g-btn\" id=\"flipCard\">Flip</button>\n            <button class=\"g-btn\" id=\"nextCard\">Next</button>\n          </div>\n          <div style=\"display:flex; gap:8px;\">\n            <button class=\"g-btn\" id=\"autoPlay\">Auto</button>\n            <button class=\"g-btn\" id=\"showBoth\">Show Both</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"small\" style=\"margin-top:8px; color:var(--muted); font-size:13px\">Nh·∫•n flashcard ƒë·ªÉ l·∫≠t. Auto s·∫Ω t·ª± chuy·ªÉn sau 2s. Show Both hi·ªÉn th·ªã c·∫£ 2 m·∫∑t t·∫°m th·ªùi.</div>\n    </section>\n\n    <section class=\"g-layout\">\n      <div class=\"g-card\">\n        <h3 style=\"margin-top:0; color:var(--accent)\">Ph·∫ßn 1 Matching</h3>\n        <div class=\"small\" style=\"color:var(--muted); font-size:13px\">K√©o nghƒ©a v√†o √¥ t∆∞∆°ng ·ª©ng. Ho·∫∑c ch·∫°m ƒë·ªÉ ch·ªçn r·ªìi ch·∫°m v√†o √¥.</div>\n        <div class=\"g-list\" id=\"engList\" style=\"margin-top:12px;\"></div>\n      </div>\n      <div class=\"g-card\">\n        <h3 style=\"margin-top:0; color:var(--accent)\">Ph·∫ßn 2 Vietnamese</h3>\n        <div class=\"g-vie-list\" id=\"vieList\" style=\"margin-top:12px;\"></div>\n      </div>\n    </section>\n\n    <section class=\"g-card\" style=\"margin-top:12px; margin-bottom: 50px;\">\n      <h3 style=\"margin-top:0; color:var(--accent)\">B√†i ƒêi·ªÅn Ch·ªØ</h3>\n      <div class=\"small\" style=\"color:var(--muted); font-size:13px\">B√™n tr√°i l√† ti·∫øng Vi·ªát, b√™n ph·∫£i h·ªçc sinh ƒëi·ªÅn ti·∫øng Anh. Nh·∫•n Ki·ªÉm tra ƒë·ªÉ ch·∫•m.</div>\n      <div style=\"margin-top:10px;\">\n        <div class=\"fill-list\" id=\"fillList\"></div>\n        <div style=\"margin-top:10px; display:flex; gap:8px; align-items:center;\">\n          <button class=\"g-btn\" id=\"checkFill\">Ki·ªÉm tra</button>\n          <button class=\"g-btn\" id=\"showAnswers\">Hi·ªán ƒë√°p √°n</button>\n          <button class=\"g-btn\" id=\"resetFill\">L√†m l·∫°i</button>\n          <div class=\"small\" id=\"fillScore\" style=\"align-self:center; color:var(--muted); font-size:13px\">ƒêi·ªÉm: 0 / 0</div>\n        </div>\n      </div>\n    </section>\n  </div>\n</div>\n\n<div id=\"popup\"></div>\n<div class=\"confetti\" id=\"confetti\"></div>\n\n<script>\nconst qs=[{\"type\":\"gap-fill-block\",\"id\":1,\"text\":\"Choose <b>ONE WORD</b> for each answer.\\nWrite your answers in boxes 1-7 on your answer sheet.\\nResearchers believed the tea containers detected in 1. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. from the Han Dynasty was the first evidence of the use of tea.\\nLu Yu wrote a 2. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..about tea before anyone else in the eighth century.\\nIt was 3. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..from Japan who brought tea to their native country from China.\\nTea was carried from China to Europe actually by the 4. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶\\nThe British government had to cut down the taxation on tea due to the serious crime of 5. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶\\nTea was planted in 6. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..besides China in the 19th century.\\nIn order to compete in shipping speed, traders used 7. ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..for the race.\",\"gapIds\":[1,2,3,4,5,6,7],\"answers\":{\"1\":\"tombs\",\"2\":\"book\",\"3\":\"monks\",\"4\":\"Dutch\",\"5\":\"smuggling\",\"6\":\"India\",\"7\":\"clippers\"},\"locations\":{\"1\":\"Containers for tea have been found\",\"2\":\"During the late eighth century\",\"3\":\"after this that tea\",\"4\":\"This was done by the Dutch\",\"5\":\"One unforeseen consequence of the taxation\",\"6\":\"which led to the increased cultivation of tea in India\",\"7\":\"Individual merchants and sea captains with their own ships\"},\"_orderId\":1},{\"id\":8,\"type\":\"tfng\",\"text\":\"Tea was popular in Britain in the 16th century.\",\"options\":[],\"correctAnswer\":\"FALSE\",\"location\":\"always a little suspicious of continental trends\",\"_orderId\":8},{\"id\":9,\"type\":\"tfng\",\"text\":\"Tea was more fashionable than coffee in Europe in the late 16th century.\",\"options\":[],\"correctAnswer\":\"NOT GIVEN\",\"location\":\"\",\"_orderId\":9},{\"id\":10,\"type\":\"tfng\",\"text\":\"Tea was enjoyed by all classes in Britain in the seventeenth century.\",\"options\":[],\"correctAnswer\":\"FALSE\",\"location\":\"They were though the preserve of middle\",\"_orderId\":10},{\"id\":11,\"type\":\"tfng\",\"text\":\"The adulteration of tea also prompted William Pitt the Younger to reduce the tax.\",\"options\":[],\"correctAnswer\":\"TRUE\",\"location\":\"and that heavy taxation was creating more problems than it was worth\",\"_orderId\":11},{\"id\":12,\"type\":\"tfng\",\"text\":\"Initial problems occurred when tea was planted outside China by the East India Company.\",\"options\":[],\"correctAnswer\":\"TRUE\",\"location\":\"There were a few false starts\",\"_orderId\":12},{\"id\":13,\"type\":\"tfng\",\"text\":\"The fastest vessels were owned by America during the 19th century clipper races.\",\"options\":[],\"correctAnswer\":\"NOT GIVEN\",\"location\":\"\",\"_orderId\":13}];\nconst vocab=[{\"id\":\"v0\",\"word\":\"emperor\",\"meaning\":\"ho√†ng ƒë·∫ø (king, ruler)\",\"synonym\":\"The emperor ruled the ancient empire. (Ho√†ng ƒë·∫ø cai tr·ªã ƒë·∫ø ch·∫ø c·ªï.)\",\"example\":\"\"},{\"id\":\"v1\",\"word\":\"herbalist\",\"meaning\":\"th·∫ßy thu·ªëc ƒë√¥ng y, ng∆∞·ªùi d√πng th·∫£o d∆∞·ª£c (healer, botanist)\",\"synonym\":\"The herbalist prepared natural remedies. (Th·∫ßy thu·ªëc ƒë√¥ng y chu·∫©n b·ªã ph∆∞∆°ng thu·ªëc t·ª± nhi√™n.)\",\"example\":\"\"},{\"id\":\"v2\",\"word\":\"renowned\",\"meaning\":\"n·ªïi ti·∫øng, l·ª´ng danh (famous, celebrated)\",\"synonym\":\"She is a renowned scientist. (C√¥ ·∫•y l√† m·ªôt nh√† khoa h·ªçc n·ªïi ti·∫øng.)\",\"example\":\"\"},{\"id\":\"v3\",\"word\":\"servant\",\"meaning\":\"ng∆∞·ªùi h·∫ßu (attendant, helper)\",\"synonym\":\"The servant opened the door. (Ng∆∞·ªùi h·∫ßu m·ªü c·ª≠a.)\",\"example\":\"\"},{\"id\":\"v4\",\"word\":\"infusion\",\"meaning\":\"s·ª± pha, ng√¢m (brew, mixture)\",\"synonym\":\"Herbal infusion is good for health. (N∆∞·ªõc th·∫£o m·ªôc pha t·ªët cho s·ª©c kh·ªèe.)\",\"example\":\"\"},{\"id\":\"v5\",\"word\":\"became established\",\"meaning\":\"ƒë∆∞·ª£c th√†nh l·∫≠p, tr·ªü n√™n ·ªïn ƒë·ªãnh (founded, recognized)\",\"synonym\":\"The tradition became established centuries ago. (Truy·ªÅn th·ªëng ƒë∆∞·ª£c h√¨nh th√†nh t·ª´ nhi·ªÅu th·∫ø k·ª∑ tr∆∞·ªõc.)\",\"example\":\"\"},{\"id\":\"v6\",\"word\":\"imperial sponsorship\",\"meaning\":\"s·ª± b·∫£o tr·ª£ c·ªßa ho√†ng gia (royal support)\",\"synonym\":\"The temple was built under imperial sponsorship. (Ng√¥i ƒë·ªÅn ƒë∆∞·ª£c x√¢y d·ª±ng d∆∞·ªõi s·ª± b·∫£o tr·ª£ ho√†ng gia.)\",\"example\":\"\"},{\"id\":\"v7\",\"word\":\"lagging behind\",\"meaning\":\"t·ª•t l·∫°i ph√≠a sau (falling behind)\",\"synonym\":\"The company is lagging behind its competitors. (C√¥ng ty ƒëang t·ª•t l·∫°i ph√≠a sau ƒë·ªëi th·ªß.)\",\"example\":\"\"},{\"id\":\"v8\",\"word\":\"missionaries\",\"meaning\":\"nh√† truy·ªÅn gi√°o (preachers, evangelists)\",\"synonym\":\"Missionaries spread religion across continents. (C√°c nh√† truy·ªÅn gi√°o truy·ªÅn ƒë·∫°o kh·∫Øp ch√¢u l·ª•c.)\",\"example\":\"\"},{\"id\":\"v9\",\"word\":\"commercial\",\"meaning\":\"th∆∞∆°ng m·∫°i (business-related)\",\"synonym\":\"The product has great commercial value. (S·∫£n ph·∫©m c√≥ gi√° tr·ªã th∆∞∆°ng m·∫°i l·ªõn.)\",\"example\":\"\"},{\"id\":\"v10\",\"word\":\"consignment\",\"meaning\":\"l√¥ h√†ng, s·ª± g·ª≠i h√†ng (shipment, delivery)\",\"synonym\":\"The shop received a consignment of clothes. (C·ª≠a h√†ng nh·∫≠n m·ªôt l√¥ h√†ng qu·∫ßn √°o.)\",\"example\":\"\"},{\"id\":\"v11\",\"word\":\"monopoly\",\"meaning\":\"s·ª± ƒë·ªôc quy·ªÅn (exclusive control)\",\"synonym\":\"The company had a monopoly on trade. (C√¥ng ty c√≥ ƒë·ªôc quy·ªÅn th∆∞∆°ng m·∫°i.)\",\"example\":\"\"},{\"id\":\"v12\",\"word\":\"curiosity\",\"meaning\":\"s·ª± t√≤ m√≤ (interest, inquisitiveness)\",\"synonym\":\"His curiosity led him to explore. (S·ª± t√≤ m√≤ khi·∫øn anh ·∫•y kh√°m ph√°.)\",\"example\":\"\"},{\"id\":\"v13\",\"word\":\"transaction\",\"meaning\":\"giao d·ªãch (deal, exchange)\",\"synonym\":\"The bank completed the transaction. (Ng√¢n h√†ng ho√†n t·∫•t giao d·ªãch.)\",\"example\":\"\"},{\"id\":\"v14\",\"word\":\"preserve\",\"meaning\":\"b·∫£o t·ªìn, gi·ªØ g√¨n (maintain, protect)\",\"synonym\":\"We must preserve cultural heritage. (Ch√∫ng ta ph·∫£i b·∫£o t·ªìn di s·∫£n vƒÉn h√≥a.)\",\"example\":\"\"},{\"id\":\"v15\",\"word\":\"punitive\",\"meaning\":\"tr·ª´ng ph·∫°t (disciplinary, penal)\",\"synonym\":\"The law imposes punitive measures. (Lu·∫≠t √°p ƒë·∫∑t c√°c bi·ªán ph√°p tr·ª´ng ph·∫°t.)\",\"example\":\"\"},{\"id\":\"v16\",\"word\":\"adulteration\",\"meaning\":\"s·ª± pha tr·ªôn, l√†m gi·∫£ (contamination, falsification)\",\"synonym\":\"Food adulteration is a serious issue. (Vi·ªác pha tr·ªôn th·ª±c ph·∫©m l√† v·∫•n ƒë·ªÅ nghi√™m tr·ªçng.)\",\"example\":\"\"},{\"id\":\"v17\",\"word\":\"astonishing\",\"meaning\":\"ƒë√°ng kinh ng·∫°c (amazing, surprising)\",\"synonym\":\"The view was astonishing. (Khung c·∫£nh th·∫≠t ƒë√°ng kinh ng·∫°c.)\",\"example\":\"\"},{\"id\":\"v18\",\"word\":\"cultivation\",\"meaning\":\"s·ª± canh t√°c, tr·ªìng tr·ªçt (farming, growing)\",\"synonym\":\"Tea cultivation is common in Asia. (Canh t√°c tr√† ph·ªï bi·∫øn ·ªü ch√¢u √Å.)\",\"example\":\"\"},{\"id\":\"v19\",\"word\":\"destruction\",\"meaning\":\"s·ª± ph√° h·ªßy (ruin, devastation)\",\"synonym\":\"The storm caused massive destruction. (C∆°n b√£o g√¢y ra s·ª± ph√° h·ªßy l·ªõn.)\",\"example\":\"\"},{\"id\":\"v20\",\"word\":\"ushered\",\"meaning\":\"d·∫´n v√†o, m·ªü ra (introduced, guided)\",\"synonym\":\"The invention ushered in a new era. (Ph√°t minh m·ªü ra m·ªôt k·ª∑ nguy√™n m·ªõi.)\",\"example\":\"\"},{\"id\":\"v21\",\"word\":\"virtual\",\"meaning\":\"·∫£o, g·∫ßn nh∆∞ (digital, simulated)\",\"synonym\":\"Students attend virtual classes online. (H·ªçc sinh tham gia l·ªõp h·ªçc ·∫£o tr·ª±c tuy·∫øn.)\",\"example\":\"\"},{\"id\":\"v22\",\"word\":\"merchant\",\"meaning\":\"th∆∞∆°ng nh√¢n (trader, dealer)\",\"synonym\":\"The merchant sold silk in the market. (Th∆∞∆°ng nh√¢n b√°n l·ª•a ·ªü ch·ª£.)\",\"example\":\"\"},{\"id\":\"v23\",\"word\":\"steamships\",\"meaning\":\"t√†u h∆°i n∆∞·ªõc (steam-powered vessels)\",\"synonym\":\"Steamships transformed global trade. (T√†u h∆°i n∆∞·ªõc ƒë√£ thay ƒë·ªïi th∆∞∆°ng m·∫°i to√†n c·∫ßu.)\",\"example\":\"\"}];\nconst headings=[];\nconst headingKey={};\nconst mifRange=\"ABCDEFG\"; \nconst removeOpt=false;\n\n// --- GAME DATA INJECTED ---\nconst pairs = [{\"eng\":\"emperor\",\"vie\":\"ho√†ng ƒë·∫ø (king, ruler)\"},{\"eng\":\"herbalist\",\"vie\":\"th·∫ßy thu·ªëc ƒë√¥ng y, ng∆∞·ªùi d√πng th·∫£o d∆∞·ª£c (healer, botanist)\"},{\"eng\":\"renowned\",\"vie\":\"n·ªïi ti·∫øng, l·ª´ng danh (famous, celebrated)\"},{\"eng\":\"servant\",\"vie\":\"ng∆∞·ªùi h·∫ßu (attendant, helper)\"},{\"eng\":\"infusion\",\"vie\":\"s·ª± pha, ng√¢m (brew, mixture)\"},{\"eng\":\"became established\",\"vie\":\"ƒë∆∞·ª£c th√†nh l·∫≠p, tr·ªü n√™n ·ªïn ƒë·ªãnh (founded, recognized)\"},{\"eng\":\"imperial sponsorship\",\"vie\":\"s·ª± b·∫£o tr·ª£ c·ªßa ho√†ng gia (royal support)\"},{\"eng\":\"lagging behind\",\"vie\":\"t·ª•t l·∫°i ph√≠a sau (falling behind)\"},{\"eng\":\"missionaries\",\"vie\":\"nh√† truy·ªÅn gi√°o (preachers, evangelists)\"},{\"eng\":\"commercial\",\"vie\":\"th∆∞∆°ng m·∫°i (business-related)\"},{\"eng\":\"consignment\",\"vie\":\"l√¥ h√†ng, s·ª± g·ª≠i h√†ng (shipment, delivery)\"},{\"eng\":\"monopoly\",\"vie\":\"s·ª± ƒë·ªôc quy·ªÅn (exclusive control)\"},{\"eng\":\"curiosity\",\"vie\":\"s·ª± t√≤ m√≤ (interest, inquisitiveness)\"},{\"eng\":\"transaction\",\"vie\":\"giao d·ªãch (deal, exchange)\"},{\"eng\":\"preserve\",\"vie\":\"b·∫£o t·ªìn, gi·ªØ g√¨n (maintain, protect)\"},{\"eng\":\"punitive\",\"vie\":\"tr·ª´ng ph·∫°t (disciplinary, penal)\"},{\"eng\":\"adulteration\",\"vie\":\"s·ª± pha tr·ªôn, l√†m gi·∫£ (contamination, falsification)\"},{\"eng\":\"astonishing\",\"vie\":\"ƒë√°ng kinh ng·∫°c (amazing, surprising)\"},{\"eng\":\"cultivation\",\"vie\":\"s·ª± canh t√°c, tr·ªìng tr·ªçt (farming, growing)\"},{\"eng\":\"destruction\",\"vie\":\"s·ª± ph√° h·ªßy (ruin, devastation)\"},{\"eng\":\"ushered\",\"vie\":\"d·∫´n v√†o, m·ªü ra (introduced, guided)\"},{\"eng\":\"virtual\",\"vie\":\"·∫£o, g·∫ßn nh∆∞ (digital, simulated)\"},{\"eng\":\"merchant\",\"vie\":\"th∆∞∆°ng nh√¢n (trader, dealer)\"},{\"eng\":\"steamships\",\"vie\":\"t√†u h∆°i n∆∞·ªõc (steam-powered vessels)\"}];\n\n// --- VIEW TOGGLE ---\nfunction toggleGame() {\n    const g = document.getElementById('game-view');\n    const r = document.getElementById('reading-view');\n    if(g.style.display === 'block') {\n        g.style.display = 'none';\n        r.style.display = 'flex';\n        // Force refresh game to avoid layout bugs\n    } else {\n        g.style.display = 'block';\n        r.style.display = 'none';\n        if(pairs.length > 0) initGame(); // Re-init or Init\n    }\n}\n\n// --- TIMER LOGIC ---\nlet timeLeft = 3600;\nconst timerEl = document.getElementById('timer');\nconst timerInterval = setInterval(() => {\n    if(timeLeft <= 0) {\n        clearInterval(timerInterval);\n        timerEl.innerText = \"00:00\";\n        alert(\"Time is up!\");\n        return;\n    }\n    timeLeft--;\n    const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');\n    const s = (timeLeft % 60).toString().padStart(2, '0');\n    timerEl.innerText = `${m}:${s}`;\n}, 1000);\n\n// Render Reading\nconst qDiv=document.getElementById('qs');\nconst hDiv=document.getElementById('headingsArea');\n\nif(headings.length > 0) {\n    let hHtml = '<div class=\"headings-panel\"><div class=\"headings-title\">List of Headings</div>';\n    headings.forEach(h => { hHtml += `<div class=\"heading-item\" draggable=\"true\" ondragstart=\"dragHeading(event)\" id=\"h-item-${h.id}\" data-hid=\"${h.id}\"><span class=\"h-id\">${h.id}</span> <span>${h.text}</span></div>`; });\n    hHtml += '</div>';\n    hDiv.innerHTML = hHtml;\n}\n\nqs.forEach(q=>{\n  if(q.type==='text-only'){ qDiv.innerHTML+=`<div class=\"text-only\">${q.text}</div>`; }\n  else if(q.type==='summary') { // Matching / Summary (Drag Drop)\n      let h = `<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n      let txt = q.text.replace(/\\n/g, '<br>');\n      q.gapIds.forEach(gid => {\n          const dz = `<span class=\"drop-zone\" id=\"dz-${gid}\" data-gid=\"${gid}\" ondragover=\"allowDrop(event)\" ondrop=\"drop(event)\" onclick=\"clearDrop(${gid})\"></span><span class=\"q-num\" style=\"vertical-align:super;font-size:10px\">${gid}</span>&nbsp;`;\n          let replaced = txt.replace(new RegExp(`${gid}\\\\s*([._‚Ä¶-]{2,}|_{2,}|‚Ä¶+)`), dz);\n          if(replaced === txt) replaced = txt.replace(new RegExp(`${gid}[.]\\\\s+`), dz + ' ');\n          txt = replaced;\n          const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+gid; d.innerText=gid;\n          d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n          document.getElementById('progressBar').appendChild(d);\n      });\n      h += `<div style=\"line-height:2;font-size:15px\">${txt}</div><div style=\"margin-top:15px;display:flex;flex-wrap:wrap;gap:8px;padding-top:10px;border-top:1px dashed #e2e8f0\">`;\n      q.options.forEach(optLine => {\n          const m = optLine.match(/^([A-Z])\\s*[.)]?\\s*(.+)/);\n          if(m) h += `<div class=\"heading-item\" id=\"opt-${q.id}-${m[1]}\" style=\"display:inline-flex;width:auto;margin:0\" draggable=\"true\" ondragstart=\"drag(event)\" data-val=\"${m[1]}\"><span style=\"font-weight:bold;color:#2563eb\">${m[1]}</span> ${m[2]}</div>`;\n      });\n      h += `</div><div id=\"fb-${q.id}\" style=\"margin-top:10px; font-size:13px\"></div></div>`;\n      qDiv.innerHTML += h;\n  } \n  else if(q.type==='gap-fill-block') { // Paragraph Inputs\n      let h = `<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n      let txt = q.text.replace(/\\n/g, '<br>'); \n      q.gapIds.forEach(gid => {\n          const loc = (q.locations && q.locations[gid]) ? q.locations[gid] : \"\";\n          const locBtn = loc ? `<button class=\"loc-btn\" onclick=\"showLoc(${q.id}, ${gid})\">üìç</button>` : \"\";\n          const inp = `<span class=\"q-num\">${gid}</span><input type=\"text\" class=\"gap-input\" data-gid=\"${gid}\" oninput=\"upd(${gid})\">${locBtn}&nbsp;`;\t\n          txt = txt.replace(new RegExp(`${gid}[\\\\s:.)]*(?:[_‚Ä¶.\\\\-]\\\\s*){2,}`), inp);\n          const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+gid; d.innerText=gid;\n          d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n          document.getElementById('progressBar').appendChild(d);\n      });\n      h += `<div style=\"line-height:2.2;font-size:16px\">${txt}</div><div id=\"fb-${q.id}\" style=\"margin-top:10px; font-size:13px\"></div></div>`;\n      qDiv.innerHTML += h;\n  }\n  \n  else if(q.type==='mcq25') {\n      let h = `<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n      const locBtn1 = (q.locations && q.locations[q.gapIds[0]]) ? `<button class=\"loc-btn\" onclick=\"showLoc(${q.id}, ${q.gapIds[0]})\">üìç</button>` : \"\";\n      h += `<div style=\"display:flex;align-items:baseline;margin-bottom:8px;\"><span class=\"q-num\">${q.gapIds[0]}-${q.gapIds[1]}</span> <span>${q.text}</span> ${locBtn1}</div>`;\n      q.options.forEach((o, i) => {\n          h += `<label style=\"display:block;margin:5px 0;cursor:pointer;transition:all 0.2s;\">\n                  <input type=\"checkbox\" name=\"mcq25_${q.id}\" value=\"${o.trim()[0]}\" onchange=\"updMcq25(${q.id}, ${q.gapIds[0]}, ${q.gapIds[1]}, event)\"> ${o} <span id=\"mcq25-mark-${q.id}-${i}\" class=\"mcq-mark\"></span>\n                </label>`;\n      });\n      h += `<div id=\"fb-${q.id}\" class=\"feedback\" style=\"margin-top:8px;font-size:13px\"></div></div>`;\n      qDiv.innerHTML += h;\n      q.gapIds.forEach(gid => {\n          const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+gid; d.innerText=gid;\n          d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n          document.getElementById('progressBar').appendChild(d);\n      });\n  }\n  \n  else { // Standard MCQ / Single Gap Fill\n    let h=`<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n    const loc = q.location || \"\";\n    const locBtn = loc ? `<button class=\"loc-btn\" onclick=\"showLoc(${q.id})\">üìç</button>` : \"\";\n    \n    if(q.type==='gap-fill'){\n       let t=q.text.replace(/(\\d+)[\\s:.)]*(?:[_‚Ä¶.\\-]\\s*){2,}/g, '<span class=\"q-num\">$1</span><input type=\"text\" class=\"gap-input\" data-id=\"'+q.id+'\" oninput=\"upd('+q.id+')\">'+locBtn+'&nbsp;');\n       h+=`<div>${t}</div>`;\n    } else {\n       h+=`<div style=\"display:flex;align-items:baseline\"><span class=\"q-num\">${q.id}.</span> <span>${q.text}</span> ${locBtn}</div>`;\n       if(q.type==='mcq') q.options.forEach((o, i) => { h += `<label class=\"mcq-label\" style=\"display:block;margin:5px 0;cursor:pointer\"><input type=\"radio\" name=\"q${q.id}\" value=\"${o.trim()[0]}\" onchange=\"upd(${q.id})\"> ${o} <span id=\"mcq-mark-${q.id}-${i}\" class=\"mcq-mark\"></span></label>`; });\n       if(q.type==='tfng') {\n           h+='<div class=\"tfng-container\">';\n           ['TRUE', 'FALSE', 'NOT GIVEN'].forEach(opt => {\n               \n               h+=`<label class=\"tfng-label\"><input type=\"radio\" name=\"tfng${q.id}\" value=\"${opt}\" onchange=\"upd(${q.id})\"><span class=\"tfng-btn\">${opt}</span></label>`;\n           });\n           h+='</div>';\n       }\n\t   if(q.type==='ynng') {\n           h+='<div class=\"tfng-container\">';\n           ['YES', 'NO', 'NOT GIVEN'].forEach(opt => {\n               \n               h+=`<label class=\"tfng-label\"><input type=\"radio\" name=\"ynng${q.id}\" value=\"${opt}\" onchange=\"upd(${q.id})\"><span class=\"tfng-btn\">${opt}</span></label>`;\n           });\n           h+='</div>';\n       }\n       if(q.type==='mif') {\n           h+='<div class=\"mif-container\">';\n           mifRange.split('').forEach(char => {\n               h+=`<label class=\"mif-label\"><input type=\"radio\" name=\"mif${q.id}\" value=\"${char}\" onchange=\"upd(${q.id})\"><span class=\"mif-circle\">${char}</span></label>`;\n           });\n           h+='</div>';\n       }\n    }\n    h+=`<div id=\"fb-${q.id}\" class=\"feedback\" style=\"margin-top:8px;font-size:13px\"></div></div>`;\n    qDiv.innerHTML+=h;\n    const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+q.id; d.innerText=q.id;\n    d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n    document.getElementById('progressBar').appendChild(d);\n  }\n});\n\n// Drag Drop (Reading)\nfunction allowDrop(ev) { ev.preventDefault(); }\nfunction drag(ev) { \n    ev.dataTransfer.setData(\"text\", ev.target.dataset.val); \n    ev.dataTransfer.setData(\"srcId\", ev.target.id); \n}\nfunction dragHeading(ev) { \n    const el = ev.target.closest('.heading-item');\n    ev.dataTransfer.setData(\"hid\", el.dataset.hid); \n    ev.dataTransfer.setData(\"srcId\", el.id); \n}\nfunction drop(ev) {\n    ev.preventDefault();\n    const zone = ev.target.closest('.drop-zone');\n    if(!zone) return;\n    \n    const type = zone.dataset.type;\n    if (type === 'heading') {\n        const hid = ev.dataTransfer.getData(\"hid\");\n        if(!hid) return; \n        zone.innerHTML = hid.toUpperCase(); \n        zone.dataset.val = hid; \n        zone.classList.add('filled');\n        \n        const srcId = ev.dataTransfer.getData(\"srcId\");\n        document.getElementById(srcId).classList.add('used');\n        if(zone.dataset.prevSrc && zone.dataset.prevSrc !== srcId) document.getElementById(zone.dataset.prevSrc).classList.remove('used');\n        zone.dataset.prevSrc = srcId;\n        return;\n    }\nconst val = ev.dataTransfer.getData(\"text\");\n    if(val) {\n        zone.innerText = val; \n        zone.classList.add('filled');\n        const gid = zone.dataset.gid;\n        document.getElementById('prog-'+gid).classList.add('filled');\n        \n        // Logic l√†m m·ªù option\n        if(removeOpt) {\n            const srcId = ev.dataTransfer.getData(\"srcId\");\n            if(srcId) {\n                const srcEl = document.getElementById(srcId);\n                if(srcEl) srcEl.classList.add('used');\n                // Ph·ª•c h·ªìi l·∫°i ƒë·ªô s√°ng cho option c≈© n·∫øu ng∆∞·ªùi d√πng k√©o ƒë√® option m·ªõi l√™n\n                if(zone.dataset.prevSrc && zone.dataset.prevSrc !== srcId) {\n                    const prevEl = document.getElementById(zone.dataset.prevSrc);\n                    if(prevEl) prevEl.classList.remove('used');\n                }\n                zone.dataset.prevSrc = srcId;\n            }\n        }\n    }\n}\nfunction clearHeading(idx) {\n    const el = document.querySelector(`.heading-drop[data-para=\"${idx}\"]`);\n    if(el.dataset.prevSrc) document.getElementById(el.dataset.prevSrc).classList.remove('used');\n    el.innerHTML = '<span class=\"placeholder\">Drop Heading Here</span>'; el.classList.remove('filled'); delete el.dataset.val;\n}\nfunction clearDrop(gid) {\n    const el = document.getElementById('dz-'+gid);\n    \n    // Ph·ª•c h·ªìi option b√™n d∆∞·ªõi n·∫øu c√≥\n    if(removeOpt && el.dataset.prevSrc) {\n        const prevEl = document.getElementById(el.dataset.prevSrc);\n        if(prevEl) prevEl.classList.remove('used');\n        delete el.dataset.prevSrc;\n    }\n    \n    el.innerText=''; el.classList.remove('filled'); document.getElementById('prog-'+gid).classList.remove('filled');\n}\n\n// Highlight\nconst hlBtn = document.getElementById('hl-btn');\nlet currentRange = null;\ndocument.addEventListener('mouseup', (e) => {\n    if(e.target.closest('#hl-btn')) return;\n    if(e.target.closest('#game-view')) return; // No highlight in game\n    setTimeout(() => {\n        const sel = window.getSelection();\n        if(sel.toString().trim().length > 0) {\n            const range = sel.getRangeAt(0);\n            const parent = range.commonAncestorContainer.parentElement;\n            if(parent.closest('.en-text') || parent.closest('.q-block') || parent.closest('.text-only')) {\n                currentRange = range;\n                const rect = range.getBoundingClientRect();\nhlBtn.style.display = 'block'; \nhlBtn.style.top = (rect.top + window.scrollY - 35) + 'px'; \n// Tr·ª´ ƒëi kho·∫£ng 50px ·ªü to·∫° ƒë·ªô left ƒë·ªÉ d·ªãch n√∫t Highlight sang b√™n tr√°i, nh∆∞·ªùng v·ªã tr√≠ trung t√¢m cho icon Laban\nhlBtn.style.left = (rect.left + (rect.width/2) + 50) + 'px';\n                return;\n            }\n        }\n        hlBtn.style.display = 'none';\n    }, 10);\n});\nfunction applyHighlight(e) {\n    e.preventDefault(); e.stopPropagation();\n    if(currentRange) {\n        const span = document.createElement('span'); span.className = 'user-highlight'; span.setAttribute('onclick', 'removeHighlight(this, event)');\n        try { currentRange.surroundContents(span); window.getSelection().removeAllRanges(); } catch(err) { alert(\"Selection too complex. Try selecting simpler text.\"); }\n        hlBtn.style.display = 'none';\n    }\n}\nwindow.removeHighlight = (el, e) => { e.stopPropagation(); const txt = document.createTextNode(el.innerText); el.parentNode.replaceChild(txt, el); hlBtn.style.display = 'none'; };\n\n// --- SHOW LOCATION LOGIC ---\nwindow.showLoc = (qId, subId) => {\n    // Clear old highlights\n    document.querySelectorAll('.loc-highlight').forEach(el => el.classList.remove('loc-highlight'));\n    \n    const q = qs.find(x => x.id === qId);\n    if(!q) return;\n    \n    let text = \"\";\n    if(subId && q.locations && q.locations[subId]) text = q.locations[subId];\n    else if(q.location) text = q.location;\n    \n    if(!text) return alert(\"No location data found.\");\n    \n    const cleanText = text.trim().replace(/\\s+/g, ' ').toLowerCase();\n    const sents = document.querySelectorAll('.sent');\n    let found = false;\n    \n    sents.forEach(s => {\n        const sText = s.innerText.trim().replace(/\\s+/g, ' ').toLowerCase();\n        // Check if sentence contains location text OR location text contains sentence (partial match)\n        if(sText.includes(cleanText) || (cleanText.length > 20 && cleanText.includes(sText))) {\n            s.classList.add('loc-highlight');\n            if(!found) {\n                s.scrollIntoView({behavior: 'smooth', block: 'center'});\n                found = true;\n            }\n        }\n    });\n    \n    if(!found) alert(\"Could not find exact text match in passage.\");\n};\n\n// --- TRANSLATION HOVER HIGHLIGHT ---\ndocument.querySelectorAll('.sent').forEach(el => {\n    el.addEventListener('mouseenter', () => {\n        const tid = el.getAttribute('data-target');\n        const t = document.getElementById(tid);\n        if(t) t.style.backgroundColor = '#fef08a'; \n    });\n    el.addEventListener('mouseleave', () => {\n        const tid = el.getAttribute('data-target');\n        const t = document.getElementById(tid);\n        if(t) t.style.backgroundColor = 'transparent';\n    });\n});\n\n// Check (Reading)\nwindow.upd = (id) => document.getElementById('prog-'+id).classList.add('filled');\n\nwindow.updMcq25 = (qId, id1, id2, ev) => {\n    const checkboxes = document.querySelectorAll(`input[name=\"mcq25_${qId}\"]`);\n    const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;\n    const p1 = document.getElementById('prog-'+id1);\n    const p2 = document.getElementById('prog-'+id2);\n    \n    if (checkedCount > 2) {\n        ev.target.checked = false;\n        alert(\"You can only choose maximum 2 options!\");\n        return;\n    }\n    \n    if(checkedCount >= 1) p1.classList.add('filled'); else p1.classList.remove('filled');\n    if(checkedCount === 2) p2.classList.add('filled'); else p2.classList.remove('filled');\n};\n\nwindow.check = () => {\n    document.querySelectorAll('.ans-key').forEach(e=>e.remove());\n    document.querySelectorAll('.input-correct, .input-wrong, .correct-zone, .wrong-zone, .correct-opt, .wrong-opt').forEach(e=>e.classList.remove('input-correct','input-wrong','correct-zone','wrong-zone','correct-opt','wrong-opt'));\n\tdocument.querySelectorAll('.prog-correct, .prog-wrong').forEach(e=>e.classList.remove('prog-correct','prog-wrong'));\n    document.querySelectorAll('.mcq-mark').forEach(e=>e.innerText='');\n\n    let score = 0, total = 0;\n    \n    // 1. CHECK HEADINGS\n    if(headings.length > 0) {\n        document.querySelectorAll('.heading-drop').forEach(z => {\n            const pIdx = z.dataset.para, userVal = (z.dataset.val || \"\").toUpperCase(), correctVal = (headingKey[pIdx] || \"\").toUpperCase();\n            if(correctVal) { \n                total++; \n                const fb = document.getElementById('fb-h-'+pIdx);\n                if(userVal === correctVal) { \n                    fb.innerHTML = '<span class=\"correct\">‚úì</span>'; \n                    score++; \n                } else {\n                    fb.innerHTML = `<span class=\"wrong\">‚úó</span> <span class=\"correct\">${correctVal}</span>`; \n                }\n            }\n        });\n    }\n\n    // 2. CHECK QUESTIONS\n    qs.forEach(q => {\n        if(q.type === 'summary' || q.type === 'gap-fill-block') {\n            total += q.gapIds.length;\n            q.gapIds.forEach(gid => {\n                let userVal = \"\";\n                let el = null;\n                const keyVal = (q.answers[gid] || \"\").trim();\n\n                if(q.type==='summary') { \n                    el=document.getElementById('dz-'+gid); \n                    userVal = el?el.innerText.trim():\"\"; \n                    if(el) {\n                        if(userVal.toLowerCase() === keyVal.toLowerCase()) { el.classList.add('correct-zone'); score++; document.getElementById('prog-'+gid).classList.add('prog-correct'); }\n                        else { \n                             el.classList.add('wrong-zone'); \n                             el.insertAdjacentHTML('afterend', `<span class=\"ans-key\">${keyVal}</span>`);\n                             document.getElementById('prog-'+gid).classList.add('prog-wrong');\n                        }\n                    }\n                }\n                if(q.type==='gap-fill-block') { \n                    el=document.querySelector(`input[data-gid=\"${gid}\"]`); \n                    userVal = el?el.value.trim():\"\"; \n                    if(el) {\n                         if(userVal.toLowerCase() === keyVal.toLowerCase()) { el.classList.add('input-correct'); score++; document.getElementById('prog-'+gid).classList.add('prog-correct'); }\n                        else { \n                             el.classList.add('input-wrong');\n                             el.insertAdjacentHTML('afterend', `<span class=\"ans-key\">${keyVal}</span>`);\n                             document.getElementById('prog-'+gid).classList.add('prog-wrong');\n                        }\n                    }\n                }\n            });\n        } \n        // ƒê∆ØA MCQ25 RA TH√ÄNH M·ªòT KH·ªêI ƒê·ªòC L·∫¨P T·∫†I ƒê√ÇY\n        else if (q.type === 'mcq25') {\n            total += 2;\n            const checkboxes = document.querySelectorAll(`input[name=\"mcq25_${q.id}\"]:checked`);\n            let userVals = Array.from(checkboxes).map(cb => cb.value.toUpperCase());\n            let correctVals = q.gapIds.map(gid => (q.answers[gid] || \"\").toUpperCase().trim());\n            let origCorrectVals = [...correctVals];\n\n            let localScore = 0;\n            userVals.forEach(uv => {\n                const idx = correctVals.indexOf(uv);\n                if (idx > -1) { localScore++; correctVals[idx] = null; } \n            });\n            score += localScore;\n\n            const allCheckboxes = document.querySelectorAll(`input[name=\"mcq25_${q.id}\"]`);\n            allCheckboxes.forEach((cb, i) => {\n                const val = cb.value.toUpperCase();\n                const markSpan = document.getElementById(`mcq25-mark-${q.id}-${i}`);\n                const label = cb.closest('label');\n                \n                label.style.border = 'none';\n                label.style.padding = '0';\n                label.style.backgroundColor = 'transparent';\n                if(markSpan) markSpan.innerHTML = '';\n                \n                const isCorrectOption = origCorrectVals.includes(val);\n\n                if (cb.checked) {\n                    if (isCorrectOption) {\n                        if(markSpan) markSpan.innerHTML = '<span style=\"color:#16a34a; font-weight:bold;\">‚úì</span>';\n                        label.style.border = '2px dashed #16a34a';\n                        label.style.padding = '4px 8px';\n                        label.style.borderRadius = '6px';\n                        label.style.backgroundColor = '#f0fdf4';\n                    } else {\n                        if(markSpan) markSpan.innerHTML = '<span style=\"color:#dc2626; font-weight:bold;\">‚úó</span>';\n                        label.style.border = '2px dashed #dc2626';\n                        label.style.padding = '4px 8px';\n                        label.style.borderRadius = '6px';\n                        label.style.backgroundColor = '#fef2f2';\n                    }\n                } else if (isCorrectOption) {\n                    if(markSpan) markSpan.innerHTML = '<span style=\"color:#16a34a; font-weight:bold; font-size:11px; margin-left:4px;\">(Key)</span>';\n                    label.style.border = '2px dashed #16a34a';\n                    label.style.padding = '4px 8px';\n                    label.style.borderRadius = '6px';\n                    label.style.backgroundColor = '#f0fdf4';\n                }\n            });\n\n            let p1 = document.getElementById('prog-'+q.gapIds[0]), p2 = document.getElementById('prog-'+q.gapIds[1]);\n            if (localScore === 2) { p1.classList.add('prog-correct'); p2.classList.add('prog-correct'); }\n            else if (localScore === 1) { p1.classList.add('prog-correct'); p2.classList.add('prog-wrong'); }\n            else { p1.classList.add('prog-wrong'); p2.classList.add('prog-wrong'); }\n\n            if (localScore < 2) document.getElementById('fb-'+q.id).innerHTML = `<span class=\"wrong\">‚úó Correct: ${origCorrectVals.join(', ')}</span>`;\n            else document.getElementById('fb-'+q.id).innerHTML = '<span class=\"correct\">‚úì Correct</span>';\n        }\n        // ƒêI·ªÄU KI·ªÜN CHO C√ÅC C√ÇU H·ªéI TH√îNG TH∆Ø·ªúNG\n        else if (q.id) {\n            total++;\n            let u=\"\", ok=false;\n            const keyVal = (q.correctAnswer||\"\").trim();\n            \n            if(q.type==='mcq') {\n                 const inputs = document.querySelectorAll(`input[name=\"q${q.id}\"]`);\n                 let selectedIdx = -1;\n                 inputs.forEach((inp, idx) => {\n                     if(inp.checked) { u = inp.value; selectedIdx = idx; }\n                 });\n                 if(keyVal.toLowerCase().startsWith(u.toLowerCase()) && u) ok=true;\n                 if(selectedIdx !== -1) {\n                     const markSpan = document.getElementById(`mcq-mark-${q.id}-${selectedIdx}`);\n                     if(markSpan) markSpan.innerHTML = ok ? '<span style=\"color:#16a34a\">‚úì</span>' : '<span style=\"color:#dc2626\">‚úó</span>';\n                 }\n            }\n            if(q.type==='gap-fill') {\n                const el = document.querySelector(`input[data-id=\"${q.id}\"]`);\n                u = el ? el.value.trim() : \"\";\n                if(u.toLowerCase() === keyVal.toLowerCase()) ok=true;\n                if(el) {\n                    if(ok) el.classList.add('input-correct');\n                    else { el.classList.add('input-wrong'); el.insertAdjacentHTML('afterend', `<span class=\"ans-key\">${keyVal}</span>`); }\n                }\n            }\n            if(q.type==='tfng' || q.type==='ynng') {\n                 const inputName = q.type === 'tfng' ? `tfng${q.id}` : `ynng${q.id}`;\n                 const checked = document.querySelector(`input[name=\"${inputName}\"]:checked`);\n                 u = checked ? checked.value : \"\";\n                 \n                 if(u.toLowerCase() === keyVal.toLowerCase()) ok=true;\n                 \n                 if(checked) {\n                     const btn = checked.nextElementSibling;\n                     if(ok) btn.classList.add('correct-opt');\n                     else {\n                         btn.classList.add('wrong-opt');\n                         document.getElementById('fb-'+q.id).insertAdjacentHTML('afterbegin', `<span class=\"ans-key\" style=\"margin-bottom:5px; display:inline-block\">${keyVal}</span> `);\n                     }\n                 } else if (!ok) {\n                     document.getElementById('fb-'+q.id).innerHTML += `<span class=\"ans-key\">${keyVal}</span>`;\n                 }\n            }\n            if(q.type==='mif') {\n                 const checked = document.querySelector(`input[name=\"mif${q.id}\"]:checked`);\n                 u = checked ? checked.value : \"\";\n                 if(u.toLowerCase() === keyVal.toLowerCase()) ok=true;\n                 if(checked) {\n                     const circle = checked.nextElementSibling;\n                     if(ok) circle.classList.add('correct-opt');\n                     else circle.classList.add('wrong-opt');\n                 }\n            }\n\n            if(ok) {\n                score++;\n                document.getElementById('prog-'+q.id).classList.add('prog-correct');\n            } else {\n                document.getElementById('prog-'+q.id).classList.add('prog-wrong');\n            }\n            \n            if(!ok && q.type !== 'summary' && q.type !== 'gap-fill-block') {\n                 const fb = document.getElementById('fb-'+q.id);\n                 fb.innerHTML = `<span class=\"wrong\">‚úó Your: ${u||\"(empty)\"}</span> <span class=\"correct\">Key: ${keyVal}</span>`;\n            } else if(ok && q.type !== 'summary' && q.type !== 'gap-fill-block') {\n                 document.getElementById('fb-'+q.id).innerHTML = '<span class=\"correct\">‚úì Correct</span>';\n            }\n        }\n    });\n\t\n\t\n    alert(`Score: ${score} / ${total}`);\n};\n\nwindow.toggleInlineMif = (qId, pChar) => {\n    const btn = document.querySelector(`.mif-inline-box[data-para=\"${pChar}\"] .mif-inline-btn[data-qid=\"${qId}\"]`);\n    if(!btn) return;\n    const isSelected = btn.classList.contains('selected');\n    \n    if (isSelected) {\n        // B·ªè ch·ªçn\n        btn.classList.remove('selected');\n        const radio = document.querySelector(`input[name=\"mif${qId}\"][value=\"${pChar}\"]`);\n        if(radio) radio.checked = false;\n        \n        // Hi·ªán l·∫°i c√¢u n√†y ·ªü c√°c Passage kh√°c\n        document.querySelectorAll(`.mif-inline-btn[data-qid=\"${qId}\"]`).forEach(el => el.classList.remove('hidden-by-other'));\n        \n        // T·∫Øt m√†u xanh Palette n·∫øu ko c√≤n ch·ªçn g√¨\n        const anyChecked = document.querySelector(`input[name=\"mif${qId}\"]:checked`);\n        if(!anyChecked) document.getElementById('prog-'+qId).classList.remove('filled');\n    } else {\n        // Ch·ªçn\n        btn.classList.add('selected');\n        const radio = document.querySelector(`input[name=\"mif${qId}\"][value=\"${pChar}\"]`);\n        if(radio) radio.checked = true;\n        \n        // ·∫®n c√¢u n√†y kh·ªèi c√°c Passage kh√°c\n        document.querySelectorAll(`.mif-inline-btn[data-qid=\"${qId}\"]`).forEach(el => {\n            if(el !== btn) { el.classList.remove('selected'); el.classList.add('hidden-by-other'); }\n        });\n        document.getElementById('prog-'+qId).classList.add('filled');\n    }\n};\n\n// ƒê·ªìng b·ªô ng∆∞·ª£c: Khi h·ªçc sinh tick Radio b√™n c·ªôt ph·∫£i, t·ª± ƒë·ªông ·∫©n/hi·ªán h·ªôp ·ªü c·ªôt tr√°i\nsetTimeout(() => {\n    document.querySelectorAll('input[type=\"radio\"][name^=\"mif\"]').forEach(radio => {\n        radio.addEventListener('change', (e) => {\n            const qId = radio.name.replace('mif', '');\n            const pChar = radio.value;\n            \n            document.querySelectorAll(`.mif-inline-btn[data-qid=\"${qId}\"]`).forEach(btn => {\n                const btnPara = btn.closest('.mif-inline-box').dataset.para;\n                if(btnPara === pChar) {\n                    btn.classList.remove('hidden-by-other');\n                    btn.classList.add('selected');\n                } else {\n                    btn.classList.remove('selected');\n                    btn.classList.add('hidden-by-other');\n                }\n            });\n        });\n    });\n}, 500);\n// Utils\nwindow.toggleTrans=id=>document.getElementById(id).classList.toggle('hidden');\nconst rs=document.getElementById('rs'),lp=document.getElementById('lp');\nlet x=0,w=0,md=e=>{x=e.clientX;w=lp.offsetWidth;document.addEventListener('mousemove',mm);document.addEventListener('mouseup',mu)};\nlet mm=e=>lp.style.width=((w+e.clientX-x)/rs.parentElement.offsetWidth*100)+'%';\nlet mu=()=>{document.removeEventListener('mousemove',mm);document.removeEventListener('mouseup',mu)};\nrs.addEventListener('mousedown',md);\n\nconst pp=document.getElementById('popup');\ndocument.querySelectorAll('.vocab').forEach(s=>{\n  s.onclick=e=>{\n    const v=vocab.find(x=>x.id===s.dataset.vid);if(!v)return;\n    pp.innerHTML=`<div style=\"background:#1e293b;color:#fff;padding:12px;font-weight:700;display:flex;justify-content:space-between;align-items:center\"><span>${v.word}</span><span onclick=\"speak('${v.word}')\" style=\"cursor:pointer;background:#334155;padding:4px;border-radius:50%\">üîä</span></div><div style=\"padding:16px;font-size:14px;color:#334155\"><p style=\"margin-bottom:8px\"><b style=\"color:#0f172a\">Meaning:</b> ${v.meaning}</p><p style=\"margin-bottom:8px\"><b style=\"color:#0f172a\">Synonyms:</b> ${v.synonym}</p><div style=\"background:#f1f5f9;padding:8px;border-radius:6px;margin-top:8px;color:#475569;font-style:italic\">\"${v.example}\"</div></div>`;\n    pp.style.display='block';pp.style.top=(e.clientY+10)+'px';pp.style.left=Math.min(e.clientX,window.innerWidth-330)+'px';\n    e.stopPropagation();\n  }\n});\ndocument.onclick=e=>{if(!pp.contains(e.target) && e.target.id !== 'hl-btn') pp.style.display='none'};\nwindow.speak=t=>window.speechSynthesis.speak(new SpeechSynthesisUtterance(t));\n\n/* ================================\n   GAME SCRIPT LOGIC\n   ================================ */\n\n/* ====== tr·∫°ng th√°i ====== */\nlet state = { engOrder: [], shuffledVie: [], matches: {}, score: 0 };\nconst engListEl = document.getElementById('engList');\nconst vieListEl = document.getElementById('vieList');\nconst scoreEl = document.getElementById('score');\nconst confettiEl = document.getElementById('confetti');\n\n/* helper shuffle */\nfunction shuffleArray(arr){\n  const a = arr.slice();\n  for(let i=a.length-1;i>0;i--){\n    const j = Math.floor(Math.random()*(i+1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\n/* init */\nfunction initGame(){\n  state.matches = {}; state.score = 0;\n  if(pairs.length === 0) {\n      engListEl.innerHTML = '<div style=\"color:white;padding:20px\">No vocab data selected in the Generator!</div>';\n      return;\n  }\n  state.engOrder = shuffleArray(pairs.map((_,i)=>i));\n  state.shuffledVie = shuffleArray(pairs.map(p => p.vie));\n  renderEng(); renderVie(); attachSlotEvents(); updateScore(); initFlashcards(); renderFillList();\n}\n\n/* render eng */\nfunction renderEng(){\n  engListEl.innerHTML = '';\n  state.engOrder.forEach((origIndex, pos) => {\n    const p = pairs[origIndex];\n    const item = document.createElement('div');\n    item.className = 'g-eng-item';\n    item.dataset.origIndex = origIndex;\n    item.innerHTML = `\n      <div class=\"g-eng-left\">\n        <div class=\"g-index\">${pos+1}</div>\n        <div>\n          <div style=\"font-weight:700\">${p.eng}</div>\n          <div style=\"font-size:13px; color:var(--muted)\">English</div>\n        </div>\n      </div>\n      <div class=\"g-slot\" data-index=\"${origIndex}\" aria-label=\"drop slot\" tabindex=\"0\"><div class=\"inner\"></div></div>\n    `;\n    engListEl.appendChild(item);\n  });\n}\n\n/* render vie */\nfunction renderVie(){\n  vieListEl.innerHTML = '';\n  state.shuffledVie.forEach((text, idx) => {\n    const d = document.createElement('div');\n    d.className = 'g-vie-item';\n    d.draggable = true;\n    d.dataset.text = text;\n    d.id = 'vie-'+idx;\n    d.innerHTML = `<span style=\"font-weight:600\">${text}</span>`;\n    vieListEl.appendChild(d);\n\n    d.addEventListener('dragstart', e => {\n      d.classList.add('dragging');\n      e.dataTransfer.setData('text/plain', text);\n      currentPicked = {text, el:d};\n    });\n    d.addEventListener('dragend', ()=> d.classList.remove('dragging'));\n    d.addEventListener('click', () => {\n      if(currentPicked && currentPicked.el === d){ currentPicked = null; d.style.outline = ''; }\n      else { clearPicked(); currentPicked = {text, el:d}; d.style.outline = '2px solid rgba(6,182,212,0.18)'; }\n    });\n  });\n}\n\n/* drag & drop */\nfunction attachSlotEvents(){\n  const slots = document.querySelectorAll('.g-slot');\n  slots.forEach(slot => {\n    slot.addEventListener('dragover', e => { e.preventDefault(); slot.classList.add('active'); });\n    slot.addEventListener('dragleave', () => slot.classList.remove('active'));\n    slot.addEventListener('drop', e => {\n      e.preventDefault(); slot.classList.remove('active');\n      const text = e.dataTransfer.getData('text/plain'); handleDrop(slot, text);\n    });\n    slot.addEventListener('click', () => { if(currentPicked) handleDrop(slot, currentPicked.text); });\n    slot.addEventListener('focus', () => slot.classList.add('highlight'));\n    slot.addEventListener('blur', () => slot.classList.remove('highlight'));\n    slot.addEventListener('keydown', e => { if(e.key === 'Enter' && currentPicked) handleDrop(slot, currentPicked.text); });\n  });\n}\n\nfunction handleDrop(slot, vieText){\n  const engIndex = Number(slot.dataset.index);\n  const correctVie = pairs[engIndex].vie;\n  if(state.matches[engIndex]) return;\n  if(vieText === correctVie){\n    slot.classList.add('correct');\n    slot.innerHTML = `<div class=\"inner\"><span style=\"color:#10b981;margin-right:5px\">‚úì</span> <span style=\"font-weight:700;color:var(--success)\">${vieText}</span></div>`;\n    slot.style.borderColor = 'rgba(16,185,129,0.9)'; slot.style.boxShadow = '0 10px 30px rgba(16,185,129,0.06)';\n    state.matches[engIndex] = vieText; state.score++; updateScore(); celebrate(); speak(pairs[engIndex].eng); removeVieItem(vieText);\n    if(state.score === pairs.length){ setTimeout(()=> alert('Ch√∫c m·ª´ng! B·∫°n ƒë√£ gh√©p ƒë√∫ng t·∫•t c·∫£.'), 300); }\n  } else {\n    slot.classList.add('g-wrong'); setTimeout(()=> slot.classList.remove('g-wrong'), 420);\n    const vieEl = findVieElement(vieText);\n    if(vieEl){ vieEl.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}], {duration:300}); }\n  }\n}\n\nfunction removeVieItem(text){ const el = findVieElement(text); if(el){ el.remove(); currentPicked = null; } }\nfunction findVieElement(text){ return Array.from(document.querySelectorAll('.g-vie-item')).find(x => x.dataset.text === text); }\nfunction updateScore(){ scoreEl.innerHTML = `ƒê√∫ng: <strong>${state.score}</strong> / ${pairs.length}`; }\n\n/* confetti */\nfunction celebrate(){\n  const colors = ['#06b6d4','#f97316','#f43f5e','#10b981','#60a5fa'];\n  for(let i=0;i<18;i++){\n    const p = document.createElement('div'); p.className = 'piece';\n    p.style.left = Math.random()*100 + '%'; p.style.background = colors[Math.floor(Math.random()*colors.length)];\n    p.style.width = (8 + Math.random()*10) + 'px'; p.style.height = (10 + Math.random()*14) + 'px';\n    p.style.animationDuration = (900 + Math.random()*700) + 'ms'; confettiEl.appendChild(p); setTimeout(()=> p.remove(), 2000);\n  }\n}\n\n/* controls */\ndocument.getElementById('shuffleBtn').addEventListener('click', () => {\n  state.engOrder = shuffleArray(pairs.map((_,i)=>i)); state.shuffledVie = shuffleArray(pairs.map(p => p.vie));\n  renderEng(); renderVie(); attachSlotEvents(); state.matches = {}; state.score = 0; updateScore();\n});\ndocument.getElementById('resetBtn').addEventListener('click', () => initGame());\n\n/* touch fallback */\nlet currentPicked = null;\nfunction clearPicked(){ if(currentPicked && currentPicked.el) currentPicked.el.style.outline = ''; currentPicked = null; }\ndocument.addEventListener('click', (e) => { \n    if(!e.target.closest('.g-vie-item') && !e.target.closest('.g-slot')) clearPicked(); \n});\n\n/* FLASHCARDS */\nlet flashIndex = 0; let flashAuto = null;\nconst flashFront = document.getElementById('flashFront'); const flashBack = document.getElementById('flashBack'); const flashcardEl = document.getElementById('flashcard');\n\nfunction initFlashcards(){ flashIndex = 0; renderFlash(); }\nfunction renderFlash(){\n  if(pairs.length === 0){ flashFront.textContent = 'Kh√¥ng c√≥ t·ª´ n√†o'; flashBack.textContent = ''; return; }\n  const p = pairs[flashIndex]; flashFront.textContent = p.eng; flashBack.textContent = p.vie; flashcardEl.classList.remove('flipped'); flashcardEl.setAttribute('aria-pressed','false');\n}\ndocument.getElementById('nextCard').addEventListener('click', () => { if(pairs.length) { flashIndex = (flashIndex + 1) % pairs.length; renderFlash(); } });\ndocument.getElementById('prevCard').addEventListener('click', () => { if(pairs.length) { flashIndex = (flashIndex - 1 + pairs.length) % pairs.length; renderFlash(); } });\ndocument.getElementById('flipCard').addEventListener('click', () => { flashcardEl.classList.toggle('flipped'); flashcardEl.setAttribute('aria-pressed', flashcardEl.classList.contains('flipped')); });\nflashcardEl.addEventListener('click', () => { flashcardEl.classList.toggle('flipped'); flashcardEl.setAttribute('aria-pressed', flashcardEl.classList.contains('flipped')); });\ndocument.getElementById('autoPlay').addEventListener('click', (e) => {\n  if(flashAuto){ clearInterval(flashAuto); flashAuto = null; e.target.textContent = 'Auto'; }\n  else { flashAuto = setInterval(()=>{ flashIndex = (flashIndex+1)%pairs.length; renderFlash(); }, 2000); e.target.textContent = 'Stop'; }\n});\ndocument.getElementById('showBoth').addEventListener('click', () => { flashcardEl.classList.add('flipped'); setTimeout(()=> flashcardEl.classList.remove('flipped'), 1600); });\n\n/* FILL-IN */\nconst fillListEl = document.getElementById('fillList'); const fillScoreEl = document.getElementById('fillScore');\nfunction renderFillList(){\n  fillListEl.innerHTML = '';\n  pairs.forEach((p, idx) => {\n    const row = document.createElement('div'); row.className = 'fill-row';\n    row.innerHTML = `<div class=\"vie\">${p.vie}</div><input type=\"text\" data-index=\"${idx}\" placeholder=\"Nh·∫≠p ti·∫øng Anh...\" /><div class=\"small\" style=\"min-width:120px\" id=\"hint-${idx}\"></div>`;\n    fillListEl.appendChild(row);\n    const input = row.querySelector('input');\n    input.addEventListener('focus', () => input.classList.remove('wrong'));\n    input.addEventListener('blur', () => {});\n  });\n  fillScoreEl.textContent = `ƒêi·ªÉm: 0 / ${pairs.length}`;\n}\n\ndocument.getElementById('checkFill').addEventListener('click', () => {\n  let correct = 0;\n  pairs.forEach((p, idx) => {\n    const input = fillListEl.querySelector(`input[data-index=\"${idx}\"]`);\n    const hint = document.getElementById(`hint-${idx}`);\n    const val = (input.value || '').trim().toLowerCase();\n    const target = p.eng.trim().toLowerCase();\n    if(val === target){\n      correct++; input.classList.add('correct'); input.classList.remove('wrong'); input.style.borderColor = 'rgba(16,185,129,0.9)'; hint.innerHTML = `<span class=\"correct-answer\">ƒê√∫ng</span>`;\n    } else {\n      input.classList.remove('correct'); input.classList.add('wrong'); input.style.borderColor = 'rgba(244,63,94,0.9)'; hint.innerHTML = `<span class=\"wrong-answer\">Sai</span>`;\n    }\n  });\n  fillScoreEl.textContent = `ƒêi·ªÉm: ${correct} / ${pairs.length}`;\n});\n\ndocument.getElementById('showAnswers').addEventListener('click', () => {\n  pairs.forEach((p, idx) => {\n    const input = fillListEl.querySelector(`input[data-index=\"${idx}\"]`);\n    input.value = p.eng; input.classList.add('correct'); input.style.borderColor = 'rgba(6,182,212,0.6)';\n    const hint = document.getElementById(`hint-${idx}`); hint.innerHTML = `<span class=\"correct-answer\">ƒê√°p √°n</span>`;\n  });\n  fillScoreEl.textContent = `ƒêi·ªÉm: ${pairs.length} / ${pairs.length}`;\n});\n\ndocument.getElementById('resetFill').addEventListener('click', () => renderFillList());\n\n<\/script>\n\n<script type=\"text/javascript\">var lbplugin_event_opt={\"extension_enable\":true,\"dict_type\":1,\"dbclk_event\":{\"trigger\":\"none\",\"enable\":true,\"display\":1},\"select_event\":{\"trigger\":\"none\",\"enable\":true,\"display\":1}};function loadScript(t,e){var n=document.createElement(\"script\");n.type=\"text/javascript\",n.readyState?n.onreadystatechange=function(){(\"loaded\"===n.readyState||\"complete\"===n.readyState)&&(n.onreadystatechange=null,e())}:n.onload=function(){e()},n.src=t,document.getElementsByTagName(\"head\")[0].appendChild(n)}setTimeout(function(){null==document.getElementById(\"lbdictex_find_popup\")&&loadScript(\"https://stc-laban.zdn.vn/dictionary/js/plugin/lbdictplugin.min.js?\"+Date.now()%1e4,function(){lbDictPlugin.init(lbplugin_event_opt)})},1e3);<\/script>\n</body>\n\n</html>"},{"name":"Does education fuel economic growth (new).html","filename":"Does education fuel economic growth (new).html","content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>IELTS Reading Practice</title>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\" rel=\"stylesheet\">\n<style>\n  body,html{margin:0;height:100%;font-family:'Inter',sans-serif;overflow:hidden;background:#f8fafc;color:#1e293b}\n  /* Layout & Utility */\n  .top-bar { height: 60px; background: #fff; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.03); z-index: 50; }\n  .timer { font-family: monospace; font-size: 20px; font-weight: 700; color: #dc2626; background: #fef2f2; padding: 4px 12px; border-radius: 6px; border: 1px solid #fee2e2; }\n  .progress-container { display: flex; gap: 8px; overflow-x: auto; padding: 4px; max-width: 50%; align-items: center; }\n  .progress-circle { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #cbd5e1; color: #64748b; font-size: 12px; font-weight: 600; display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0; transition: all 0.2s; user-select: none; }\n  .progress-circle.prog-correct { background: #16a34a !important; border-color: #16a34a !important; color: white !important; }\n  .progress-circle.prog-wrong { background: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }\n  .progress-circle.filled { background: #3b82f6; border-color: #2563eb; color: white; }\n  .check-btn { background: #16a34a; color: white; border: none; padding: 8px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; }\n  .check-btn:hover { background: #15803d; }\n  .game-btn { background: #06b6d4; color: #042027; border: none; padding: 8px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; margin-left:10px; }\n  .game-btn:hover { background: #0891b2; color:#fff; }\n  \n  .container{display:flex;height:calc(100vh - 60px)}\n  .pane{padding:30px;overflow-y:auto; scroll-behavior: smooth;}\n  .left{width:50%;background:#fff;border-right:1px solid #e2e8f0; position:relative;}\n  .right{flex:1;background:#f8fafc}\n  .resizer{width:6px;background:#f1f5f9;cursor:col-resize;transition:0.2s}\n  \n  /* Reading Styles */\n  .para-box{margin-bottom:30px; position: relative; }\n  .para-header-row { display: flex; justify-content: space-between; align-items: flex-end; border-bottom: 2px solid #e2e8f0; margin-bottom: 12px; padding-bottom: 8px; }\n  .para-header{font-weight:700;color:#334155;font-size:0.95em; text-transform:uppercase; letter-spacing:0.05em; background: #e2e8f0; padding: 4px 8px; border-radius: 4px; }\n  .en-text{font-size:17px;line-height:1.75;color:#334155;text-align:justify}\n  .sent { transition: background 0.2s; border-radius: 3px; padding: 0 1px; cursor: text; }\n  .sent:hover { background-color: #f1f5f9; }\n  .user-highlight { background-color: #fef08a; color: #000; box-shadow: 0 1px 2px rgba(0,0,0,0.1); cursor: pointer; border-bottom: 2px solid #facc15; }\n  .loc-highlight { background-color: #fff9c4; border-bottom: 2px solid #fbc02d; padding: 0 2px; }\n  #hl-btn { position: absolute; background: #1e293b; color: #fff; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; display: none; z-index: 100; transform: translateX(-50%); font-weight: 600; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }\n  #hl-btn::after { content: ''; position: absolute; top: 100%; left: 50%; border: 5px solid transparent; border-top-color: #1e293b; margin-left: -5px; }\n  .vocab{background:#e0f2fe;cursor:pointer;border-bottom:2px dotted #0284c7; padding:0 2px; color:#0c4a6e}\n  .hidden{display:none}\n  .vi-text{margin-top:15px;padding:15px;background:#f0fdf4;color:#334155;font-style:italic;font-size:15px;border-left:4px solid #22c55e; border-radius: 0 4px 4px 0;}\n  .vi-sent { transition: background 0.2s; }\n  .trans-btn{font-size:12px;background:#f1f5f9;color:#64748b;border:none;padding:6px 12px;border-radius:20px;margin-top:10px; cursor:pointer; font-weight: 600; transition:0.2s}\n  .trans-btn:hover{background:#e2e8f0; color:#0f172a}\n  \n  /* TFNG STYLES */\n.tfng-container { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }\n.tfng-label { cursor: pointer; }\n.tfng-label input { display: none; }\n.tfng-btn { \n    display: inline-block; \n    padding: 6px 12px; \n    border-radius: 20px; \n    border: 2px solid #cbd5e1; \n    color: #64748b; \n    font-size: 11px; \n    font-weight: 700; \n    transition: all 0.2s; \n    background: #fff; \n}\n.tfng-label:hover .tfng-btn { border-color: #6366f1; background: #eef2ff; color: #6366f1; }\n.tfng-label input:checked + .tfng-btn { \n    background: #3b82f6; \n    border-color: #3b82f6; \n    color: white; \n    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3); \n}\n/* Tr·∫°ng th√°i ch·∫•m ƒëi·ªÉm */\n.tfng-btn.correct-opt { background: #16a34a !important; border-color: #16a34a !important; color: white !important; }\n.tfng-btn.wrong-opt { background: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }\n\n  /* Questions */\n  .q-block{background:#fff;padding:20px;margin-bottom:16px;border-radius:12px;box-shadow:0 1px 3px rgba(0,0,0,0.05); border:1px solid #e2e8f0; position:relative; }\n  .q-num{font-weight:700;color:#2563eb;margin-right:8px; background:#eff6ff; padding:2px 6px; border-radius:4px; font-size:13px}\n  .q-num-s{font-weight:700;color:#2563eb;margin-right:4px; font-size:12px}\n  .drop-zone { display: inline-block; min-width: 80px; height: 28px; border-bottom: 2px solid #94a3b8; background: #f1f5f9; vertical-align: middle; text-align: center; color: #0f172a; font-weight: bold; cursor: pointer; border-radius: 4px 4px 0 0; }\n  .drop-zone.filled { background: #dcfce7; border-color: #16a34a; color: #15803d; }\n  .drop-zone.correct-zone { border-color: #16a34a; background: #dcfce7; color: #16a34a; }\n  .drop-zone.wrong-zone { border-color: #dc2626; background: #fee2e2; color: #dc2626; }\n  .drop-zone:empty::before { content: 'Drop here'; color: #94a3b8; font-weight: normal; font-size: 11px; }\n  .gap-input { border: none; border-bottom: 2px solid #cbd5e1; width: 120px; text-align: center; font-weight: 600; color: #1e293b; font-size: 15px; background: transparent; transition: 0.2s; padding: 0 4px; }\n  .gap-input:focus { outline: none; border-bottom-color: #3b82f6; background: #eff6ff; }\n  .input-correct { border-bottom: 2px solid #16a34a !important; background: #dcfce7; color: #16a34a; }\n  .input-wrong { border-bottom: 2px solid #dc2626 !important; background: #fee2e2; color: #dc2626; }\n  .ans-key { font-size: 11px; color: #fff; background: #dc2626; padding: 2px 6px; border-radius: 4px; margin-left: 4px; font-weight: bold; display: inline-block; vertical-align: middle; }\n  .loc-btn { font-size: 12px; cursor: pointer; background: transparent; border: none; opacity: 0.5; transition: 0.2s; margin-left: 6px; }\n  .loc-btn:hover { opacity: 1; transform: scale(1.1); }\n  \n  /* Headings */\n  .headings-panel { background: #fff; border: 1px solid #e2e8f0; padding: 16px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }\n  .headings-title { font-weight: 700; color: #4338ca; font-size: 14px; margin-bottom: 12px; text-transform: uppercase; border-bottom: 1px solid #e0e7ff; padding-bottom: 8px; }\n  .heading-item { padding: 8px 12px; background: #fff; border: 1px solid #cbd5e1; margin-bottom: 8px; border-radius: 8px; cursor: grab; font-size: 13px; display: flex; gap: 10px; transition: all 0.2s; align-items: start; }\n  .heading-item:hover { border-color: #4338ca; background: #eef2ff; transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }\n  .heading-item.dragging { opacity: 0.5; }\n  .heading-item.used { opacity: 0.5; background: #f1f5f9; text-decoration: line-through; pointer-events: none; border-style: dashed; }\n  .h-id { font-weight: 700; min-width: 25px; color: #4338ca; background: #e0e7ff; text-align: center; border-radius: 4px; padding: 0 4px; height: fit-content; }\n  .heading-drop { min-width: 150px; height: 36px; border: 2px dashed #94a3b8; background: #f8fafc; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #64748b; border-radius: 6px; margin-bottom: 0; transition: 0.2s; }\n  .heading-drop.filled { border-style: solid; background: #e0e7ff; color: #3730a3; border-color: #6366f1; font-weight: 700; font-size: 14px; }\n  .heading-fb { font-size: 13px; margin-left: 10px; white-space: nowrap; display: flex; gap: 6px; align-items: center; }\n  .heading-zone-wrapper { display: flex; align-items: center; flex-wrap: wrap; }\n  \n  /* MIF CIRCLES */\n  .mif-container { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }\n  .mif-label { cursor: pointer; }\n  .mif-label input { display: none; }\n  .mif-circle { width: 32px; height: 32px; border-radius: 50%; border: 2px solid #cbd5e1; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #64748b; transition: all 0.2s; background: #fff; font-size: 13px; }\n  .mif-label:hover .mif-circle { border-color: #6366f1; background: #eef2ff; color: #6366f1; }\n  .mif-label input:checked + .mif-circle { background: #6366f1; border-color: #6366f1; color: white; box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3); }\n  .mif-circle.correct-opt { background: #16a34a !important; border-color: #16a34a !important; color: white !important; }\n  .mif-circle.wrong-opt { background: #dc2626 !important; border-color: #dc2626 !important; color: white !important; }\n\n  /* Feedback */\n  .correct{color:#16a34a; font-weight: 700;} \n  .wrong{color:#dc2626; font-weight: 600;}\n  .mcq-mark { font-weight: bold; margin-left: 6px; }\n  #popup{position:fixed;background:#fff;width:320px;border-radius:12px;box-shadow:0 10px 25px -5px rgba(0,0,0,0.1);display:none;z-index:999;border:1px solid #e2e8f0; overflow:hidden}\n\n  /* --- GAME CSS EMBEDDED --- */\n  #game-view {\n    display: none;\n    position: fixed;\n    top: 60px; /* Below top-bar */\n    left: 0;\n    width: 100vw;\n    height: calc(100vh - 60px);\n    overflow-y: auto;\n    background: linear-gradient(180deg,#071024 0%, #0b1220 100%);\n    color: #e6eef6;\n    z-index: 2000;\n    padding: 24px;\n    box-sizing: border-box;\n    font-family: Inter,system-ui,Arial;\n  }\n  /* Game Variables Scope */\n  #game-view {\n    --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --success:#10b981; --muted:#94a3b8;\n    --neon-primary: rgba(6,182,212,0.95); --neon-secondary: rgba(96,165,250,0.9); --neon-warm: rgba(249,115,22,0.9);\n    --input-muted-bg: rgba(255,255,255,0.02); --input-muted-border: rgba(255,255,255,0.04); --input-muted-text: rgba(230,238,246,0.85);\n  }\n  .g-container{width:100%; max-width:1200px; margin: 0 auto;}\n  .g-header{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px;}\n  .g-h1{font-size:20px; margin:0; color:var(--accent);}\n  .g-controls{display:flex; gap:8px; align-items:center;}\n  .g-btn{background:linear-gradient(90deg,#0ea5a4,#06b6d4); border:0; color:#042027; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600;}\n  .g-layout{display:flex; gap:18px; align-items:flex-start; overflow-x:auto; padding-bottom:6px;}\n  .g-card{flex: 0 0 48%; min-width:320px; box-sizing:border-box; max-height: calc(100vh - 180px); overflow:auto; -webkit-overflow-scrolling: touch; padding:12px; background:rgba(255,255,255,0.02); border-radius:12px; border:1px solid rgba(255,255,255,0.03);}\n  .g-list{display:flex; flex-direction:column; gap:10px;}\n  .g-eng-item, .g-vie-item{display:flex; align-items:center; gap:12px; padding:12px 14px; border-radius:10px; background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03);}\n  .g-eng-left{display:flex; align-items:center; gap:12px; flex: 0 0 220px; min-width:160px;}\n  .g-index{width:36px; height:36px; border-radius:8px; background:rgba(255,255,255,0.03); display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:700;}\n\n  /* Slot */\n  .g-slot{\n    flex:1; display:flex; align-items:center; justify-content:flex-start; gap:10px; padding:12px 16px; border-radius:12px;\n    background:rgba(255,255,255,0.01); border:2px dashed rgba(255,255,255,0.03); min-height:56px; transition:all 220ms ease; cursor:pointer;\n    position:relative; overflow:visible;\n  }\n  .g-slot .inner{position:relative; z-index:3;}\n  .g-slot.correct{padding-left:12px; font-size:15px; display:flex; align-items:center; border-style:solid; border-width:2px; background:linear-gradient(180deg, rgba(16,185,129,0.03), rgba(16,185,129,0.01));}\n  .g-slot::before{\n    content:\"\"; position:absolute; inset:-4px; border-radius:16px; z-index:1;\n    background: linear-gradient(90deg, var(--neon-primary), var(--neon-secondary), var(--neon-warm));\n    filter: blur(8px); opacity:0; transform:scale(0.98); transition:opacity 220ms ease, transform 220ms ease; pointer-events:none; mix-blend-mode:screen;\n  }\n  .g-slot::after{\n    content:\"\"; position:absolute; inset:-2px; border-radius:14px; z-index:2;\n    background: linear-gradient(90deg, var(--neon-primary), var(--neon-secondary), var(--neon-warm));\n    background-size:200% 100%; opacity:0; transform:translateZ(0); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; padding:2px; transition:opacity 220ms ease; pointer-events:none;\n  }\n  .g-slot:hover::before, .g-slot:focus::before, .g-slot.active::before, .g-slot.highlight::before{ opacity:0.55; transform:scale(1); animation: neonPulse 2.6s linear infinite; }\n  .g-slot:hover::after, .g-slot:focus::after, .g-slot.active::after, .g-slot.highlight::after{ opacity:1; animation: neonMove 2.2s linear infinite; }\n  .g-slot.correct::before{ background: linear-gradient(90deg, rgba(16,185,129,0.9), rgba(96,165,250,0.06)); opacity:0.6; filter:blur(10px); }\n  .g-slot.correct::after{ background: linear-gradient(90deg, rgba(16,185,129,0.95), rgba(6,182,212,0.06)); opacity:1; }\n\n  @keyframes neonMove{ 0%{background-position:0% 50%} 100%{background-position:200% 50%} }\n  @keyframes neonPulse{ 0%{filter:blur(6px); opacity:0.45} 50%{filter:blur(12px); opacity:0.7} 100%{filter:blur(6px); opacity:0.45} }\n\n  .g-vie-list{display:flex; flex-wrap:wrap; gap:10px; padding-top:6px;}\n  .g-vie-item{cursor:grab; user-select:none; padding:8px 12px; border-radius:10px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03);}\n  .g-vie-item.dragging{opacity:0.5; transform:scale(0.98);}\n  .g-wrong{animation:shake 300ms; border-color:rgba(239,68,68,0.6);}\n  @keyframes shake{0%{transform:translateX(0)} 25%{transform:translateX(-6px)} 50%{transform:translateX(6px)} 75%{transform:translateX(-4px)} 100%{transform:translateX(0)}}\n  \n  .g-badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.02); color:var(--muted); font-weight:600;}\n  .confetti{position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; overflow:hidden; z-index: 3000;}\n  .confetti .piece{position:absolute; width:10px; height:14px; opacity:0; transform:translateY(-20px) rotate(0deg); animation:fall 1200ms linear forwards;}\n  @keyframes fall{0%{opacity:1; transform:translateY(-10vh) rotate(0deg)} 100%{opacity:1; transform:translateY(110vh) rotate(720deg)}}\n  \n  /* Flashcard */\n  .flash-wrap{perspective:1200px; width:100%; max-width:520px;}\n  .flashcard{width:100%; height:140px; position:relative; transform-style:preserve-3d; transition:transform 600ms cubic-bezier(.2,.9,.3,1); border-radius:12px; cursor:pointer;}\n  .flashcard.flipped{transform:rotateY(180deg);}\n  .flash-face{position:absolute; inset:0; backface-visibility:hidden; border-radius:12px; display:flex; align-items:center; justify-content:center; padding:18px; font-size:18px; text-align:center; box-shadow: 0 6px 18px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);}\n  .flash-face.front{background:linear-gradient(180deg, rgba(6,182,212,0.08), rgba(96,165,250,0.03)); color:#e6f9fb;}\n  .flash-face.back{transform:rotateY(180deg); background:linear-gradient(180deg, rgba(16,185,129,0.06), rgba(96,165,250,0.02)); color:#eafff0;}\n\n  /* Fill-in */\n  .fill-list{display:flex; flex-direction:column; gap:10px;}\n  .fill-row{display:flex; gap:12px; align-items:center;}\n  .fill-row .vie{flex:0 0 48%; min-width:160px; color:var(--muted);}\n  .fill-row input{\n    flex:1; padding:10px 12px; border-radius:10px; border:1px solid var(--input-muted-border);\n    background: var(--input-muted-bg); color:var(--input-muted-text); transition:box-shadow 180ms, border-color 180ms, background-color 180ms;\n    caret-color: var(--neon-primary);\n  }\n  .fill-row input:focus{ outline:none; border-color: rgba(6,182,212,0.45); box-shadow: 0 6px 18px rgba(6,182,212,0.06); background: rgba(255,255,255,0.025); }\n  .fill-row input.correct{ border-color: rgba(16,185,129,0.7); box-shadow: 0 6px 18px rgba(16,185,129,0.04); background: rgba(16,185,129,0.02); }\n  .fill-row input.wrong{ border-color: rgba(244,63,94,0.7); box-shadow: 0 6px 18px rgba(244,63,94,0.03); background: rgba(244,63,94,0.01); }\n  .correct-answer{color: #10b981; font-size:12px; font-weight:700}\n  .wrong-answer{color: #ef4444; font-size:12px; font-weight:700}\n  \n  @media (max-width:880px){ .g-layout{grid-template-columns:1fr;} .g-slot{min-width:160px;} .g-card{flex-basis:100%;} .flash-wrap{max-width:100%} }\n  \n  .mif-inline-box { margin-top: 15px; padding: 12px; background: #eef2ff; border: 1px dashed #a5b4fc; border-radius: 8px; }\n  .mif-inline-btn { display: flex; align-items: flex-start; gap: 8px; background: #fff; border: 1px solid #cbd5e1; padding: 8px 12px; border-radius: 6px; font-size: 13px; cursor: pointer; transition: 0.2s; color: #475569; line-height: 1.4; }\n  .mif-inline-btn:hover { border-color: #6366f1; background: #fafafa; }\n  .mif-inline-btn.selected { background: #6366f1; color: #fff; border-color: #6366f1; box-shadow: 0 2px 4px rgba(99,102,241,0.3); }\n  .mif-inline-btn.selected .q-num-s { color: #fff; }\n  .mif-inline-btn.hidden-by-other { display: none !important; }\n\n</style></head>\n<body>\n<div id=\"hl-btn\" onmousedown=\"applyHighlight(event)\">Highlight</div>\n\n<div class=\"top-bar\">\n    <div style=\"display:flex;align-items:center;gap:15px;\">\n        <div class=\"timer\" id=\"timer\">--:--</div>\n        <button class=\"game-btn\" onclick=\"toggleGame()\">üéÆ Play Vocab Game</button>\n    </div>\n    <div class=\"progress-container\" id=\"progressBar\"></div>\n    <button class=\"check-btn\" onclick=\"check()\">SUBMIT</button>\n</div>\n\n<!-- READING VIEW -->\n<div id=\"reading-view\" class=\"container\">\n  <div class=\"pane left\" id=\"lp\"><h2 style=\"font-size:18px; font-weight:700; color:#334155; margin-bottom:15px\">Reading Passage</h2><div class=\"reading-content\"><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph A</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p0s0\">Over the last decade, a huge <span class=\"vocab\" data-vid=\"v0\">database</span> about the lives of southwest German villagers between 1600 and 1900 has been <span class=\"vocab\" data-vid=\"v1\">compiled</span> by a team led by Professor Sheilagh Ogilvie at Cambridge University‚Äôs Faculty of Economics. </span><span class=\"sent\" data-target=\"p0s1\">It includes court records, guild ledgers, parish registers, village <span class=\"vocab\" data-vid=\"v2\">censuses</span>, tax lists and ‚Äì the most recent addition ‚Äì 9,000 handwritten inventories listing over a million personal <span class=\"vocab\" data-vid=\"v3\">possessions</span> belonging to <span class=\"vocab\" data-vid=\"v4\">ordinary</span> women and men across three centuries. </span><span class=\"sent\" data-target=\"p0s2\">Ogilvie, who discovered the inventories in the archives of two German communities 30 years ago, believes they may hold the answer to a <span class=\"vocab\" data-vid=\"v5\">conundrum</span> that has long puzzled economists: the lack of evidence for a causal link between education and a country‚Äôs economic growth. </span></p><div class=\"mif-inline-box\" data-para=\"A\">\n                        <div style=\"font-size:12px; font-weight:bold; color:#4338ca; margin-bottom:8px; text-transform:uppercase;\">Questions matching this paragraph:</div>\n                        <div style=\"display:flex; flex-direction:column; gap:6px;\">\n                        <div class=\"mif-inline-btn\" data-qid=\"14\" onclick=\"toggleInlineMif(14, 'A')\"><span class=\"q-num-s\">14.</span> <span>an explanation of the need for research to focus on individuals with a fairly consistent income</span></div><div class=\"mif-inline-btn\" data-qid=\"15\" onclick=\"toggleInlineMif(15, 'A')\"><span class=\"q-num-s\">15.</span> <span>examples of the sources the database has been compiled from</span></div><div class=\"mif-inline-btn\" data-qid=\"16\" onclick=\"toggleInlineMif(16, 'A')\"><span class=\"q-num-s\">16.</span> <span>an account of one individual‚Äôs refusal to obey an order</span></div><div class=\"mif-inline-btn\" data-qid=\"17\" onclick=\"toggleInlineMif(17, 'A')\"><span class=\"q-num-s\">17.</span> <span>a reference to a region being particularly suited to research into the link between education and economic growth</span></div><div class=\"mif-inline-btn\" data-qid=\"18\" onclick=\"toggleInlineMif(18, 'A')\"><span class=\"q-num-s\">18.</span> <span>examples of the items included in a list of personal possessions</span></div>\n                        </div>\n                    </div><button class=\"trans-btn\" onclick=\"toggleTrans('t0')\">Show Translation</button><div id=\"t0\" class=\"vi-text hidden\"><span id=\"p0s0\" class=\"vi-sent\">Trong th·∫≠p k·ª∑ qua, m·ªôt c∆° s·ªü d·ªØ li·ªáu kh·ªïng l·ªì v·ªÅ cu·ªôc s·ªëng c·ªßa d√¢n l√†ng T√¢y Nam n∆∞·ªõc ƒê·ª©c t·ª´ nƒÉm 1600 ƒë·∫øn nƒÉm 1900 ƒë√£ ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi m·ªôt nh√≥m do Gi√°o s∆∞ Sheilagh Ogilvie t·∫°i Khoa Kinh t·∫ø c·ªßa ƒê·∫°i h·ªçc Cambridge d·∫´n ƒë·∫ßu. </span><span id=\"p0s1\" class=\"vi-sent\">N√≥ bao g·ªìm h·ªì s∆° t√≤a √°n, s·ªï c√°i c·ªßa h·ªôi, s·ªï ƒëƒÉng k√Ω gi√°o x·ª©, ƒëi·ªÅu tra d√¢n s·ªë c·ªßa l√†ng, danh s√°ch thu·∫ø v√† ‚Äì b·∫£n b·ªï sung g·∫ßn ƒë√¢y nh·∫•t ‚Äì 9.000 b·∫£n ki·ªÉm k√™ vi·∫øt tay li·ªát k√™ h∆°n m·ªôt tri·ªáu t√†i s·∫£n c√° nh√¢n thu·ªôc v·ªÅ ph·ª• n·ªØ v√† nam gi·ªõi b√¨nh th∆∞·ªùng trong su·ªët ba th·∫ø k·ª∑. </span><span id=\"p0s2\" class=\"vi-sent\">Ogilvie, ng∆∞·ªùi ƒë√£ ph√°t hi·ªán ra c√°c kho l∆∞u tr·ªØ trong kho l∆∞u tr·ªØ c·ªßa hai c·ªông ƒë·ªìng ng∆∞·ªùi ƒê·ª©c c√°ch ƒë√¢y 30 nƒÉm, tin r·∫±ng ch√∫ng c√≥ th·ªÉ l√† c√¢u tr·∫£ l·ªùi cho m·ªôt c√¢u h·ªèi h√≥c b√∫a m√† t·ª´ l√¢u ƒë√£ khi·∫øn c√°c nh√† kinh t·∫ø b·ªëi r·ªëi: vi·ªác thi·∫øu b·∫±ng ch·ª©ng cho m·ªëi li√™n h·ªá nh√¢n qu·∫£ gi·ªØa gi√°o d·ª•c v√† tƒÉng tr∆∞·ªüng kinh t·∫ø c·ªßa m·ªôt qu·ªëc gia. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph B</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p1s0\">As Ogilvie explains, ‚ÄòEducation helps us to work more productively, invent better technology, and earn more ‚Ä¶ surely it must be <span class=\"vocab\" data-vid=\"v6\">critical</span> for economic growth? </span><span class=\"sent\" data-target=\"p1s1\">But, if you look back through history, there‚Äôs no evidence that having a high literacy rate made a country <span class=\"vocab\" data-vid=\"v7\">industrialise</span> earlier.‚Äô Between 1600 and 1900, England had only mediocre literacy rates by European standards, yet its economy grew fast and it was the first country to <span class=\"vocab\" data-vid=\"v7\">industrialise</span>. </span><span class=\"sent\" data-target=\"p1s2\">During this period, Germany and Scandinavia had excellent literacy rates, but their economies grew slowly and they industrialised late. ‚ÄòModern cross-country analyses have also struggled to find evidence that education causes economic growth, even though there is plenty of evidence that growth increases education,‚Äô she adds. </span></p><button class=\"trans-btn\" onclick=\"toggleTrans('t1')\">Show Translation</button><div id=\"t1\" class=\"vi-text hidden\"><span id=\"p1s0\" class=\"vi-sent\">Nh∆∞ Ogilvie gi·∫£i th√≠ch, ‚ÄòGi√°o d·ª•c gi√∫p ch√∫ng ta l√†m vi·ªác hi·ªáu qu·∫£ h∆°n, ph√°t minh ra c√¥ng ngh·ªá t·ªët h∆°n v√† ki·∫øm ƒë∆∞·ª£c nhi·ªÅu ti·ªÅn h∆°n‚Ä¶ ch·∫Øc ch·∫Øn n√≥ ph·∫£i r·∫•t quan tr·ªçng ƒë·ªëi v·ªõi tƒÉng tr∆∞·ªüng kinh t·∫ø? </span><span id=\"p1s1\" class=\"vi-sent\">Tuy nhi√™n, n·∫øu b·∫°n nh√¨n l·∫°i l·ªãch s·ª≠, kh√¥ng c√≥ b·∫±ng ch·ª©ng n√†o cho th·∫•y t·ª∑ l·ªá bi·∫øt ƒë·ªçc bi·∫øt vi·∫øt cao khi·∫øn m·ªôt qu·ªëc gia c√¥ng nghi·ªáp h√≥a s·ªõm h∆°n.‚Äô T·ª´ nƒÉm 1600 ƒë·∫øn nƒÉm 1900, n∆∞·ªõc Anh ch·ªâ c√≥ t·ª∑ l·ªá bi·∫øt ch·ªØ ·ªü m·ª©c trung b√¨nh theo ti√™u chu·∫©n ch√¢u √Çu, tuy nhi√™n n·ªÅn kinh t·∫ø n∆∞·ªõc n√†y v·∫´n tƒÉng tr∆∞·ªüng nhanh v√† l√† qu·ªëc gia ƒë·∫ßu ti√™n c√¥ng nghi·ªáp h√≥a. </span><span id=\"p1s2\" class=\"vi-sent\">Trong th·ªùi k·ª≥ n√†y, ƒê·ª©c v√† Scandinavia c√≥ t·ª∑ l·ªá bi·∫øt ch·ªØ cao, nh∆∞ng n·ªÅn kinh t·∫ø c·ªßa h·ªç tƒÉng tr∆∞·ªüng ch·∫≠m v√† c√¥ng nghi·ªáp h√≥a mu·ªôn. B√† n√≥i th√™m: ‚ÄúC√°c ph√¢n t√≠ch xuy√™n qu·ªëc gia hi·ªán ƒë·∫°i c≈©ng g·∫∑p kh√≥ khƒÉn trong vi·ªác t√¨m ra b·∫±ng ch·ª©ng cho th·∫•y gi√°o d·ª•c g√¢y ra tƒÉng tr∆∞·ªüng kinh t·∫ø, m·∫∑c d√π c√≥ r·∫•t nhi·ªÅu b·∫±ng ch·ª©ng cho th·∫•y tƒÉng tr∆∞·ªüng s·∫Ω th√∫c ƒë·∫©y gi√°o d·ª•c‚Äù. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph C</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p2s0\">In the handwritten inventories that Ogilvie is analysing are the belongings of women and men at marriage, remarriage and death. </span><span class=\"sent\" data-target=\"p2s1\">From badger skins to Bibles, sewing machines to scarlet bodices ‚Äì the villagers‚Äô entire worldly goods are included. </span><span class=\"sent\" data-target=\"p2s2\">Inventories of agricultural equipment and craft tools reveal economic activities; ownership of books and education-related objects like pens and slates suggests how people learned. </span><span class=\"sent\" data-target=\"p2s3\">In addition, the tax lists included in the <span class=\"vocab\" data-vid=\"v0\">database</span> record the value of farms, workshops, assets and debts; signatures and people‚Äôs estimates of their age indicate literacy and numeracy levels; and court records reveal obstacles (such as the activities of the guilds*) that stifled industry. </span><span class=\"sent\" data-target=\"p2s4\">Previous studies usually had just one way of linking education with economic growth ‚Äì the presence of schools and printing presses, perhaps, or school <span class=\"vocab\" data-vid=\"v8\">enrolment</span>, or the ability to sign names. </span><span class=\"sent\" data-target=\"p2s5\">According to Ogilvie, the <span class=\"vocab\" data-vid=\"v0\">database</span> provides multiple indicators for the same individuals, making it possible to analyse links between literacy, numeracy, wealth, and <span class=\"vocab\" data-vid=\"v9\">industriousness</span>, for individual women and men over the long term. </span></p><div class=\"mif-inline-box\" data-para=\"C\">\n                        <div style=\"font-size:12px; font-weight:bold; color:#4338ca; margin-bottom:8px; text-transform:uppercase;\">Questions matching this paragraph:</div>\n                        <div style=\"display:flex; flex-direction:column; gap:6px;\">\n                        <div class=\"mif-inline-btn\" data-qid=\"14\" onclick=\"toggleInlineMif(14, 'C')\"><span class=\"q-num-s\">14.</span> <span>an explanation of the need for research to focus on individuals with a fairly consistent income</span></div><div class=\"mif-inline-btn\" data-qid=\"15\" onclick=\"toggleInlineMif(15, 'C')\"><span class=\"q-num-s\">15.</span> <span>examples of the sources the database has been compiled from</span></div><div class=\"mif-inline-btn\" data-qid=\"16\" onclick=\"toggleInlineMif(16, 'C')\"><span class=\"q-num-s\">16.</span> <span>an account of one individual‚Äôs refusal to obey an order</span></div><div class=\"mif-inline-btn\" data-qid=\"17\" onclick=\"toggleInlineMif(17, 'C')\"><span class=\"q-num-s\">17.</span> <span>a reference to a region being particularly suited to research into the link between education and economic growth</span></div><div class=\"mif-inline-btn\" data-qid=\"18\" onclick=\"toggleInlineMif(18, 'C')\"><span class=\"q-num-s\">18.</span> <span>examples of the items included in a list of personal possessions</span></div>\n                        </div>\n                    </div><button class=\"trans-btn\" onclick=\"toggleTrans('t2')\">Show Translation</button><div id=\"t2\" class=\"vi-text hidden\"><span id=\"p2s0\" class=\"vi-sent\">Trong b·∫£n ki·ªÉm k√™ vi·∫øt tay m√† Ogilvie ƒëang ph√¢n t√≠ch l√† ƒë·ªì ƒë·∫°c c·ªßa ph·ª• n·ªØ v√† ƒë√†n √¥ng khi k·∫øt h√¥n, t√°i h√¥n v√† qua ƒë·ªùi. </span><span id=\"p2s1\" class=\"vi-sent\">T·ª´ da l·ª≠ng ƒë·∫øn Kinh th√°nh, m√°y kh√¢u cho ƒë·∫øn √°o l√≥t m√†u ƒë·ªè t∆∞∆°i - bao g·ªìm to√†n b·ªô h√†ng h√≥a tr·∫ßn th·∫ø c·ªßa d√¢n l√†ng. </span><span id=\"p2s2\" class=\"vi-sent\">T·ªìn kho thi·∫øt b·ªã n√¥ng nghi·ªáp, d·ª•ng c·ª• th·ªß c√¥ng ph·∫£n √°nh ho·∫°t ƒë·ªông kinh t·∫ø; quy·ªÅn s·ªü h·ªØu s√°ch v√† c√°c ƒë·ªì v·∫≠t li√™n quan ƒë·∫øn gi√°o d·ª•c nh∆∞ b√∫t v√† b·∫£ng cho th·∫•y con ng∆∞·ªùi h·ªçc t·∫≠p nh∆∞ th·∫ø n√†o. </span><span id=\"p2s3\" class=\"vi-sent\">Ngo√†i ra, danh m·ª•c thu·∫ø c√≥ trong c∆° s·ªü d·ªØ li·ªáu ghi nh·∫≠n gi√° tr·ªã trang tr·∫°i, nh√† x∆∞·ªüng, t√†i s·∫£n v√† c√°c kho·∫£n n·ª£; ch·ªØ k√Ω v√† ∆∞·ªõc t√≠nh c·ªßa m·ªçi ng∆∞·ªùi v·ªÅ ƒë·ªô tu·ªïi c·ªßa h·ªç cho th·∫•y tr√¨nh ƒë·ªô ƒë·ªçc vi·∫øt v√† t√≠nh to√°n; v√† h·ªì s∆° t√≤a √°n ti·∫øt l·ªô nh·ªØng tr·ªü ng·∫°i (ch·∫≥ng h·∫°n nh∆∞ ho·∫°t ƒë·ªông c·ªßa c√°c bang h·ªôi*) ƒë√£ b√≥p ngh·∫πt ng√†nh c√¥ng nghi·ªáp. </span><span id=\"p2s4\" class=\"vi-sent\">C√°c nghi√™n c·ª©u tr∆∞·ªõc ƒë√¢y th∆∞·ªùng ch·ªâ c√≥ m·ªôt c√°ch li√™n k·∫øt gi√°o d·ª•c v·ªõi tƒÉng tr∆∞·ªüng kinh t·∫ø ‚Äì c√≥ l·∫Ω l√† s·ª± hi·ªán di·ªán c·ªßa tr∆∞·ªùng h·ªçc v√† nh√† in, ho·∫∑c s·ªë l∆∞·ª£ng tuy·ªÉn sinh v√†o tr∆∞·ªùng, ho·∫∑c kh·∫£ nƒÉng k√Ω t√™n. </span><span id=\"p2s5\" class=\"vi-sent\">Theo Ogilvie, c∆° s·ªü d·ªØ li·ªáu cung c·∫•p nhi·ªÅu ch·ªâ s·ªë cho c√πng m·ªôt c√° nh√¢n, gi√∫p ph√¢n t√≠ch m·ªëi li√™n h·ªá gi·ªØa kh·∫£ nƒÉng ƒë·ªçc vi·∫øt, t√≠nh to√°n, s·ª± gi√†u c√≥ v√† s·ª± c·∫ßn c√π c·ªßa t·ª´ng c√° nh√¢n ph·ª• n·ªØ v√† nam gi·ªõi trong th·ªùi gian d√†i. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph D</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p3s0\">Ogilvie and her team have been building the vast <span class=\"vocab\" data-vid=\"v0\">database</span> of material <span class=\"vocab\" data-vid=\"v3\">possessions</span> on top of their full <span class=\"vocab\" data-vid=\"v10\">demographic reconstruction</span> of the people who lived in these two German communities. ‚ÄòWe can follow the same people ‚Äì and their <span class=\"vocab\" data-vid=\"v11\">descendants</span> ‚Äì across 300 years of educational and economic change,‚Äô she says. </span><span class=\"sent\" data-target=\"p3s1\">Individual lives have unfolded before their eyes. </span><span class=\"sent\" data-target=\"p3s2\">Stories like that of the 24-year-olds Ana Regina and Magdalena Riethm√ºllerin, who were chastised in 1707 for reading books in church instead of listening to the sermon. ‚ÄòThis tells us they were continuing to develop their reading skills at least a decade after leaving school,‚Äô explains Ogilvie. </span><span class=\"sent\" data-target=\"p3s3\">The <span class=\"vocab\" data-vid=\"v0\">database</span> also reveals the case of Juliana Schweickherdt, a 50-year-old spinster living in the small Black Forest community of Wildberg, who was <span class=\"vocab\" data-vid=\"v12\">reprimanded</span> in 1752 by the local weavers‚Äô guild for ‚Äòweaving cloth and combing wool, counter to the guide ordinance‚Äô. </span><span class=\"sent\" data-target=\"p3s4\">When Juliana continued taking jobs reserved for male guild members, she was summoned before the guild court and told to pay a fine <span class=\"vocab\" data-vid=\"v13\">equivalent</span> to one third of a servant‚Äôs annual wage. </span><span class=\"sent\" data-target=\"p3s5\">It was a small act of defiance by today‚Äôs standards, but it reflects a time when laws in Germany and elsewhere regulated people‚Äôs access to labour markets. </span><span class=\"sent\" data-target=\"p3s6\">The <span class=\"vocab\" data-vid=\"v14\">dominance</span> of guilds not only prevented people from using their skills, but also held back even the simplest industrial innovation. </span></p><div class=\"mif-inline-box\" data-para=\"D\">\n                        <div style=\"font-size:12px; font-weight:bold; color:#4338ca; margin-bottom:8px; text-transform:uppercase;\">Questions matching this paragraph:</div>\n                        <div style=\"display:flex; flex-direction:column; gap:6px;\">\n                        <div class=\"mif-inline-btn\" data-qid=\"14\" onclick=\"toggleInlineMif(14, 'D')\"><span class=\"q-num-s\">14.</span> <span>an explanation of the need for research to focus on individuals with a fairly consistent income</span></div><div class=\"mif-inline-btn\" data-qid=\"15\" onclick=\"toggleInlineMif(15, 'D')\"><span class=\"q-num-s\">15.</span> <span>examples of the sources the database has been compiled from</span></div><div class=\"mif-inline-btn\" data-qid=\"16\" onclick=\"toggleInlineMif(16, 'D')\"><span class=\"q-num-s\">16.</span> <span>an account of one individual‚Äôs refusal to obey an order</span></div><div class=\"mif-inline-btn\" data-qid=\"17\" onclick=\"toggleInlineMif(17, 'D')\"><span class=\"q-num-s\">17.</span> <span>a reference to a region being particularly suited to research into the link between education and economic growth</span></div><div class=\"mif-inline-btn\" data-qid=\"18\" onclick=\"toggleInlineMif(18, 'D')\"><span class=\"q-num-s\">18.</span> <span>examples of the items included in a list of personal possessions</span></div>\n                        </div>\n                    </div><button class=\"trans-btn\" onclick=\"toggleTrans('t3')\">Show Translation</button><div id=\"t3\" class=\"vi-text hidden\"><span id=\"p3s0\" class=\"vi-sent\">Ogilvie v√† nh√≥m c·ªßa c√¥ ·∫•y ƒë√£ v√† ƒëang x√¢y d·ª±ng c∆° s·ªü d·ªØ li·ªáu kh·ªïng l·ªì v·ªÅ t√†i s·∫£n v·∫≠t ch·∫•t d·ª±a tr√™n vi·ªác t√°i thi·∫øt to√†n b·ªô nh√¢n kh·∫©u h·ªçc c·ªßa h·ªç v·ªÅ nh·ªØng ng∆∞·ªùi s·ªëng ·ªü hai c·ªông ƒë·ªìng ng∆∞·ªùi ƒê·ª©c n√†y. C√¥ n√≥i: ‚ÄúCh√∫ng ta c√≥ th·ªÉ theo d√µi nh·ªØng ng∆∞·ªùi gi·ªëng nhau - v√† con ch√°u c·ªßa h·ªç - trong su·ªët 300 nƒÉm thay ƒë·ªïi v·ªÅ gi√°o d·ª•c v√† kinh t·∫ø‚Äù. </span><span id=\"p3s1\" class=\"vi-sent\">Cu·ªôc s·ªëng c√° nh√¢n ƒë√£ m·ªü ra tr∆∞·ªõc m·∫Øt h·ªç. </span><span id=\"p3s2\" class=\"vi-sent\">Nh·ªØng c√¢u chuy·ªán nh∆∞ c√¢u chuy·ªán c·ªßa Ana Regina v√† Magdalena Riethm√ºllerin, 24 tu·ªïi, b·ªã tr·ª´ng ph·∫°t v√†o nƒÉm 1707 v√¨ ƒë·ªçc s√°ch trong nh√† th·ªù thay v√¨ nghe thuy·∫øt ph√°p. Ogilvie gi·∫£i th√≠ch: ‚Äúƒêi·ªÅu n√†y cho ch√∫ng t√¥i bi·∫øt r·∫±ng h·ªç ƒëang ti·∫øp t·ª•c ph√°t tri·ªÉn k·ªπ nƒÉng ƒë·ªçc c·ªßa m√¨nh √≠t nh·∫•t m·ªôt th·∫≠p k·ª∑ sau khi r·ªùi gh·∫ø nh√† tr∆∞·ªùng‚Äù. </span><span id=\"p3s3\" class=\"vi-sent\">C∆° s·ªü d·ªØ li·ªáu c≈©ng ti·∫øt l·ªô tr∆∞·ªùng h·ª£p c·ªßa Juliana Schweickherdt, m·ªôt ph·ª• n·ªØ ƒë·ªôc th√¢n 50 tu·ªïi s·ªëng trong c·ªông ƒë·ªìng Wildberg nh·ªè thu·ªôc R·ª´ng ƒêen, ng∆∞·ªùi ƒë√£ b·ªã h·ªôi th·ª£ d·ªát ƒë·ªãa ph∆∞∆°ng khi·ªÉn tr√°ch v√†o nƒÉm 1752 v√¨ 'd·ªát v·∫£i v√† ch·∫£i len, ƒëi ng∆∞·ª£c l·∫°i s·∫Øc l·ªánh h∆∞·ªõng d·∫´n'. </span><span id=\"p3s4\" class=\"vi-sent\">Khi Juliana ti·∫øp t·ª•c nh·∫≠n nh·ªØng c√¥ng vi·ªác d√†nh ri√™ng cho c√°c th√†nh vi√™n nam c·ªßa bang h·ªôi, c√¥ ƒë√£ b·ªã tri·ªáu t·∫≠p tr∆∞·ªõc t√≤a √°n bang h·ªôi v√† y√™u c·∫ßu ph·∫£i n·ªôp ph·∫°t t∆∞∆°ng ƒë∆∞∆°ng 1/3 m·ª©c l∆∞∆°ng h√†ng nƒÉm c·ªßa ng∆∞·ªùi h·∫ßu. </span><span id=\"p3s5\" class=\"vi-sent\">ƒê√≥ l√† m·ªôt h√†nh ƒë·ªông th√°ch th·ª©c nh·ªè so v·ªõi c√°c ti√™u chu·∫©n ng√†y nay, nh∆∞ng n√≥ ph·∫£n √°nh th·ªùi k·ª≥ m√† lu·∫≠t ph√°p ·ªü ƒê·ª©c v√† c√°c n∆°i kh√°c quy ƒë·ªãnh vi·ªác ti·∫øp c·∫≠n th·ªã tr∆∞·ªùng lao ƒë·ªông c·ªßa ng∆∞·ªùi d√¢n. </span><span id=\"p3s6\" class=\"vi-sent\">S·ª± th·ªëng tr·ªã c·ªßa c√°c bang h·ªôi kh√¥ng ch·ªâ ngƒÉn c·∫£n m·ªçi ng∆∞·ªùi s·ª≠ d·ª•ng k·ªπ nƒÉng c·ªßa h·ªç m√† c√≤n c·∫£n tr·ªü ngay c·∫£ s·ª± ƒë·ªïi m·ªõi c√¥ng nghi·ªáp ƒë∆°n gi·∫£n nh·∫•t. </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph E</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p4s0\">The data-gathering phase of the project has been completed and now, according to Ogilvie, it is time ‚Äòto ask the big questions‚Äô. </span><span class=\"sent\" data-target=\"p4s1\">One way to look at whether education causes economic growth is to ‚Äòhold wealth constant‚Äô. </span><span class=\"sent\" data-target=\"p4s2\">This involves following the lives of different people with the same level of wealth over a period of time. </span><span class=\"sent\" data-target=\"p4s3\">If wealth is constant, it is possible to discover whether education was, for example, linked to the <span class=\"vocab\" data-vid=\"v15\">cultivation</span> of new crops, or to the <span class=\"vocab\" data-vid=\"v16\">adoption</span> of industrial innovations like sewing machines. </span><span class=\"sent\" data-target=\"p4s4\">The team will also ask what aspect of education helped people engage more with productive and innovative activities. </span><span class=\"sent\" data-target=\"p4s5\">Was it, for instance, literacy, numeracy, book ownership, years of schooling? </span><span class=\"sent\" data-target=\"p4s6\">Was there a threshold level ‚Äì a tipping point ‚Äì that needed to be reached to affect <span class=\"vocab\" data-vid=\"v17\">economic performance</span>? </span></p><div class=\"mif-inline-box\" data-para=\"E\">\n                        <div style=\"font-size:12px; font-weight:bold; color:#4338ca; margin-bottom:8px; text-transform:uppercase;\">Questions matching this paragraph:</div>\n                        <div style=\"display:flex; flex-direction:column; gap:6px;\">\n                        <div class=\"mif-inline-btn\" data-qid=\"14\" onclick=\"toggleInlineMif(14, 'E')\"><span class=\"q-num-s\">14.</span> <span>an explanation of the need for research to focus on individuals with a fairly consistent income</span></div><div class=\"mif-inline-btn\" data-qid=\"15\" onclick=\"toggleInlineMif(15, 'E')\"><span class=\"q-num-s\">15.</span> <span>examples of the sources the database has been compiled from</span></div><div class=\"mif-inline-btn\" data-qid=\"16\" onclick=\"toggleInlineMif(16, 'E')\"><span class=\"q-num-s\">16.</span> <span>an account of one individual‚Äôs refusal to obey an order</span></div><div class=\"mif-inline-btn\" data-qid=\"17\" onclick=\"toggleInlineMif(17, 'E')\"><span class=\"q-num-s\">17.</span> <span>a reference to a region being particularly suited to research into the link between education and economic growth</span></div><div class=\"mif-inline-btn\" data-qid=\"18\" onclick=\"toggleInlineMif(18, 'E')\"><span class=\"q-num-s\">18.</span> <span>examples of the items included in a list of personal possessions</span></div>\n                        </div>\n                    </div><button class=\"trans-btn\" onclick=\"toggleTrans('t4')\">Show Translation</button><div id=\"t4\" class=\"vi-text hidden\"><span id=\"p4s0\" class=\"vi-sent\">Giai ƒëo·∫°n thu th·∫≠p d·ªØ li·ªáu c·ªßa d·ª± √°n ƒë√£ ho√†n th√†nh v√† b√¢y gi·ªù, theo Ogilvie, ƒë√£ ƒë·∫øn l√∫c ‚Äúƒë·∫∑t nh·ªØng c√¢u h·ªèi l·ªõn‚Äù. </span><span id=\"p4s1\" class=\"vi-sent\">M·ªôt c√°ch ƒë·ªÉ xem li·ªáu gi√°o d·ª•c c√≥ t√°c ƒë·ªông ƒë·∫øn tƒÉng tr∆∞·ªüng kinh t·∫ø hay kh√¥ng l√† ‚Äúgi·ªØ s·ª± gi√†u c√≥ kh√¥ng ƒë·ªïi‚Äù. </span><span id=\"p4s2\" class=\"vi-sent\">ƒêi·ªÅu n√†y li√™n quan ƒë·∫øn vi·ªác theo d√µi cu·ªôc s·ªëng c·ªßa nh·ªØng ng∆∞·ªùi kh√°c nhau v·ªõi c√πng m·ª©c ƒë·ªô gi√†u c√≥ trong m·ªôt kho·∫£ng th·ªùi gian. </span><span id=\"p4s3\" class=\"vi-sent\">N·∫øu s·ª± gi√†u c√≥ l√† kh√¥ng ƒë·ªïi, th√¨ c√≥ th·ªÉ kh√°m ph√° xem li·ªáu gi√°o d·ª•c c√≥ li√™n quan ƒë·∫øn vi·ªác tr·ªìng c√°c lo·∫°i c√¢y tr·ªìng m·ªõi hay v·ªõi vi·ªác √°p d·ª•ng c√°c c·∫£i ti·∫øn c√¥ng nghi·ªáp nh∆∞ m√°y may hay kh√¥ng. </span><span id=\"p4s4\" class=\"vi-sent\">Nh√≥m c≈©ng s·∫Ω h·ªèi kh√≠a c·∫°nh n√†o c·ªßa gi√°o d·ª•c ƒë√£ gi√∫p m·ªçi ng∆∞·ªùi tham gia nhi·ªÅu h∆°n v√†o c√°c ho·∫°t ƒë·ªông hi·ªáu qu·∫£ v√† ƒë·ªïi m·ªõi. </span><span id=\"p4s5\" class=\"vi-sent\">Ch·∫≥ng h·∫°n, ƒë√≥ c√≥ ph·∫£i l√† kh·∫£ nƒÉng ƒë·ªçc vi·∫øt, t√≠nh to√°n, quy·ªÅn s·ªü h·ªØu s√°ch, s·ªë nƒÉm ƒëi h·ªçc kh√¥ng? </span><span id=\"p4s6\" class=\"vi-sent\">C√≥ m·ªôt ng∆∞·ª°ng n√†o ƒë√≥ ‚Äì m·ªôt ƒëi·ªÉm t·ªõi h·∫°n ‚Äì c·∫ßn ƒë·∫°t t·ªõi ƒë·ªÉ t√°c ƒë·ªông ƒë·∫øn hi·ªáu qu·∫£ kinh t·∫ø kh√¥ng? </span></div></div><div class=\"para-box\"><div class=\"para-header-row\"><div class=\"para-header\">Paragraph F</div></div><p class=\"en-text\"><span class=\"sent\" data-target=\"p5s0\">Ogilvie hopes to start finding answers to these questions over the next few years. </span><span class=\"sent\" data-target=\"p5s1\">One thing is already clear, she says: the relationship between education and economic growth is far from straightforward. ‚ÄòGerman-speaking central Europe is an excellent laboratory for testing theories of economic growth,‚Äô she explains. </span><span class=\"sent\" data-target=\"p5s2\">Between 1600 and 1900, literacy rates and book ownership were high and yet the region remained poor. </span><span class=\"sent\" data-target=\"p5s3\">It was also the case that local guilds and <span class=\"vocab\" data-vid=\"v18\">merchant</span> associations were extremely powerful and legislated against anything that <span class=\"vocab\" data-vid=\"v19\">undermined</span> their monopolies. </span><span class=\"sent\" data-target=\"p5s4\">In villages throughout the region, guilds blocked labour migration and resisted changes that might reduce their influence. ‚ÄòEarly findings suggest that the potential benefits of education for the economy can be held back by other <span class=\"vocab\" data-vid=\"v20\">barriers</span>, and this has implications for today,‚Äô says Ogilvie. ‚ÄòHuge amounts are spent improving education in developing countries, but this spending can fail to deliver economic growth if <span class=\"vocab\" data-vid=\"v21\">restrictions</span> block people ‚Äì especially women and the poor ‚Äì from using their education in economically productive ways. </span><span class=\"sent\" data-target=\"p5s5\">If economic institutions are poorly set up, for instance, education can‚Äôt lead to growth.‚Äô </span></p><div class=\"mif-inline-box\" data-para=\"F\">\n                        <div style=\"font-size:12px; font-weight:bold; color:#4338ca; margin-bottom:8px; text-transform:uppercase;\">Questions matching this paragraph:</div>\n                        <div style=\"display:flex; flex-direction:column; gap:6px;\">\n                        <div class=\"mif-inline-btn\" data-qid=\"14\" onclick=\"toggleInlineMif(14, 'F')\"><span class=\"q-num-s\">14.</span> <span>an explanation of the need for research to focus on individuals with a fairly consistent income</span></div><div class=\"mif-inline-btn\" data-qid=\"15\" onclick=\"toggleInlineMif(15, 'F')\"><span class=\"q-num-s\">15.</span> <span>examples of the sources the database has been compiled from</span></div><div class=\"mif-inline-btn\" data-qid=\"16\" onclick=\"toggleInlineMif(16, 'F')\"><span class=\"q-num-s\">16.</span> <span>an account of one individual‚Äôs refusal to obey an order</span></div><div class=\"mif-inline-btn\" data-qid=\"17\" onclick=\"toggleInlineMif(17, 'F')\"><span class=\"q-num-s\">17.</span> <span>a reference to a region being particularly suited to research into the link between education and economic growth</span></div><div class=\"mif-inline-btn\" data-qid=\"18\" onclick=\"toggleInlineMif(18, 'F')\"><span class=\"q-num-s\">18.</span> <span>examples of the items included in a list of personal possessions</span></div>\n                        </div>\n                    </div><button class=\"trans-btn\" onclick=\"toggleTrans('t5')\">Show Translation</button><div id=\"t5\" class=\"vi-text hidden\"><span id=\"p5s0\" class=\"vi-sent\">Ogilvie hy v·ªçng s·∫Ω b·∫Øt ƒë·∫ßu t√¨m ra c√¢u tr·∫£ l·ªùi cho nh·ªØng c√¢u h·ªèi n√†y trong v√†i nƒÉm t·ªõi. </span><span id=\"p5s1\" class=\"vi-sent\">B√† n√≥i c√≥ m·ªôt ƒëi·ªÅu ƒë√£ r√µ r√†ng: m·ªëi quan h·ªá gi·ªØa gi√°o d·ª•c v√† tƒÉng tr∆∞·ªüng kinh t·∫ø kh√¥ng h·ªÅ ƒë∆°n gi·∫£n. B√† gi·∫£i th√≠ch: ‚ÄúTrung √Çu n√≥i ti·∫øng ƒê·ª©c l√† m·ªôt ph√≤ng th√≠ nghi·ªám tuy·ªát v·ªùi ƒë·ªÉ ki·ªÉm tra c√°c l√Ω thuy·∫øt v·ªÅ tƒÉng tr∆∞·ªüng kinh t·∫ø‚Äù. </span><span id=\"p5s2\" class=\"vi-sent\">T·ª´ nƒÉm 1600 ƒë·∫øn nƒÉm 1900, t·ª∑ l·ªá bi·∫øt ch·ªØ v√† s·ªü h·ªØu s√°ch r·∫•t cao nh∆∞ng khu v·ª±c n√†y v·∫´n c√≤n ngh√®o. </span><span id=\"p5s3\" class=\"vi-sent\">ƒê√≥ c≈©ng l√† tr∆∞·ªùng h·ª£p c√°c hi·ªáp h·ªôi v√† hi·ªáp h·ªôi th∆∞∆°ng gia ƒë·ªãa ph∆∞∆°ng c·ª±c k·ª≥ m·∫°nh m·∫Ω v√† c√≥ lu·∫≠t ch·ªëng l·∫°i b·∫•t c·ª© ƒëi·ªÅu g√¨ l√†m suy y·∫øu s·ª± ƒë·ªôc quy·ªÅn c·ªßa h·ªç. </span><span id=\"p5s4\" class=\"vi-sent\">T·∫°i c√°c ng√¥i l√†ng kh·∫Øp v√πng, c√°c ph∆∞·ªùng h·ªôi ngƒÉn ch·∫∑n s·ª± di c∆∞ c·ªßa lao ƒë·ªông v√† ch·ªëng l·∫°i nh·ªØng thay ƒë·ªïi c√≥ th·ªÉ l√†m gi·∫£m ·∫£nh h∆∞·ªüng c·ªßa h·ªç. Ogilvie n√≥i: ‚ÄúNh·ªØng ph√°t hi·ªán ban ƒë·∫ßu cho th·∫•y nh·ªØng l·ª£i √≠ch ti·ªÅm nƒÉng c·ªßa gi√°o d·ª•c ƒë·ªëi v·ªõi n·ªÅn kinh t·∫ø c√≥ th·ªÉ b·ªã c·∫£n tr·ªü b·ªüi c√°c r√†o c·∫£n kh√°c v√† ƒëi·ªÅu n√†y c√≥ √Ω nghƒ©a cho ƒë·∫øn ng√†y nay‚Äù. ‚ÄòS·ªë ti·ªÅn kh·ªïng l·ªì ƒë∆∞·ª£c chi ƒë·ªÉ c·∫£i thi·ªán gi√°o d·ª•c ·ªü c√°c n∆∞·ªõc ƒëang ph√°t tri·ªÉn, nh∆∞ng kho·∫£n chi n√†y c√≥ th·ªÉ kh√¥ng mang l·∫°i tƒÉng tr∆∞·ªüng kinh t·∫ø n·∫øu c√°c h·∫°n ch·∫ø ngƒÉn c·∫£n ng∆∞·ªùi d√¢n ‚Äì ƒë·∫∑c bi·ªát l√† ph·ª• n·ªØ v√† ng∆∞·ªùi ngh√®o ‚Äì s·ª≠ d·ª•ng gi√°o d·ª•c c·ªßa h·ªç theo nh·ªØng c√°ch hi·ªáu qu·∫£ v·ªÅ m·∫∑t kinh t·∫ø. </span><span id=\"p5s5\" class=\"vi-sent\">V√≠ d·ª•, n·∫øu c√°c th·ªÉ ch·∫ø kinh t·∫ø ƒë∆∞·ª£c thi·∫øt l·∫≠p k√©m th√¨ gi√°o d·ª•c kh√¥ng th·ªÉ d·∫´n ƒë·∫øn tƒÉng tr∆∞·ªüng.‚Äù </span></div></div></div></div>\n  <div class=\"resizer\" id=\"rs\"></div>\n  <div class=\"pane right\"><h2 style=\"font-size:18px; font-weight:700; color:#334155; margin-bottom:15px\">Questions</h2><div id=\"headingsArea\"></div><div id=\"qs\"></div></div>\n</div>\n\n<!-- GAME VIEW (Hidden by default) -->\n<div id=\"game-view\">\n  <div class=\"g-container\">\n    <header class=\"g-header\">\n      <h1 class=\"g-h1\">Vocabulary Matching Game</h1>\n      <div class=\"g-controls\">\n        <div class=\"g-badge\" id=\"score\">ƒê√∫ng: 0 / 0</div>\n        <button class=\"g-btn\" id=\"shuffleBtn\">Tr·ªôn</button>\n        <button class=\"g-btn\" id=\"resetBtn\">L√†m l·∫°i</button>\n        <button class=\"g-btn\" style=\"background:linear-gradient(90deg,#ef4444,#dc2626);color:#fff\" onclick=\"toggleGame()\">Close Game</button>\n      </div>\n    </header>\n\n    <section class=\"g-card\" style=\"margin-bottom:12px;\">\n      <h3 style=\"margin-top:0; color:var(--accent)\">Flashcards √în T·∫≠p</h3>\n      <div style=\"display:flex; gap:12px; align-items:center; flex-wrap:wrap;\">\n        <div class=\"flash-wrap\">\n          <div id=\"flashcard\" class=\"flashcard\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\">\n            <div class=\"flash-face front\" id=\"flashFront\">Nh·∫•n Next ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>\n            <div class=\"flash-face back\" id=\"flashBack\">Back</div>\n          </div>\n        </div>\n        <div style=\"display:flex; flex-direction:column; gap:8px;\">\n          <div style=\"display:flex; gap:8px;\">\n            <button class=\"g-btn\" id=\"prevCard\">Prev</button>\n            <button class=\"g-btn\" id=\"flipCard\">Flip</button>\n            <button class=\"g-btn\" id=\"nextCard\">Next</button>\n          </div>\n          <div style=\"display:flex; gap:8px;\">\n            <button class=\"g-btn\" id=\"autoPlay\">Auto</button>\n            <button class=\"g-btn\" id=\"showBoth\">Show Both</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"small\" style=\"margin-top:8px; color:var(--muted); font-size:13px\">Nh·∫•n flashcard ƒë·ªÉ l·∫≠t. Auto s·∫Ω t·ª± chuy·ªÉn sau 2s. Show Both hi·ªÉn th·ªã c·∫£ 2 m·∫∑t t·∫°m th·ªùi.</div>\n    </section>\n\n    <section class=\"g-layout\">\n      <div class=\"g-card\">\n        <h3 style=\"margin-top:0; color:var(--accent)\">Ph·∫ßn 1 Matching</h3>\n        <div class=\"small\" style=\"color:var(--muted); font-size:13px\">K√©o nghƒ©a v√†o √¥ t∆∞∆°ng ·ª©ng. Ho·∫∑c ch·∫°m ƒë·ªÉ ch·ªçn r·ªìi ch·∫°m v√†o √¥.</div>\n        <div class=\"g-list\" id=\"engList\" style=\"margin-top:12px;\"></div>\n      </div>\n      <div class=\"g-card\">\n        <h3 style=\"margin-top:0; color:var(--accent)\">Ph·∫ßn 2 Vietnamese</h3>\n        <div class=\"g-vie-list\" id=\"vieList\" style=\"margin-top:12px;\"></div>\n      </div>\n    </section>\n\n    <section class=\"g-card\" style=\"margin-top:12px; margin-bottom: 50px;\">\n      <h3 style=\"margin-top:0; color:var(--accent)\">B√†i ƒêi·ªÅn Ch·ªØ</h3>\n      <div class=\"small\" style=\"color:var(--muted); font-size:13px\">B√™n tr√°i l√† ti·∫øng Vi·ªát, b√™n ph·∫£i h·ªçc sinh ƒëi·ªÅn ti·∫øng Anh. Nh·∫•n Ki·ªÉm tra ƒë·ªÉ ch·∫•m.</div>\n      <div style=\"margin-top:10px;\">\n        <div class=\"fill-list\" id=\"fillList\"></div>\n        <div style=\"margin-top:10px; display:flex; gap:8px; align-items:center;\">\n          <button class=\"g-btn\" id=\"checkFill\">Ki·ªÉm tra</button>\n          <button class=\"g-btn\" id=\"showAnswers\">Hi·ªán ƒë√°p √°n</button>\n          <button class=\"g-btn\" id=\"resetFill\">L√†m l·∫°i</button>\n          <div class=\"small\" id=\"fillScore\" style=\"align-self:center; color:var(--muted); font-size:13px\">ƒêi·ªÉm: 0 / 0</div>\n        </div>\n      </div>\n    </section>\n  </div>\n</div>\n\n<div id=\"popup\"></div>\n<div class=\"confetti\" id=\"confetti\"></div>\n\n<script>\nconst qs=[{\"id\":14,\"type\":\"mif\",\"text\":\"an explanation of the need for research to focus on individuals with a fairly consistent income\",\"options\":[],\"correctAnswer\":\"E\",\"location\":\"\",\"_orderId\":14,\"mifTargets\":[\"E\",\"A\",\"D\",\"F\",\"C\"]},{\"id\":15,\"type\":\"mif\",\"text\":\"examples of the sources the database has been compiled from\",\"options\":[],\"correctAnswer\":\"A\",\"location\":\"\",\"_orderId\":15,\"mifTargets\":[\"E\",\"A\",\"D\",\"F\",\"C\"]},{\"id\":16,\"type\":\"mif\",\"text\":\"an account of one individual‚Äôs refusal to obey an order\",\"options\":[],\"correctAnswer\":\"D\",\"location\":\"\",\"_orderId\":16,\"mifTargets\":[\"E\",\"A\",\"D\",\"F\",\"C\"]},{\"id\":17,\"type\":\"mif\",\"text\":\"a reference to a region being particularly suited to research into the link between education and economic growth\",\"options\":[],\"correctAnswer\":\"F\",\"location\":\"\",\"_orderId\":17,\"mifTargets\":[\"E\",\"A\",\"D\",\"F\",\"C\"]},{\"id\":18,\"type\":\"mif\",\"text\":\"examples of the items included in a list of personal possessions\",\"options\":[],\"correctAnswer\":\"C\",\"location\":\"\",\"_orderId\":18,\"mifTargets\":[\"E\",\"A\",\"D\",\"F\",\"C\"]},{\"type\":\"gap-fill-block\",\"id\":19,\"text\":\"Choose ONE WORD from the passage for each answer.\\nWrite your answers in boxes 19-22 on your answer sheet.\\nDemographic reconstruction of two German communities\\nThe database that Ogilvie and her team has compiled sheds light on the lives of a range of individuals, as well as those of their 19 ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶, over a 300-year period. For example, Ana Regina and Magdalena Riethm√ºllerin were reprimanded for reading while they should have been paying attention to a 20 ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ .\\nThere was also Juliana Schweickherdt, who came to the notice of the weavers‚Äô guild in the year 1752 for breaking guild rules. As a punishment, she was later given a 21 ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ . Cases like this illustrate how the guilds could prevent 22 ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ and stop skilled people from working\",\"gapIds\":[19,20,21,22],\"answers\":{\"19\":\"descendants\",\"20\":\"sermon\",\"21\":\"fine\",\"22\":\"innovation\"},\"locations\":{\"19\":\"We can follow the same people and their\",\"20\":\"Ana Regina and Magdalena\",\"21\":\"before the guild court and told to\",\"22\":\"of guilds not only prevented people\"},\"_orderId\":19},{\"type\":\"mcq25\",\"id\":23,\"gapIds\":[23,24],\"text\":\"Which TWO of the following statements does the writer make about literacy rates in Section B?\",\"options\":[\"A   Very little research has been done into the link between high literacy rates and improved earnings.\",\"B   Literacy rates in Germany between 1600 and 1900 were very good.\",\"C   There is strong evidence that high literacy rates in the modern world result in economic growth.\",\"D   England is a good example of how high literacy rates helped a country industrialise.\",\"E   Economic growth can help to improve literacy rates.\"],\"answers\":{\"23\":\"B\",\"24\":\"E\"},\"locations\":{\"23\":\"had only mediocre literacy rates by European standards\",\"24\":\"have also struggled to find evidence\"},\"_orderId\":23},{\"type\":\"mcq25\",\"id\":25,\"gapIds\":[25,26],\"text\":\"Which TWO of the following statements does the writer make in Section F about guilds in German-speaking Central Europe between 1600 and 1900?\",\"options\":[\"A   They helped young people to learn a skill.\",\"B   They were opposed to people moving to an area for work.\",\"C   They kept better records than guilds in other parts of the world.\",\"D   They opposed practices that threatened their control over a trade.\",\"E   They predominantly consisted of wealthy merchants.\"],\"answers\":{\"25\":\"B\",\"26\":\"D\"},\"locations\":{\"25\":\"guilds blocked labour migration and\",\"26\":\"\"},\"_orderId\":25}];\nconst vocab=[{\"id\":\"v0\",\"word\":\"database\",\"meaning\":\"c∆° s·ªü d·ªØ li·ªáu (data collection, archive)\",\"synonym\":\"The company updated its database. (C√¥ng ty ƒë√£ c·∫≠p nh·∫≠t c∆° s·ªü d·ªØ li·ªáu.)\",\"example\":\"\"},{\"id\":\"v1\",\"word\":\"compiled\",\"meaning\":\"ƒë∆∞·ª£c bi√™n so·∫°n, t·ªïng h·ª£p (assembled, collected)\",\"synonym\":\"The report was compiled by experts. (B√°o c√°o ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi c√°c chuy√™n gia.)\",\"example\":\"\"},{\"id\":\"v2\",\"word\":\"censuses\",\"meaning\":\"ƒëi·ªÅu tra d√¢n s·ªë (population counts)\",\"synonym\":\"Governments conduct censuses every decade. (Ch√≠nh ph·ªß ti·∫øn h√†nh ƒëi·ªÅu tra d√¢n s·ªë m·ªói th·∫≠p k·ª∑.)\",\"example\":\"\"},{\"id\":\"v3\",\"word\":\"possessions\",\"meaning\":\"t√†i s·∫£n, v·∫≠t s·ªü h·ªØu (belongings, property)\",\"synonym\":\"He lost all his possessions in the fire. (Anh ·∫•y m·∫•t h·∫øt t√†i s·∫£n trong v·ª• ch√°y.)\",\"example\":\"\"},{\"id\":\"v4\",\"word\":\"ordinary\",\"meaning\":\"b√¨nh th∆∞·ªùng (common, usual)\",\"synonym\":\"It was just an ordinary day. (ƒê√≥ ch·ªâ l√† m·ªôt ng√†y b√¨nh th∆∞·ªùng.)\",\"example\":\"\"},{\"id\":\"v5\",\"word\":\"conundrum\",\"meaning\":\"c√¢u ƒë·ªë, v·∫•n ƒë·ªÅ nan gi·∫£i (puzzle, dilemma)\",\"synonym\":\"The mystery presents a real conundrum. (B√≠ ·∫©n n√†y l√† m·ªôt v·∫•n ƒë·ªÅ nan gi·∫£i.)\",\"example\":\"\"},{\"id\":\"v6\",\"word\":\"critical\",\"meaning\":\"quan tr·ªçng, nghi√™m tr·ªçng (essential, crucial)\",\"synonym\":\"Time management is critical for success. (Qu·∫£n l√Ω th·ªùi gian l√† y·∫øu t·ªë quan tr·ªçng ƒë·ªÉ th√†nh c√¥ng.)\",\"example\":\"\"},{\"id\":\"v7\",\"word\":\"industrialise\",\"meaning\":\"c√¥ng nghi·ªáp h√≥a (modernize, mechanize)\",\"synonym\":\"The country began to industrialise rapidly. (ƒê·∫•t n∆∞·ªõc b·∫Øt ƒë·∫ßu c√¥ng nghi·ªáp h√≥a nhanh ch√≥ng.)\",\"example\":\"\"},{\"id\":\"v8\",\"word\":\"enrolment\",\"meaning\":\"s·ª± ghi danh, ƒëƒÉng k√Ω (registration, admission)\",\"synonym\":\"School enrolment increased this year. (S·ªë l∆∞·ª£ng ghi danh v√†o tr∆∞·ªùng tƒÉng nƒÉm nay.)\",\"example\":\"\"},{\"id\":\"v9\",\"word\":\"industriousness\",\"meaning\":\"s·ª± chƒÉm ch·ªâ (diligence, hard work)\",\"synonym\":\"His industriousness impressed his boss. (S·ª± chƒÉm ch·ªâ c·ªßa anh ·∫•y g√¢y ·∫•n t∆∞·ª£ng v·ªõi s·∫øp.)\",\"example\":\"\"},{\"id\":\"v10\",\"word\":\"demographic reconstruction\",\"meaning\":\"t√°i c·∫•u tr√∫c nh√¢n kh·∫©u h·ªçc (population analysis)\",\"synonym\":\"Historians use demographic reconstruction to study societies. (C√°c nh√† s·ª≠ h·ªçc d√πng t√°i c·∫•u tr√∫c nh√¢n kh·∫©u h·ªçc ƒë·ªÉ nghi√™n c·ª©u x√£ h·ªôi.)\",\"example\":\"\"},{\"id\":\"v11\",\"word\":\"descendants\",\"meaning\":\"h·∫≠u du·ªá, con ch√°u (offspring, heirs)\",\"synonym\":\"The king‚Äôs descendants still live here. (Con ch√°u c·ªßa nh√† vua v·∫´n s·ªëng ·ªü ƒë√¢y.)\",\"example\":\"\"},{\"id\":\"v12\",\"word\":\"reprimanded\",\"meaning\":\"khi·ªÉn tr√°ch (scolded, rebuked)\",\"synonym\":\"The student was reprimanded for being late. (H·ªçc sinh b·ªã khi·ªÉn tr√°ch v√¨ ƒëi mu·ªôn.)\",\"example\":\"\"},{\"id\":\"v13\",\"word\":\"equivalent\",\"meaning\":\"t∆∞∆°ng ƒë∆∞∆°ng (equal, comparable)\",\"synonym\":\"Ten dollars is equivalent to about 230,000 VND. (M∆∞·ªùi ƒë√¥ la t∆∞∆°ng ƒë∆∞∆°ng kho·∫£ng 230,000 ƒë·ªìng.)\",\"example\":\"\"},{\"id\":\"v14\",\"word\":\"dominance\",\"meaning\":\"s·ª± th·ªëng tr·ªã, ∆∞u th·∫ø (supremacy, control)\",\"synonym\":\"The team showed dominance in the match. (ƒê·ªôi th·ªÉ hi·ªán s·ª± th·ªëng tr·ªã trong tr·∫≠n ƒë·∫•u.)\",\"example\":\"\"},{\"id\":\"v15\",\"word\":\"cultivation\",\"meaning\":\"s·ª± canh t√°c, tr·ªìng tr·ªçt (farming, growing)\",\"synonym\":\"Rice cultivation is common in Asia. (Canh t√°c l√∫a ph·ªï bi·∫øn ·ªü ch√¢u √Å.)\",\"example\":\"\"},{\"id\":\"v16\",\"word\":\"adoption\",\"meaning\":\"s·ª± nh·∫≠n nu√¥i, s·ª± √°p d·ª•ng (acceptance, implementation)\",\"synonym\":\"The adoption of new technology improved efficiency. (Vi·ªác √°p d·ª•ng c√¥ng ngh·ªá m·ªõi c·∫£i thi·ªán hi·ªáu qu·∫£.)\",\"example\":\"\"},{\"id\":\"v17\",\"word\":\"economic performance\",\"meaning\":\"hi·ªáu qu·∫£ kinh t·∫ø (financial results, productivity)\",\"synonym\":\"The country‚Äôs economic performance improved last year. (Hi·ªáu qu·∫£ kinh t·∫ø c·ªßa ƒë·∫•t n∆∞·ªõc c·∫£i thi·ªán nƒÉm ngo√°i.)\",\"example\":\"\"},{\"id\":\"v18\",\"word\":\"merchant\",\"meaning\":\"th∆∞∆°ng nh√¢n (trader, dealer)\",\"synonym\":\"The merchant sold spices in the market. (Th∆∞∆°ng nh√¢n b√°n gia v·ªã ·ªü ch·ª£.)\",\"example\":\"\"},{\"id\":\"v19\",\"word\":\"undermined\",\"meaning\":\"l√†m suy y·∫øu, ph√° ho·∫°i (weakened, damaged)\",\"synonym\":\"His confidence was undermined by criticism. (S·ª± t·ª± tin c·ªßa anh ·∫•y b·ªã suy y·∫øu b·ªüi l·ªùi ph√™ b√¨nh.)\",\"example\":\"\"},{\"id\":\"v20\",\"word\":\"barriers\",\"meaning\":\"r√†o c·∫£n (obstacles, hindrances)\",\"synonym\":\"Language barriers make communication difficult. (R√†o c·∫£n ng√¥n ng·ªØ g√¢y kh√≥ khƒÉn cho giao ti·∫øp.)\",\"example\":\"\"},{\"id\":\"v21\",\"word\":\"restrictions\",\"meaning\":\"h·∫°n ch·∫ø (limitations, constraints)\",\"synonym\":\"The law imposes restrictions on trade. (Lu·∫≠t √°p ƒë·∫∑t h·∫°n ch·∫ø ƒë·ªëi v·ªõi th∆∞∆°ng m·∫°i.)\",\"example\":\"\"}];\nconst headings=[];\nconst headingKey={};\nconst mifRange=\"ABCDEF\"; \nconst removeOpt=false;\n\n// --- GAME DATA INJECTED ---\nconst pairs = [{\"eng\":\"database\",\"vie\":\"c∆° s·ªü d·ªØ li·ªáu (data collection, archive)\"},{\"eng\":\"compiled\",\"vie\":\"ƒë∆∞·ª£c bi√™n so·∫°n, t·ªïng h·ª£p (assembled, collected)\"},{\"eng\":\"censuses\",\"vie\":\"ƒëi·ªÅu tra d√¢n s·ªë (population counts)\"},{\"eng\":\"possessions\",\"vie\":\"t√†i s·∫£n, v·∫≠t s·ªü h·ªØu (belongings, property)\"},{\"eng\":\"ordinary\",\"vie\":\"b√¨nh th∆∞·ªùng (common, usual)\"},{\"eng\":\"conundrum\",\"vie\":\"c√¢u ƒë·ªë, v·∫•n ƒë·ªÅ nan gi·∫£i (puzzle, dilemma)\"},{\"eng\":\"critical\",\"vie\":\"quan tr·ªçng, nghi√™m tr·ªçng (essential, crucial)\"},{\"eng\":\"industrialise\",\"vie\":\"c√¥ng nghi·ªáp h√≥a (modernize, mechanize)\"},{\"eng\":\"enrolment\",\"vie\":\"s·ª± ghi danh, ƒëƒÉng k√Ω (registration, admission)\"},{\"eng\":\"industriousness\",\"vie\":\"s·ª± chƒÉm ch·ªâ (diligence, hard work)\"},{\"eng\":\"demographic reconstruction\",\"vie\":\"t√°i c·∫•u tr√∫c nh√¢n kh·∫©u h·ªçc (population analysis)\"},{\"eng\":\"descendants\",\"vie\":\"h·∫≠u du·ªá, con ch√°u (offspring, heirs)\"},{\"eng\":\"reprimanded\",\"vie\":\"khi·ªÉn tr√°ch (scolded, rebuked)\"},{\"eng\":\"equivalent\",\"vie\":\"t∆∞∆°ng ƒë∆∞∆°ng (equal, comparable)\"},{\"eng\":\"dominance\",\"vie\":\"s·ª± th·ªëng tr·ªã, ∆∞u th·∫ø (supremacy, control)\"},{\"eng\":\"cultivation\",\"vie\":\"s·ª± canh t√°c, tr·ªìng tr·ªçt (farming, growing)\"},{\"eng\":\"adoption\",\"vie\":\"s·ª± nh·∫≠n nu√¥i, s·ª± √°p d·ª•ng (acceptance, implementation)\"},{\"eng\":\"economic performance\",\"vie\":\"hi·ªáu qu·∫£ kinh t·∫ø (financial results, productivity)\"},{\"eng\":\"merchant\",\"vie\":\"th∆∞∆°ng nh√¢n (trader, dealer)\"},{\"eng\":\"undermined\",\"vie\":\"l√†m suy y·∫øu, ph√° ho·∫°i (weakened, damaged)\"},{\"eng\":\"barriers\",\"vie\":\"r√†o c·∫£n (obstacles, hindrances)\"},{\"eng\":\"restrictions\",\"vie\":\"h·∫°n ch·∫ø (limitations, constraints)\"}];\n\n// --- VIEW TOGGLE ---\nfunction toggleGame() {\n    const g = document.getElementById('game-view');\n    const r = document.getElementById('reading-view');\n    if(g.style.display === 'block') {\n        g.style.display = 'none';\n        r.style.display = 'flex';\n        // Force refresh game to avoid layout bugs\n    } else {\n        g.style.display = 'block';\n        r.style.display = 'none';\n        if(pairs.length > 0) initGame(); // Re-init or Init\n    }\n}\n\n// --- TIMER LOGIC ---\nlet timeLeft = 3600;\nconst timerEl = document.getElementById('timer');\nconst timerInterval = setInterval(() => {\n    if(timeLeft <= 0) {\n        clearInterval(timerInterval);\n        timerEl.innerText = \"00:00\";\n        alert(\"Time is up!\");\n        return;\n    }\n    timeLeft--;\n    const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');\n    const s = (timeLeft % 60).toString().padStart(2, '0');\n    timerEl.innerText = `${m}:${s}`;\n}, 1000);\n\n// Render Reading\nconst qDiv=document.getElementById('qs');\nconst hDiv=document.getElementById('headingsArea');\n\nif(headings.length > 0) {\n    let hHtml = '<div class=\"headings-panel\"><div class=\"headings-title\">List of Headings</div>';\n    headings.forEach(h => { hHtml += `<div class=\"heading-item\" draggable=\"true\" ondragstart=\"dragHeading(event)\" id=\"h-item-${h.id}\" data-hid=\"${h.id}\"><span class=\"h-id\">${h.id}</span> <span>${h.text}</span></div>`; });\n    hHtml += '</div>';\n    hDiv.innerHTML = hHtml;\n}\n\nqs.forEach(q=>{\n  if(q.type==='text-only'){ qDiv.innerHTML+=`<div class=\"text-only\">${q.text}</div>`; }\n  else if(q.type==='summary') { // Matching / Summary (Drag Drop)\n      let h = `<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n      let txt = q.text.replace(/\\n/g, '<br>');\n      q.gapIds.forEach(gid => {\n          const dz = `<span class=\"drop-zone\" id=\"dz-${gid}\" data-gid=\"${gid}\" ondragover=\"allowDrop(event)\" ondrop=\"drop(event)\" onclick=\"clearDrop(${gid})\"></span><span class=\"q-num\" style=\"vertical-align:super;font-size:10px\">${gid}</span>&nbsp;`;\n          let replaced = txt.replace(new RegExp(`${gid}\\\\s*([._‚Ä¶-]{2,}|_{2,}|‚Ä¶+)`), dz);\n          if(replaced === txt) replaced = txt.replace(new RegExp(`${gid}[.]\\\\s+`), dz + ' ');\n          txt = replaced;\n          const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+gid; d.innerText=gid;\n          d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n          document.getElementById('progressBar').appendChild(d);\n      });\n      h += `<div style=\"line-height:2;font-size:15px\">${txt}</div><div style=\"margin-top:15px;display:flex;flex-wrap:wrap;gap:8px;padding-top:10px;border-top:1px dashed #e2e8f0\">`;\n      q.options.forEach(optLine => {\n          const m = optLine.match(/^([A-Z])\\s*[.)]?\\s*(.+)/);\n          if(m) h += `<div class=\"heading-item\" id=\"opt-${q.id}-${m[1]}\" style=\"display:inline-flex;width:auto;margin:0\" draggable=\"true\" ondragstart=\"drag(event)\" data-val=\"${m[1]}\"><span style=\"font-weight:bold;color:#2563eb\">${m[1]}</span> ${m[2]}</div>`;\n      });\n      h += `</div><div id=\"fb-${q.id}\" style=\"margin-top:10px; font-size:13px\"></div></div>`;\n      qDiv.innerHTML += h;\n  } \n  else if(q.type==='gap-fill-block') { // Paragraph Inputs\n      let h = `<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n      let txt = q.text.replace(/\\n/g, '<br>'); \n      q.gapIds.forEach(gid => {\n          const loc = (q.locations && q.locations[gid]) ? q.locations[gid] : \"\";\n          const locBtn = loc ? `<button class=\"loc-btn\" onclick=\"showLoc(${q.id}, ${gid})\">üìç</button>` : \"\";\n          const inp = `<span class=\"q-num\">${gid}</span><input type=\"text\" class=\"gap-input\" data-gid=\"${gid}\" oninput=\"upd(${gid})\">${locBtn}&nbsp;`;\t\n          txt = txt.replace(new RegExp(`${gid}[\\\\s:.)]*(?:[_‚Ä¶.\\\\-]\\\\s*){2,}`), inp);\n          const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+gid; d.innerText=gid;\n          d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n          document.getElementById('progressBar').appendChild(d);\n      });\n      h += `<div style=\"line-height:2.2;font-size:16px\">${txt}</div><div id=\"fb-${q.id}\" style=\"margin-top:10px; font-size:13px\"></div></div>`;\n      qDiv.innerHTML += h;\n  }\n  \n  else if(q.type==='mcq25') {\n      let h = `<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n      const locBtn1 = (q.locations && q.locations[q.gapIds[0]]) ? `<button class=\"loc-btn\" onclick=\"showLoc(${q.id}, ${q.gapIds[0]})\">üìç</button>` : \"\";\n      h += `<div style=\"display:flex;align-items:baseline;margin-bottom:8px;\"><span class=\"q-num\">${q.gapIds[0]}-${q.gapIds[1]}</span> <span>${q.text}</span> ${locBtn1}</div>`;\n      q.options.forEach((o, i) => {\n          h += `<label style=\"display:block;margin:5px 0;cursor:pointer;transition:all 0.2s;\">\n                  <input type=\"checkbox\" name=\"mcq25_${q.id}\" value=\"${o.trim()[0]}\" onchange=\"updMcq25(${q.id}, ${q.gapIds[0]}, ${q.gapIds[1]}, event)\"> ${o} <span id=\"mcq25-mark-${q.id}-${i}\" class=\"mcq-mark\"></span>\n                </label>`;\n      });\n      h += `<div id=\"fb-${q.id}\" class=\"feedback\" style=\"margin-top:8px;font-size:13px\"></div></div>`;\n      qDiv.innerHTML += h;\n      q.gapIds.forEach(gid => {\n          const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+gid; d.innerText=gid;\n          d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n          document.getElementById('progressBar').appendChild(d);\n      });\n  }\n  \n  else { // Standard MCQ / Single Gap Fill\n    let h=`<div class=\"q-block\" id=\"q-card-${q.id}\">`;\n    const loc = q.location || \"\";\n    const locBtn = loc ? `<button class=\"loc-btn\" onclick=\"showLoc(${q.id})\">üìç</button>` : \"\";\n    \n    if(q.type==='gap-fill'){\n       let t=q.text.replace(/(\\d+)[\\s:.)]*(?:[_‚Ä¶.\\-]\\s*){2,}/g, '<span class=\"q-num\">$1</span><input type=\"text\" class=\"gap-input\" data-id=\"'+q.id+'\" oninput=\"upd('+q.id+')\">'+locBtn+'&nbsp;');\n       h+=`<div>${t}</div>`;\n    } else {\n       h+=`<div style=\"display:flex;align-items:baseline\"><span class=\"q-num\">${q.id}.</span> <span>${q.text}</span> ${locBtn}</div>`;\n       if(q.type==='mcq') q.options.forEach((o, i) => { h += `<label class=\"mcq-label\" style=\"display:block;margin:5px 0;cursor:pointer\"><input type=\"radio\" name=\"q${q.id}\" value=\"${o.trim()[0]}\" onchange=\"upd(${q.id})\"> ${o} <span id=\"mcq-mark-${q.id}-${i}\" class=\"mcq-mark\"></span></label>`; });\n       if(q.type==='tfng') {\n           h+='<div class=\"tfng-container\">';\n           ['TRUE', 'FALSE', 'NOT GIVEN'].forEach(opt => {\n               \n               h+=`<label class=\"tfng-label\"><input type=\"radio\" name=\"tfng${q.id}\" value=\"${opt}\" onchange=\"upd(${q.id})\"><span class=\"tfng-btn\">${opt}</span></label>`;\n           });\n           h+='</div>';\n       }\n\t   if(q.type==='ynng') {\n           h+='<div class=\"tfng-container\">';\n           ['YES', 'NO', 'NOT GIVEN'].forEach(opt => {\n               \n               h+=`<label class=\"tfng-label\"><input type=\"radio\" name=\"ynng${q.id}\" value=\"${opt}\" onchange=\"upd(${q.id})\"><span class=\"tfng-btn\">${opt}</span></label>`;\n           });\n           h+='</div>';\n       }\n       if(q.type==='mif') {\n           h+='<div class=\"mif-container\">';\n           mifRange.split('').forEach(char => {\n               h+=`<label class=\"mif-label\"><input type=\"radio\" name=\"mif${q.id}\" value=\"${char}\" onchange=\"upd(${q.id})\"><span class=\"mif-circle\">${char}</span></label>`;\n           });\n           h+='</div>';\n       }\n    }\n    h+=`<div id=\"fb-${q.id}\" class=\"feedback\" style=\"margin-top:8px;font-size:13px\"></div></div>`;\n    qDiv.innerHTML+=h;\n    const d=document.createElement('div'); d.className='progress-circle'; d.id='prog-'+q.id; d.innerText=q.id;\n    d.onclick=()=>document.getElementById('q-card-'+q.id).scrollIntoView({behavior:'smooth',block:'center'});\n    document.getElementById('progressBar').appendChild(d);\n  }\n});\n\n// Drag Drop (Reading)\nfunction allowDrop(ev) { ev.preventDefault(); }\nfunction drag(ev) { \n    ev.dataTransfer.setData(\"text\", ev.target.dataset.val); \n    ev.dataTransfer.setData(\"srcId\", ev.target.id); \n}\nfunction dragHeading(ev) { \n    const el = ev.target.closest('.heading-item');\n    ev.dataTransfer.setData(\"hid\", el.dataset.hid); \n    ev.dataTransfer.setData(\"srcId\", el.id); \n}\nfunction drop(ev) {\n    ev.preventDefault();\n    const zone = ev.target.closest('.drop-zone');\n    if(!zone) return;\n    \n    const type = zone.dataset.type;\n    if (type === 'heading') {\n        const hid = ev.dataTransfer.getData(\"hid\");\n        if(!hid) return; \n        zone.innerHTML = hid.toUpperCase(); \n        zone.dataset.val = hid; \n        zone.classList.add('filled');\n        \n        const srcId = ev.dataTransfer.getData(\"srcId\");\n        document.getElementById(srcId).classList.add('used');\n        if(zone.dataset.prevSrc && zone.dataset.prevSrc !== srcId) document.getElementById(zone.dataset.prevSrc).classList.remove('used');\n        zone.dataset.prevSrc = srcId;\n        return;\n    }\nconst val = ev.dataTransfer.getData(\"text\");\n    if(val) {\n        zone.innerText = val; \n        zone.classList.add('filled');\n        const gid = zone.dataset.gid;\n        document.getElementById('prog-'+gid).classList.add('filled');\n        \n        // Logic l√†m m·ªù option\n        if(removeOpt) {\n            const srcId = ev.dataTransfer.getData(\"srcId\");\n            if(srcId) {\n                const srcEl = document.getElementById(srcId);\n                if(srcEl) srcEl.classList.add('used');\n                // Ph·ª•c h·ªìi l·∫°i ƒë·ªô s√°ng cho option c≈© n·∫øu ng∆∞·ªùi d√πng k√©o ƒë√® option m·ªõi l√™n\n                if(zone.dataset.prevSrc && zone.dataset.prevSrc !== srcId) {\n                    const prevEl = document.getElementById(zone.dataset.prevSrc);\n                    if(prevEl) prevEl.classList.remove('used');\n                }\n                zone.dataset.prevSrc = srcId;\n            }\n        }\n    }\n}\nfunction clearHeading(idx) {\n    const el = document.querySelector(`.heading-drop[data-para=\"${idx}\"]`);\n    if(el.dataset.prevSrc) document.getElementById(el.dataset.prevSrc).classList.remove('used');\n    el.innerHTML = '<span class=\"placeholder\">Drop Heading Here</span>'; el.classList.remove('filled'); delete el.dataset.val;\n}\nfunction clearDrop(gid) {\n    const el = document.getElementById('dz-'+gid);\n    \n    // Ph·ª•c h·ªìi option b√™n d∆∞·ªõi n·∫øu c√≥\n    if(removeOpt && el.dataset.prevSrc) {\n        const prevEl = document.getElementById(el.dataset.prevSrc);\n        if(prevEl) prevEl.classList.remove('used');\n        delete el.dataset.prevSrc;\n    }\n    \n    el.innerText=''; el.classList.remove('filled'); document.getElementById('prog-'+gid).classList.remove('filled');\n}\n\n// Highlight\nconst hlBtn = document.getElementById('hl-btn');\nlet currentRange = null;\ndocument.addEventListener('mouseup', (e) => {\n    if(e.target.closest('#hl-btn')) return;\n    if(e.target.closest('#game-view')) return; // No highlight in game\n    setTimeout(() => {\n        const sel = window.getSelection();\n        if(sel.toString().trim().length > 0) {\n            const range = sel.getRangeAt(0);\n            const parent = range.commonAncestorContainer.parentElement;\n            if(parent.closest('.en-text') || parent.closest('.q-block') || parent.closest('.text-only')) {\n                currentRange = range;\n                const rect = range.getBoundingClientRect();\nhlBtn.style.display = 'block'; \nhlBtn.style.top = (rect.top + window.scrollY - 35) + 'px'; \n// Tr·ª´ ƒëi kho·∫£ng 50px ·ªü to·∫° ƒë·ªô left ƒë·ªÉ d·ªãch n√∫t Highlight sang b√™n tr√°i, nh∆∞·ªùng v·ªã tr√≠ trung t√¢m cho icon Laban\nhlBtn.style.left = (rect.left + (rect.width/2) + 50) + 'px';\n                return;\n            }\n        }\n        hlBtn.style.display = 'none';\n    }, 10);\n});\nfunction applyHighlight(e) {\n    e.preventDefault(); e.stopPropagation();\n    if(currentRange) {\n        const span = document.createElement('span'); span.className = 'user-highlight'; span.setAttribute('onclick', 'removeHighlight(this, event)');\n        try { currentRange.surroundContents(span); window.getSelection().removeAllRanges(); } catch(err) { alert(\"Selection too complex. Try selecting simpler text.\"); }\n        hlBtn.style.display = 'none';\n    }\n}\nwindow.removeHighlight = (el, e) => { e.stopPropagation(); const txt = document.createTextNode(el.innerText); el.parentNode.replaceChild(txt, el); hlBtn.style.display = 'none'; };\n\n// --- SHOW LOCATION LOGIC ---\nwindow.showLoc = (qId, subId) => {\n    // Clear old highlights\n    document.querySelectorAll('.loc-highlight').forEach(el => el.classList.remove('loc-highlight'));\n    \n    const q = qs.find(x => x.id === qId);\n    if(!q) return;\n    \n    let text = \"\";\n    if(subId && q.locations && q.locations[subId]) text = q.locations[subId];\n    else if(q.location) text = q.location;\n    \n    if(!text) return alert(\"No location data found.\");\n    \n    const cleanText = text.trim().replace(/\\s+/g, ' ').toLowerCase();\n    const sents = document.querySelectorAll('.sent');\n    let found = false;\n    \n    sents.forEach(s => {\n        const sText = s.innerText.trim().replace(/\\s+/g, ' ').toLowerCase();\n        // Check if sentence contains location text OR location text contains sentence (partial match)\n        if(sText.includes(cleanText) || (cleanText.length > 20 && cleanText.includes(sText))) {\n            s.classList.add('loc-highlight');\n            if(!found) {\n                s.scrollIntoView({behavior: 'smooth', block: 'center'});\n                found = true;\n            }\n        }\n    });\n    \n    if(!found) alert(\"Could not find exact text match in passage.\");\n};\n\n// --- TRANSLATION HOVER HIGHLIGHT ---\ndocument.querySelectorAll('.sent').forEach(el => {\n    el.addEventListener('mouseenter', () => {\n        const tid = el.getAttribute('data-target');\n        const t = document.getElementById(tid);\n        if(t) t.style.backgroundColor = '#fef08a'; \n    });\n    el.addEventListener('mouseleave', () => {\n        const tid = el.getAttribute('data-target');\n        const t = document.getElementById(tid);\n        if(t) t.style.backgroundColor = 'transparent';\n    });\n});\n\n// Check (Reading)\nwindow.upd = (id) => document.getElementById('prog-'+id).classList.add('filled');\n\nwindow.updMcq25 = (qId, id1, id2, ev) => {\n    const checkboxes = document.querySelectorAll(`input[name=\"mcq25_${qId}\"]`);\n    const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;\n    const p1 = document.getElementById('prog-'+id1);\n    const p2 = document.getElementById('prog-'+id2);\n    \n    if (checkedCount > 2) {\n        ev.target.checked = false;\n        alert(\"You can only choose maximum 2 options!\");\n        return;\n    }\n    \n    if(checkedCount >= 1) p1.classList.add('filled'); else p1.classList.remove('filled');\n    if(checkedCount === 2) p2.classList.add('filled'); else p2.classList.remove('filled');\n};\n\nwindow.check = () => {\n    document.querySelectorAll('.ans-key').forEach(e=>e.remove());\n    document.querySelectorAll('.input-correct, .input-wrong, .correct-zone, .wrong-zone, .correct-opt, .wrong-opt').forEach(e=>e.classList.remove('input-correct','input-wrong','correct-zone','wrong-zone','correct-opt','wrong-opt'));\n\tdocument.querySelectorAll('.prog-correct, .prog-wrong').forEach(e=>e.classList.remove('prog-correct','prog-wrong'));\n    document.querySelectorAll('.mcq-mark').forEach(e=>e.innerText='');\n\n    let score = 0, total = 0;\n    \n    // 1. CHECK HEADINGS\n    if(headings.length > 0) {\n        document.querySelectorAll('.heading-drop').forEach(z => {\n            const pIdx = z.dataset.para, userVal = (z.dataset.val || \"\").toUpperCase(), correctVal = (headingKey[pIdx] || \"\").toUpperCase();\n            if(correctVal) { \n                total++; \n                const fb = document.getElementById('fb-h-'+pIdx);\n                if(userVal === correctVal) { \n                    fb.innerHTML = '<span class=\"correct\">‚úì</span>'; \n                    score++; \n                } else {\n                    fb.innerHTML = `<span class=\"wrong\">‚úó</span> <span class=\"correct\">${correctVal}</span>`; \n                }\n            }\n        });\n    }\n\n    // 2. CHECK QUESTIONS\n    qs.forEach(q => {\n        if(q.type === 'summary' || q.type === 'gap-fill-block') {\n            total += q.gapIds.length;\n            q.gapIds.forEach(gid => {\n                let userVal = \"\";\n                let el = null;\n                const keyVal = (q.answers[gid] || \"\").trim();\n\n                if(q.type==='summary') { \n                    el=document.getElementById('dz-'+gid); \n                    userVal = el?el.innerText.trim():\"\"; \n                    if(el) {\n                        if(userVal.toLowerCase() === keyVal.toLowerCase()) { el.classList.add('correct-zone'); score++; document.getElementById('prog-'+gid).classList.add('prog-correct'); }\n                        else { \n                             el.classList.add('wrong-zone'); \n                             el.insertAdjacentHTML('afterend', `<span class=\"ans-key\">${keyVal}</span>`);\n                             document.getElementById('prog-'+gid).classList.add('prog-wrong');\n                        }\n                    }\n                }\n                if(q.type==='gap-fill-block') { \n                    el=document.querySelector(`input[data-gid=\"${gid}\"]`); \n                    userVal = el?el.value.trim():\"\"; \n                    if(el) {\n                         if(userVal.toLowerCase() === keyVal.toLowerCase()) { el.classList.add('input-correct'); score++; document.getElementById('prog-'+gid).classList.add('prog-correct'); }\n                        else { \n                             el.classList.add('input-wrong');\n                             el.insertAdjacentHTML('afterend', `<span class=\"ans-key\">${keyVal}</span>`);\n                             document.getElementById('prog-'+gid).classList.add('prog-wrong');\n                        }\n                    }\n                }\n            });\n        } \n        // ƒê∆ØA MCQ25 RA TH√ÄNH M·ªòT KH·ªêI ƒê·ªòC L·∫¨P T·∫†I ƒê√ÇY\n        else if (q.type === 'mcq25') {\n            total += 2;\n            const checkboxes = document.querySelectorAll(`input[name=\"mcq25_${q.id}\"]:checked`);\n            let userVals = Array.from(checkboxes).map(cb => cb.value.toUpperCase());\n            let correctVals = q.gapIds.map(gid => (q.answers[gid] || \"\").toUpperCase().trim());\n            let origCorrectVals = [...correctVals];\n\n            let localScore = 0;\n            userVals.forEach(uv => {\n                const idx = correctVals.indexOf(uv);\n                if (idx > -1) { localScore++; correctVals[idx] = null; } \n            });\n            score += localScore;\n\n            const allCheckboxes = document.querySelectorAll(`input[name=\"mcq25_${q.id}\"]`);\n            allCheckboxes.forEach((cb, i) => {\n                const val = cb.value.toUpperCase();\n                const markSpan = document.getElementById(`mcq25-mark-${q.id}-${i}`);\n                const label = cb.closest('label');\n                \n                label.style.border = 'none';\n                label.style.padding = '0';\n                label.style.backgroundColor = 'transparent';\n                if(markSpan) markSpan.innerHTML = '';\n                \n                const isCorrectOption = origCorrectVals.includes(val);\n\n                if (cb.checked) {\n                    if (isCorrectOption) {\n                        if(markSpan) markSpan.innerHTML = '<span style=\"color:#16a34a; font-weight:bold;\">‚úì</span>';\n                        label.style.border = '2px dashed #16a34a';\n                        label.style.padding = '4px 8px';\n                        label.style.borderRadius = '6px';\n                        label.style.backgroundColor = '#f0fdf4';\n                    } else {\n                        if(markSpan) markSpan.innerHTML = '<span style=\"color:#dc2626; font-weight:bold;\">‚úó</span>';\n                        label.style.border = '2px dashed #dc2626';\n                        label.style.padding = '4px 8px';\n                        label.style.borderRadius = '6px';\n                        label.style.backgroundColor = '#fef2f2';\n                    }\n                } else if (isCorrectOption) {\n                    if(markSpan) markSpan.innerHTML = '<span style=\"color:#16a34a; font-weight:bold; font-size:11px; margin-left:4px;\">(Key)</span>';\n                    label.style.border = '2px dashed #16a34a';\n                    label.style.padding = '4px 8px';\n                    label.style.borderRadius = '6px';\n                    label.style.backgroundColor = '#f0fdf4';\n                }\n            });\n\n            let p1 = document.getElementById('prog-'+q.gapIds[0]), p2 = document.getElementById('prog-'+q.gapIds[1]);\n            if (localScore === 2) { p1.classList.add('prog-correct'); p2.classList.add('prog-correct'); }\n            else if (localScore === 1) { p1.classList.add('prog-correct'); p2.classList.add('prog-wrong'); }\n            else { p1.classList.add('prog-wrong'); p2.classList.add('prog-wrong'); }\n\n            if (localScore < 2) document.getElementById('fb-'+q.id).innerHTML = `<span class=\"wrong\">‚úó Correct: ${origCorrectVals.join(', ')}</span>`;\n            else document.getElementById('fb-'+q.id).innerHTML = '<span class=\"correct\">‚úì Correct</span>';\n        }\n        // ƒêI·ªÄU KI·ªÜN CHO C√ÅC C√ÇU H·ªéI TH√îNG TH∆Ø·ªúNG\n        else if (q.id) {\n            total++;\n            let u=\"\", ok=false;\n            const keyVal = (q.correctAnswer||\"\").trim();\n            \n            if(q.type==='mcq') {\n                 const inputs = document.querySelectorAll(`input[name=\"q${q.id}\"]`);\n                 let selectedIdx = -1;\n                 inputs.forEach((inp, idx) => {\n                     if(inp.checked) { u = inp.value; selectedIdx = idx; }\n                 });\n                 if(keyVal.toLowerCase().startsWith(u.toLowerCase()) && u) ok=true;\n                 if(selectedIdx !== -1) {\n                     const markSpan = document.getElementById(`mcq-mark-${q.id}-${selectedIdx}`);\n                     if(markSpan) markSpan.innerHTML = ok ? '<span style=\"color:#16a34a\">‚úì</span>' : '<span style=\"color:#dc2626\">‚úó</span>';\n                 }\n            }\n            if(q.type==='gap-fill') {\n                const el = document.querySelector(`input[data-id=\"${q.id}\"]`);\n                u = el ? el.value.trim() : \"\";\n                if(u.toLowerCase() === keyVal.toLowerCase()) ok=true;\n                if(el) {\n                    if(ok) el.classList.add('input-correct');\n                    else { el.classList.add('input-wrong'); el.insertAdjacentHTML('afterend', `<span class=\"ans-key\">${keyVal}</span>`); }\n                }\n            }\n            if(q.type==='tfng' || q.type==='ynng') {\n                 const inputName = q.type === 'tfng' ? `tfng${q.id}` : `ynng${q.id}`;\n                 const checked = document.querySelector(`input[name=\"${inputName}\"]:checked`);\n                 u = checked ? checked.value : \"\";\n                 \n                 if(u.toLowerCase() === keyVal.toLowerCase()) ok=true;\n                 \n                 if(checked) {\n                     const btn = checked.nextElementSibling;\n                     if(ok) btn.classList.add('correct-opt');\n                     else {\n                         btn.classList.add('wrong-opt');\n                         document.getElementById('fb-'+q.id).insertAdjacentHTML('afterbegin', `<span class=\"ans-key\" style=\"margin-bottom:5px; display:inline-block\">${keyVal}</span> `);\n                     }\n                 } else if (!ok) {\n                     document.getElementById('fb-'+q.id).innerHTML += `<span class=\"ans-key\">${keyVal}</span>`;\n                 }\n            }\n            if(q.type==='mif') {\n                 const checked = document.querySelector(`input[name=\"mif${q.id}\"]:checked`);\n                 u = checked ? checked.value : \"\";\n                 if(u.toLowerCase() === keyVal.toLowerCase()) ok=true;\n                 if(checked) {\n                     const circle = checked.nextElementSibling;\n                     if(ok) circle.classList.add('correct-opt');\n                     else circle.classList.add('wrong-opt');\n                 }\n            }\n\n            if(ok) {\n                score++;\n                document.getElementById('prog-'+q.id).classList.add('prog-correct');\n            } else {\n                document.getElementById('prog-'+q.id).classList.add('prog-wrong');\n            }\n            \n            if(!ok && q.type !== 'summary' && q.type !== 'gap-fill-block') {\n                 const fb = document.getElementById('fb-'+q.id);\n                 fb.innerHTML = `<span class=\"wrong\">‚úó Your: ${u||\"(empty)\"}</span> <span class=\"correct\">Key: ${keyVal}</span>`;\n            } else if(ok && q.type !== 'summary' && q.type !== 'gap-fill-block') {\n                 document.getElementById('fb-'+q.id).innerHTML = '<span class=\"correct\">‚úì Correct</span>';\n            }\n        }\n    });\n\t\n\t\n    alert(`Score: ${score} / ${total}`);\n};\n\nwindow.toggleInlineMif = (qId, pChar) => {\n    const btn = document.querySelector(`.mif-inline-box[data-para=\"${pChar}\"] .mif-inline-btn[data-qid=\"${qId}\"]`);\n    if(!btn) return;\n    const isSelected = btn.classList.contains('selected');\n    \n    if (isSelected) {\n        // B·ªè ch·ªçn\n        btn.classList.remove('selected');\n        const radio = document.querySelector(`input[name=\"mif${qId}\"][value=\"${pChar}\"]`);\n        if(radio) radio.checked = false;\n        \n        // Hi·ªán l·∫°i c√¢u n√†y ·ªü c√°c Passage kh√°c\n        document.querySelectorAll(`.mif-inline-btn[data-qid=\"${qId}\"]`).forEach(el => el.classList.remove('hidden-by-other'));\n        \n        // T·∫Øt m√†u xanh Palette n·∫øu ko c√≤n ch·ªçn g√¨\n        const anyChecked = document.querySelector(`input[name=\"mif${qId}\"]:checked`);\n        if(!anyChecked) document.getElementById('prog-'+qId).classList.remove('filled');\n    } else {\n        // Ch·ªçn\n        btn.classList.add('selected');\n        const radio = document.querySelector(`input[name=\"mif${qId}\"][value=\"${pChar}\"]`);\n        if(radio) radio.checked = true;\n        \n        // ·∫®n c√¢u n√†y kh·ªèi c√°c Passage kh√°c\n        document.querySelectorAll(`.mif-inline-btn[data-qid=\"${qId}\"]`).forEach(el => {\n            if(el !== btn) { el.classList.remove('selected'); el.classList.add('hidden-by-other'); }\n        });\n        document.getElementById('prog-'+qId).classList.add('filled');\n    }\n};\n\n// ƒê·ªìng b·ªô ng∆∞·ª£c: Khi h·ªçc sinh tick Radio b√™n c·ªôt ph·∫£i, t·ª± ƒë·ªông ·∫©n/hi·ªán h·ªôp ·ªü c·ªôt tr√°i\nsetTimeout(() => {\n    document.querySelectorAll('input[type=\"radio\"][name^=\"mif\"]').forEach(radio => {\n        radio.addEventListener('change', (e) => {\n            const qId = radio.name.replace('mif', '');\n            const pChar = radio.value;\n            \n            document.querySelectorAll(`.mif-inline-btn[data-qid=\"${qId}\"]`).forEach(btn => {\n                const btnPara = btn.closest('.mif-inline-box').dataset.para;\n                if(btnPara === pChar) {\n                    btn.classList.remove('hidden-by-other');\n                    btn.classList.add('selected');\n                } else {\n                    btn.classList.remove('selected');\n                    btn.classList.add('hidden-by-other');\n                }\n            });\n        });\n    });\n}, 500);\n// Utils\nwindow.toggleTrans=id=>document.getElementById(id).classList.toggle('hidden');\nconst rs=document.getElementById('rs'),lp=document.getElementById('lp');\nlet x=0,w=0,md=e=>{x=e.clientX;w=lp.offsetWidth;document.addEventListener('mousemove',mm);document.addEventListener('mouseup',mu)};\nlet mm=e=>lp.style.width=((w+e.clientX-x)/rs.parentElement.offsetWidth*100)+'%';\nlet mu=()=>{document.removeEventListener('mousemove',mm);document.removeEventListener('mouseup',mu)};\nrs.addEventListener('mousedown',md);\n\nconst pp=document.getElementById('popup');\ndocument.querySelectorAll('.vocab').forEach(s=>{\n  s.onclick=e=>{\n    const v=vocab.find(x=>x.id===s.dataset.vid);if(!v)return;\n    pp.innerHTML=`<div style=\"background:#1e293b;color:#fff;padding:12px;font-weight:700;display:flex;justify-content:space-between;align-items:center\"><span>${v.word}</span><span onclick=\"speak('${v.word}')\" style=\"cursor:pointer;background:#334155;padding:4px;border-radius:50%\">üîä</span></div><div style=\"padding:16px;font-size:14px;color:#334155\"><p style=\"margin-bottom:8px\"><b style=\"color:#0f172a\">Meaning:</b> ${v.meaning}</p><p style=\"margin-bottom:8px\"><b style=\"color:#0f172a\">Synonyms:</b> ${v.synonym}</p><div style=\"background:#f1f5f9;padding:8px;border-radius:6px;margin-top:8px;color:#475569;font-style:italic\">\"${v.example}\"</div></div>`;\n    pp.style.display='block';pp.style.top=(e.clientY+10)+'px';pp.style.left=Math.min(e.clientX,window.innerWidth-330)+'px';\n    e.stopPropagation();\n  }\n});\ndocument.onclick=e=>{if(!pp.contains(e.target) && e.target.id !== 'hl-btn') pp.style.display='none'};\nwindow.speak=t=>window.speechSynthesis.speak(new SpeechSynthesisUtterance(t));\n\n/* ================================\n   GAME SCRIPT LOGIC\n   ================================ */\n\n/* ====== tr·∫°ng th√°i ====== */\nlet state = { engOrder: [], shuffledVie: [], matches: {}, score: 0 };\nconst engListEl = document.getElementById('engList');\nconst vieListEl = document.getElementById('vieList');\nconst scoreEl = document.getElementById('score');\nconst confettiEl = document.getElementById('confetti');\n\n/* helper shuffle */\nfunction shuffleArray(arr){\n  const a = arr.slice();\n  for(let i=a.length-1;i>0;i--){\n    const j = Math.floor(Math.random()*(i+1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\n/* init */\nfunction initGame(){\n  state.matches = {}; state.score = 0;\n  if(pairs.length === 0) {\n      engListEl.innerHTML = '<div style=\"color:white;padding:20px\">No vocab data selected in the Generator!</div>';\n      return;\n  }\n  state.engOrder = shuffleArray(pairs.map((_,i)=>i));\n  state.shuffledVie = shuffleArray(pairs.map(p => p.vie));\n  renderEng(); renderVie(); attachSlotEvents(); updateScore(); initFlashcards(); renderFillList();\n}\n\n/* render eng */\nfunction renderEng(){\n  engListEl.innerHTML = '';\n  state.engOrder.forEach((origIndex, pos) => {\n    const p = pairs[origIndex];\n    const item = document.createElement('div');\n    item.className = 'g-eng-item';\n    item.dataset.origIndex = origIndex;\n    item.innerHTML = `\n      <div class=\"g-eng-left\">\n        <div class=\"g-index\">${pos+1}</div>\n        <div>\n          <div style=\"font-weight:700\">${p.eng}</div>\n          <div style=\"font-size:13px; color:var(--muted)\">English</div>\n        </div>\n      </div>\n      <div class=\"g-slot\" data-index=\"${origIndex}\" aria-label=\"drop slot\" tabindex=\"0\"><div class=\"inner\"></div></div>\n    `;\n    engListEl.appendChild(item);\n  });\n}\n\n/* render vie */\nfunction renderVie(){\n  vieListEl.innerHTML = '';\n  state.shuffledVie.forEach((text, idx) => {\n    const d = document.createElement('div');\n    d.className = 'g-vie-item';\n    d.draggable = true;\n    d.dataset.text = text;\n    d.id = 'vie-'+idx;\n    d.innerHTML = `<span style=\"font-weight:600\">${text}</span>`;\n    vieListEl.appendChild(d);\n\n    d.addEventListener('dragstart', e => {\n      d.classList.add('dragging');\n      e.dataTransfer.setData('text/plain', text);\n      currentPicked = {text, el:d};\n    });\n    d.addEventListener('dragend', ()=> d.classList.remove('dragging'));\n    d.addEventListener('click', () => {\n      if(currentPicked && currentPicked.el === d){ currentPicked = null; d.style.outline = ''; }\n      else { clearPicked(); currentPicked = {text, el:d}; d.style.outline = '2px solid rgba(6,182,212,0.18)'; }\n    });\n  });\n}\n\n/* drag & drop */\nfunction attachSlotEvents(){\n  const slots = document.querySelectorAll('.g-slot');\n  slots.forEach(slot => {\n    slot.addEventListener('dragover', e => { e.preventDefault(); slot.classList.add('active'); });\n    slot.addEventListener('dragleave', () => slot.classList.remove('active'));\n    slot.addEventListener('drop', e => {\n      e.preventDefault(); slot.classList.remove('active');\n      const text = e.dataTransfer.getData('text/plain'); handleDrop(slot, text);\n    });\n    slot.addEventListener('click', () => { if(currentPicked) handleDrop(slot, currentPicked.text); });\n    slot.addEventListener('focus', () => slot.classList.add('highlight'));\n    slot.addEventListener('blur', () => slot.classList.remove('highlight'));\n    slot.addEventListener('keydown', e => { if(e.key === 'Enter' && currentPicked) handleDrop(slot, currentPicked.text); });\n  });\n}\n\nfunction handleDrop(slot, vieText){\n  const engIndex = Number(slot.dataset.index);\n  const correctVie = pairs[engIndex].vie;\n  if(state.matches[engIndex]) return;\n  if(vieText === correctVie){\n    slot.classList.add('correct');\n    slot.innerHTML = `<div class=\"inner\"><span style=\"color:#10b981;margin-right:5px\">‚úì</span> <span style=\"font-weight:700;color:var(--success)\">${vieText}</span></div>`;\n    slot.style.borderColor = 'rgba(16,185,129,0.9)'; slot.style.boxShadow = '0 10px 30px rgba(16,185,129,0.06)';\n    state.matches[engIndex] = vieText; state.score++; updateScore(); celebrate(); speak(pairs[engIndex].eng); removeVieItem(vieText);\n    if(state.score === pairs.length){ setTimeout(()=> alert('Ch√∫c m·ª´ng! B·∫°n ƒë√£ gh√©p ƒë√∫ng t·∫•t c·∫£.'), 300); }\n  } else {\n    slot.classList.add('g-wrong'); setTimeout(()=> slot.classList.remove('g-wrong'), 420);\n    const vieEl = findVieElement(vieText);\n    if(vieEl){ vieEl.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}], {duration:300}); }\n  }\n}\n\nfunction removeVieItem(text){ const el = findVieElement(text); if(el){ el.remove(); currentPicked = null; } }\nfunction findVieElement(text){ return Array.from(document.querySelectorAll('.g-vie-item')).find(x => x.dataset.text === text); }\nfunction updateScore(){ scoreEl.innerHTML = `ƒê√∫ng: <strong>${state.score}</strong> / ${pairs.length}`; }\n\n/* confetti */\nfunction celebrate(){\n  const colors = ['#06b6d4','#f97316','#f43f5e','#10b981','#60a5fa'];\n  for(let i=0;i<18;i++){\n    const p = document.createElement('div'); p.className = 'piece';\n    p.style.left = Math.random()*100 + '%'; p.style.background = colors[Math.floor(Math.random()*colors.length)];\n    p.style.width = (8 + Math.random()*10) + 'px'; p.style.height = (10 + Math.random()*14) + 'px';\n    p.style.animationDuration = (900 + Math.random()*700) + 'ms'; confettiEl.appendChild(p); setTimeout(()=> p.remove(), 2000);\n  }\n}\n\n/* controls */\ndocument.getElementById('shuffleBtn').addEventListener('click', () => {\n  state.engOrder = shuffleArray(pairs.map((_,i)=>i)); state.shuffledVie = shuffleArray(pairs.map(p => p.vie));\n  renderEng(); renderVie(); attachSlotEvents(); state.matches = {}; state.score = 0; updateScore();\n});\ndocument.getElementById('resetBtn').addEventListener('click', () => initGame());\n\n/* touch fallback */\nlet currentPicked = null;\nfunction clearPicked(){ if(currentPicked && currentPicked.el) currentPicked.el.style.outline = ''; currentPicked = null; }\ndocument.addEventListener('click', (e) => { \n    if(!e.target.closest('.g-vie-item') && !e.target.closest('.g-slot')) clearPicked(); \n});\n\n/* FLASHCARDS */\nlet flashIndex = 0; let flashAuto = null;\nconst flashFront = document.getElementById('flashFront'); const flashBack = document.getElementById('flashBack'); const flashcardEl = document.getElementById('flashcard');\n\nfunction initFlashcards(){ flashIndex = 0; renderFlash(); }\nfunction renderFlash(){\n  if(pairs.length === 0){ flashFront.textContent = 'Kh√¥ng c√≥ t·ª´ n√†o'; flashBack.textContent = ''; return; }\n  const p = pairs[flashIndex]; flashFront.textContent = p.eng; flashBack.textContent = p.vie; flashcardEl.classList.remove('flipped'); flashcardEl.setAttribute('aria-pressed','false');\n}\ndocument.getElementById('nextCard').addEventListener('click', () => { if(pairs.length) { flashIndex = (flashIndex + 1) % pairs.length; renderFlash(); } });\ndocument.getElementById('prevCard').addEventListener('click', () => { if(pairs.length) { flashIndex = (flashIndex - 1 + pairs.length) % pairs.length; renderFlash(); } });\ndocument.getElementById('flipCard').addEventListener('click', () => { flashcardEl.classList.toggle('flipped'); flashcardEl.setAttribute('aria-pressed', flashcardEl.classList.contains('flipped')); });\nflashcardEl.addEventListener('click', () => { flashcardEl.classList.toggle('flipped'); flashcardEl.setAttribute('aria-pressed', flashcardEl.classList.contains('flipped')); });\ndocument.getElementById('autoPlay').addEventListener('click', (e) => {\n  if(flashAuto){ clearInterval(flashAuto); flashAuto = null; e.target.textContent = 'Auto'; }\n  else { flashAuto = setInterval(()=>{ flashIndex = (flashIndex+1)%pairs.length; renderFlash(); }, 2000); e.target.textContent = 'Stop'; }\n});\ndocument.getElementById('showBoth').addEventListener('click', () => { flashcardEl.classList.add('flipped'); setTimeout(()=> flashcardEl.classList.remove('flipped'), 1600); });\n\n/* FILL-IN */\nconst fillListEl = document.getElementById('fillList'); const fillScoreEl = document.getElementById('fillScore');\nfunction renderFillList(){\n  fillListEl.innerHTML = '';\n  pairs.forEach((p, idx) => {\n    const row = document.createElement('div'); row.className = 'fill-row';\n    row.innerHTML = `<div class=\"vie\">${p.vie}</div><input type=\"text\" data-index=\"${idx}\" placeholder=\"Nh·∫≠p ti·∫øng Anh...\" /><div class=\"small\" style=\"min-width:120px\" id=\"hint-${idx}\"></div>`;\n    fillListEl.appendChild(row);\n    const input = row.querySelector('input');\n    input.addEventListener('focus', () => input.classList.remove('wrong'));\n    input.addEventListener('blur', () => {});\n  });\n  fillScoreEl.textContent = `ƒêi·ªÉm: 0 / ${pairs.length}`;\n}\n\ndocument.getElementById('checkFill').addEventListener('click', () => {\n  let correct = 0;\n  pairs.forEach((p, idx) => {\n    const input = fillListEl.querySelector(`input[data-index=\"${idx}\"]`);\n    const hint = document.getElementById(`hint-${idx}`);\n    const val = (input.value || '').trim().toLowerCase();\n    const target = p.eng.trim().toLowerCase();\n    if(val === target){\n      correct++; input.classList.add('correct'); input.classList.remove('wrong'); input.style.borderColor = 'rgba(16,185,129,0.9)'; hint.innerHTML = `<span class=\"correct-answer\">ƒê√∫ng</span>`;\n    } else {\n      input.classList.remove('correct'); input.classList.add('wrong'); input.style.borderColor = 'rgba(244,63,94,0.9)'; hint.innerHTML = `<span class=\"wrong-answer\">Sai</span>`;\n    }\n  });\n  fillScoreEl.textContent = `ƒêi·ªÉm: ${correct} / ${pairs.length}`;\n});\n\ndocument.getElementById('showAnswers').addEventListener('click', () => {\n  pairs.forEach((p, idx) => {\n    const input = fillListEl.querySelector(`input[data-index=\"${idx}\"]`);\n    input.value = p.eng; input.classList.add('correct'); input.style.borderColor = 'rgba(6,182,212,0.6)';\n    const hint = document.getElementById(`hint-${idx}`); hint.innerHTML = `<span class=\"correct-answer\">ƒê√°p √°n</span>`;\n  });\n  fillScoreEl.textContent = `ƒêi·ªÉm: ${pairs.length} / ${pairs.length}`;\n});\n\ndocument.getElementById('resetFill').addEventListener('click', () => renderFillList());\n\n<\/script>\n\n<script type=\"text/javascript\">var lbplugin_event_opt={\"extension_enable\":true,\"dict_type\":1,\"dbclk_event\":{\"trigger\":\"none\",\"enable\":true,\"display\":1},\"select_event\":{\"trigger\":\"none\",\"enable\":true,\"display\":1}};function loadScript(t,e){var n=document.createElement(\"script\");n.type=\"text/javascript\",n.readyState?n.onreadystatechange=function(){(\"loaded\"===n.readyState||\"complete\"===n.readyState)&&(n.onreadystatechange=null,e())}:n.onload=function(){e()},n.src=t,document.getElementsByTagName(\"head\")[0].appendChild(n)}setTimeout(function(){null==document.getElementById(\"lbdictex_find_popup\")&&loadScript(\"https://stc-laban.zdn.vn/dictionary/js/plugin/lbdictplugin.min.js?\"+Date.now()%1e4,function(){lbDictPlugin.init(lbplugin_event_opt)})},1e3);<\/script>\n</body>\n\n</html>"}];
    const select = document.getElementById('selectBai');
    const openBtn = document.getElementById('openBtn');
    const clearBtn = document.getElementById('clearBtn');
    const frame = document.getElementById('frame');
    const controlsBar = document.getElementById('controlsBar');

    // populate select
    items.forEach((it, idx) => {
      const opt = document.createElement('option');
      opt.value = idx;
      opt.textContent = it.name || it.filename || ('B√†i ' + (idx+1));
      select.appendChild(opt);
    });

    function enterFullscreenMode() {
      // hide controls and expand iframe
      controlsBar.classList.add('hidden');
      frame.classList.add('fullscreen-frame');

      // create close button if ch∆∞a c√≥
      if (!document.getElementById('closeFullscreen')) {
        const btn = document.createElement('button');
        btn.id = 'closeFullscreen';
        btn.textContent = 'ƒê√≥ng to√†n m√†n h√¨nh';
        btn.onclick = exitFullscreenMode;
        document.body.appendChild(btn);
      }
    }

    function exitFullscreenMode() {
      // restore controls and iframe
      controlsBar.classList.remove('hidden');
      frame.classList.remove('fullscreen-frame');
      const btn = document.getElementById('closeFullscreen');
      if (btn) btn.remove();
    }

    openBtn.onclick = () => {
      const v = select.value;
      if (v === '') {
        alert('Vui l√≤ng ch·ªçn m·ªôt b√†i.');
        return;
      }
      const it = items[+v];
      frame.srcdoc = it.content;

      // v√†o ch·∫ø ƒë·ªô to√†n m√†n h√¨nh
      enterFullscreenMode();
    };

    clearBtn.onclick = () => {
      select.value = '';
      frame.srcdoc = '<p>Ch∆∞a ch·ªçn b√†i</p>';
    };

    // allow Enter key to open when select focused
    select.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') openBtn.click();
    });

    // Escape ƒë·ªÉ tho√°t to√†n m√†n h√¨nh
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        exitFullscreenMode();
      }
    });
  </script>
</body>
</html>
